(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();function nu(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ru={exports:{}},ui={},ou={exports:{}},ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fo=Symbol.for("react.element"),Zp=Symbol.for("react.portal"),e0=Symbol.for("react.fragment"),t0=Symbol.for("react.strict_mode"),n0=Symbol.for("react.profiler"),r0=Symbol.for("react.provider"),o0=Symbol.for("react.context"),s0=Symbol.for("react.forward_ref"),i0=Symbol.for("react.suspense"),l0=Symbol.for("react.memo"),a0=Symbol.for("react.lazy"),Sc=Symbol.iterator;function c0(e){return e===null||typeof e!="object"?null:(e=Sc&&e[Sc]||e["@@iterator"],typeof e=="function"?e:null)}var su={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},iu=Object.assign,lu={};function Pr(e,t,n){this.props=e,this.context=t,this.refs=lu,this.updater=n||su}Pr.prototype.isReactComponent={};Pr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Pr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function au(){}au.prototype=Pr.prototype;function ba(e,t,n){this.props=e,this.context=t,this.refs=lu,this.updater=n||su}var ka=ba.prototype=new au;ka.constructor=ba;iu(ka,Pr.prototype);ka.isPureReactComponent=!0;var Cc=Array.isArray,cu=Object.prototype.hasOwnProperty,ja={current:null},du={key:!0,ref:!0,__self:!0,__source:!0};function uu(e,t,n){var r,o={},s=null,l=null;if(t!=null)for(r in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(s=""+t.key),t)cu.call(t,r)&&!du.hasOwnProperty(r)&&(o[r]=t[r]);var a=arguments.length-2;if(a===1)o.children=n;else if(1<a){for(var c=Array(a),d=0;d<a;d++)c[d]=arguments[d+2];o.children=c}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)o[r]===void 0&&(o[r]=a[r]);return{$$typeof:Fo,type:e,key:s,ref:l,props:o,_owner:ja.current}}function d0(e,t){return{$$typeof:Fo,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function wa(e){return typeof e=="object"&&e!==null&&e.$$typeof===Fo}function u0(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Nc=/\/+/g;function $i(e,t){return typeof e=="object"&&e!==null&&e.key!=null?u0(""+e.key):t.toString(36)}function ys(e,t,n,r,o){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case Fo:case Zp:l=!0}}if(l)return l=e,o=o(l),e=r===""?"."+$i(l,0):r,Cc(o)?(n="",e!=null&&(n=e.replace(Nc,"$&/")+"/"),ys(o,t,n,"",function(d){return d})):o!=null&&(wa(o)&&(o=d0(o,n+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(Nc,"$&/")+"/")+e)),t.push(o)),1;if(l=0,r=r===""?".":r+":",Cc(e))for(var a=0;a<e.length;a++){s=e[a];var c=r+$i(s,a);l+=ys(s,t,n,c,o)}else if(c=c0(e),typeof c=="function")for(e=c.call(e),a=0;!(s=e.next()).done;)s=s.value,c=r+$i(s,a++),l+=ys(s,t,n,c,o);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function Yo(e,t,n){if(e==null)return e;var r=[],o=0;return ys(e,r,"","",function(s){return t.call(n,s,o++)}),r}function f0(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var rt={current:null},bs={transition:null},p0={ReactCurrentDispatcher:rt,ReactCurrentBatchConfig:bs,ReactCurrentOwner:ja};function fu(){throw Error("act(...) is not supported in production builds of React.")}ue.Children={map:Yo,forEach:function(e,t,n){Yo(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Yo(e,function(){t++}),t},toArray:function(e){return Yo(e,function(t){return t})||[]},only:function(e){if(!wa(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ue.Component=Pr;ue.Fragment=e0;ue.Profiler=n0;ue.PureComponent=ba;ue.StrictMode=t0;ue.Suspense=i0;ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=p0;ue.act=fu;ue.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=iu({},e.props),o=e.key,s=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,l=ja.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(c in t)cu.call(t,c)&&!du.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&a!==void 0?a[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var d=0;d<c;d++)a[d]=arguments[d+2];r.children=a}return{$$typeof:Fo,type:e.type,key:o,ref:s,props:r,_owner:l}};ue.createContext=function(e){return e={$$typeof:o0,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:r0,_context:e},e.Consumer=e};ue.createElement=uu;ue.createFactory=function(e){var t=uu.bind(null,e);return t.type=e,t};ue.createRef=function(){return{current:null}};ue.forwardRef=function(e){return{$$typeof:s0,render:e}};ue.isValidElement=wa;ue.lazy=function(e){return{$$typeof:a0,_payload:{_status:-1,_result:e},_init:f0}};ue.memo=function(e,t){return{$$typeof:l0,type:e,compare:t===void 0?null:t}};ue.startTransition=function(e){var t=bs.transition;bs.transition={};try{e()}finally{bs.transition=t}};ue.unstable_act=fu;ue.useCallback=function(e,t){return rt.current.useCallback(e,t)};ue.useContext=function(e){return rt.current.useContext(e)};ue.useDebugValue=function(){};ue.useDeferredValue=function(e){return rt.current.useDeferredValue(e)};ue.useEffect=function(e,t){return rt.current.useEffect(e,t)};ue.useId=function(){return rt.current.useId()};ue.useImperativeHandle=function(e,t,n){return rt.current.useImperativeHandle(e,t,n)};ue.useInsertionEffect=function(e,t){return rt.current.useInsertionEffect(e,t)};ue.useLayoutEffect=function(e,t){return rt.current.useLayoutEffect(e,t)};ue.useMemo=function(e,t){return rt.current.useMemo(e,t)};ue.useReducer=function(e,t,n){return rt.current.useReducer(e,t,n)};ue.useRef=function(e){return rt.current.useRef(e)};ue.useState=function(e){return rt.current.useState(e)};ue.useSyncExternalStore=function(e,t,n){return rt.current.useSyncExternalStore(e,t,n)};ue.useTransition=function(){return rt.current.useTransition()};ue.version="18.3.1";ou.exports=ue;var v=ou.exports;const ye=nu(v);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m0=v,h0=Symbol.for("react.element"),g0=Symbol.for("react.fragment"),x0=Object.prototype.hasOwnProperty,v0=m0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,y0={key:!0,ref:!0,__self:!0,__source:!0};function pu(e,t,n){var r,o={},s=null,l=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(l=t.ref);for(r in t)x0.call(t,r)&&!y0.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:h0,type:e,key:s,ref:l,props:o,_owner:v0.current}}ui.Fragment=g0;ui.jsx=pu;ui.jsxs=pu;ru.exports=ui;var i=ru.exports,kl={},mu={exports:{}},vt={},hu={exports:{}},gu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(T,F){var H=T.length;T.push(F);e:for(;0<H;){var Z=H-1>>>1,G=T[Z];if(0<o(G,F))T[Z]=F,T[H]=G,H=Z;else break e}}function n(T){return T.length===0?null:T[0]}function r(T){if(T.length===0)return null;var F=T[0],H=T.pop();if(H!==F){T[0]=H;e:for(var Z=0,G=T.length,fe=G>>>1;Z<fe;){var ae=2*(Z+1)-1,Pe=T[ae],ne=ae+1,Me=T[ne];if(0>o(Pe,H))ne<G&&0>o(Me,Pe)?(T[Z]=Me,T[ne]=H,Z=ne):(T[Z]=Pe,T[ae]=H,Z=ae);else if(ne<G&&0>o(Me,H))T[Z]=Me,T[ne]=H,Z=ne;else break e}}return F}function o(T,F){var H=T.sortIndex-F.sortIndex;return H!==0?H:T.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var l=Date,a=l.now();e.unstable_now=function(){return l.now()-a}}var c=[],d=[],p=1,u=null,f=3,h=!1,y=!1,b=!1,k=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(T){for(var F=n(d);F!==null;){if(F.callback===null)r(d);else if(F.startTime<=T)r(d),F.sortIndex=F.expirationTime,t(c,F);else break;F=n(d)}}function S(T){if(b=!1,g(T),!y)if(n(c)!==null)y=!0,z(I);else{var F=n(d);F!==null&&B(S,F.startTime-T)}}function I(T,F){y=!1,b&&(b=!1,x(A),A=-1),h=!0;var H=f;try{for(g(F),u=n(c);u!==null&&(!(u.expirationTime>F)||T&&!R());){var Z=u.callback;if(typeof Z=="function"){u.callback=null,f=u.priorityLevel;var G=Z(u.expirationTime<=F);F=e.unstable_now(),typeof G=="function"?u.callback=G:u===n(c)&&r(c),g(F)}else r(c);u=n(c)}if(u!==null)var fe=!0;else{var ae=n(d);ae!==null&&B(S,ae.startTime-F),fe=!1}return fe}finally{u=null,f=H,h=!1}}var E=!1,j=null,A=-1,J=5,w=-1;function R(){return!(e.unstable_now()-w<J)}function U(){if(j!==null){var T=e.unstable_now();w=T;var F=!0;try{F=j(!0,T)}finally{F?M():(E=!1,j=null)}}else E=!1}var M;if(typeof m=="function")M=function(){m(U)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,$=P.port2;P.port1.onmessage=U,M=function(){$.postMessage(null)}}else M=function(){k(U,0)};function z(T){j=T,E||(E=!0,M())}function B(T,F){A=k(function(){T(e.unstable_now())},F)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_continueExecution=function(){y||h||(y=!0,z(I))},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(T){switch(f){case 1:case 2:case 3:var F=3;break;default:F=f}var H=f;f=F;try{return T()}finally{f=H}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(T,F){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var H=f;f=T;try{return F()}finally{f=H}},e.unstable_scheduleCallback=function(T,F,H){var Z=e.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?Z+H:Z):H=Z,T){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=H+G,T={id:p++,callback:F,priorityLevel:T,startTime:H,expirationTime:G,sortIndex:-1},H>Z?(T.sortIndex=H,t(d,T),n(c)===null&&T===n(d)&&(b?(x(A),A=-1):b=!0,B(S,H-Z))):(T.sortIndex=G,t(c,T),y||h||(y=!0,z(I))),T},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(T){var F=f;return function(){var H=f;f=F;try{return T.apply(this,arguments)}finally{f=H}}}})(gu);hu.exports=gu;var b0=hu.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k0=v,xt=b0;function _(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var xu=new Set,go={};function Qn(e,t){br(e,t),br(e+"Capture",t)}function br(e,t){for(go[e]=t,e=0;e<t.length;e++)xu.add(t[e])}var nn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jl=Object.prototype.hasOwnProperty,j0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ic={},Ec={};function w0(e){return jl.call(Ec,e)?!0:jl.call(Ic,e)?!1:j0.test(e)?Ec[e]=!0:(Ic[e]=!0,!1)}function S0(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function C0(e,t,n,r){if(t===null||typeof t>"u"||S0(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ot(e,t,n,r,o,s,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=l}var Qe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Qe[e]=new ot(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Qe[t]=new ot(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Qe[e]=new ot(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Qe[e]=new ot(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Qe[e]=new ot(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Qe[e]=new ot(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Qe[e]=new ot(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Qe[e]=new ot(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Qe[e]=new ot(e,5,!1,e.toLowerCase(),null,!1,!1)});var Sa=/[\-:]([a-z])/g;function Ca(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Sa,Ca);Qe[t]=new ot(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Sa,Ca);Qe[t]=new ot(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Sa,Ca);Qe[t]=new ot(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Qe[e]=new ot(e,1,!1,e.toLowerCase(),null,!1,!1)});Qe.xlinkHref=new ot("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Qe[e]=new ot(e,1,!1,e.toLowerCase(),null,!0,!0)});function Na(e,t,n,r){var o=Qe.hasOwnProperty(t)?Qe[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(C0(t,n,o,r)&&(n=null),r||o===null?w0(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var ln=k0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Go=Symbol.for("react.element"),er=Symbol.for("react.portal"),tr=Symbol.for("react.fragment"),Ia=Symbol.for("react.strict_mode"),wl=Symbol.for("react.profiler"),vu=Symbol.for("react.provider"),yu=Symbol.for("react.context"),Ea=Symbol.for("react.forward_ref"),Sl=Symbol.for("react.suspense"),Cl=Symbol.for("react.suspense_list"),Pa=Symbol.for("react.memo"),mn=Symbol.for("react.lazy"),bu=Symbol.for("react.offscreen"),Pc=Symbol.iterator;function $r(e){return e===null||typeof e!="object"?null:(e=Pc&&e[Pc]||e["@@iterator"],typeof e=="function"?e:null)}var Ee=Object.assign,Bi;function qr(e){if(Bi===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Bi=t&&t[1]||""}return`
`+Bi+e}var Ui=!1;function Wi(e,t){if(!e||Ui)return"";Ui=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var o=d.stack.split(`
`),s=r.stack.split(`
`),l=o.length-1,a=s.length-1;1<=l&&0<=a&&o[l]!==s[a];)a--;for(;1<=l&&0<=a;l--,a--)if(o[l]!==s[a]){if(l!==1||a!==1)do if(l--,a--,0>a||o[l]!==s[a]){var c=`
`+o[l].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=l&&0<=a);break}}}finally{Ui=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?qr(e):""}function N0(e){switch(e.tag){case 5:return qr(e.type);case 16:return qr("Lazy");case 13:return qr("Suspense");case 19:return qr("SuspenseList");case 0:case 2:case 15:return e=Wi(e.type,!1),e;case 11:return e=Wi(e.type.render,!1),e;case 1:return e=Wi(e.type,!0),e;default:return""}}function Nl(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case tr:return"Fragment";case er:return"Portal";case wl:return"Profiler";case Ia:return"StrictMode";case Sl:return"Suspense";case Cl:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case yu:return(e.displayName||"Context")+".Consumer";case vu:return(e._context.displayName||"Context")+".Provider";case Ea:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Pa:return t=e.displayName||null,t!==null?t:Nl(e.type)||"Memo";case mn:t=e._payload,e=e._init;try{return Nl(e(t))}catch{}}return null}function I0(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Nl(t);case 8:return t===Ia?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Pn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ku(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function E0(e){var t=ku(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(l){r=""+l,s.call(this,l)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Xo(e){e._valueTracker||(e._valueTracker=E0(e))}function ju(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ku(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function As(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Il(e,t){var n=t.checked;return Ee({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Oc(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Pn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function wu(e,t){t=t.checked,t!=null&&Na(e,"checked",t,!1)}function El(e,t){wu(e,t);var n=Pn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Pl(e,t.type,n):t.hasOwnProperty("defaultValue")&&Pl(e,t.type,Pn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Mc(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Pl(e,t,n){(t!=="number"||As(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Zr=Array.isArray;function pr(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Pn(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function Ol(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(_(91));return Ee({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Dc(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(_(92));if(Zr(n)){if(1<n.length)throw Error(_(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Pn(n)}}function Su(e,t){var n=Pn(t.value),r=Pn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Rc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Cu(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ml(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Cu(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var qo,Nu=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(qo=qo||document.createElement("div"),qo.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=qo.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function xo(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var no={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},P0=["Webkit","ms","Moz","O"];Object.keys(no).forEach(function(e){P0.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),no[t]=no[e]})});function Iu(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||no.hasOwnProperty(e)&&no[e]?(""+t).trim():t+"px"}function Eu(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=Iu(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var O0=Ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Dl(e,t){if(t){if(O0[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(_(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(_(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(_(61))}if(t.style!=null&&typeof t.style!="object")throw Error(_(62))}}function Rl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Al=null;function Oa(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ll=null,mr=null,hr=null;function Ac(e){if(e=Ho(e)){if(typeof Ll!="function")throw Error(_(280));var t=e.stateNode;t&&(t=gi(t),Ll(e.stateNode,e.type,t))}}function Pu(e){mr?hr?hr.push(e):hr=[e]:mr=e}function Ou(){if(mr){var e=mr,t=hr;if(hr=mr=null,Ac(e),t)for(e=0;e<t.length;e++)Ac(t[e])}}function Mu(e,t){return e(t)}function Du(){}var Vi=!1;function Ru(e,t,n){if(Vi)return e(t,n);Vi=!0;try{return Mu(e,t,n)}finally{Vi=!1,(mr!==null||hr!==null)&&(Du(),Ou())}}function vo(e,t){var n=e.stateNode;if(n===null)return null;var r=gi(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(_(231,t,typeof n));return n}var Tl=!1;if(nn)try{var Br={};Object.defineProperty(Br,"passive",{get:function(){Tl=!0}}),window.addEventListener("test",Br,Br),window.removeEventListener("test",Br,Br)}catch{Tl=!1}function M0(e,t,n,r,o,s,l,a,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(p){this.onError(p)}}var ro=!1,Ls=null,Ts=!1,Jl=null,D0={onError:function(e){ro=!0,Ls=e}};function R0(e,t,n,r,o,s,l,a,c){ro=!1,Ls=null,M0.apply(D0,arguments)}function A0(e,t,n,r,o,s,l,a,c){if(R0.apply(this,arguments),ro){if(ro){var d=Ls;ro=!1,Ls=null}else throw Error(_(198));Ts||(Ts=!0,Jl=d)}}function Yn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Au(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Lc(e){if(Yn(e)!==e)throw Error(_(188))}function L0(e){var t=e.alternate;if(!t){if(t=Yn(e),t===null)throw Error(_(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var s=o.alternate;if(s===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return Lc(o),e;if(s===r)return Lc(o),t;s=s.sibling}throw Error(_(188))}if(n.return!==r.return)n=o,r=s;else{for(var l=!1,a=o.child;a;){if(a===n){l=!0,n=o,r=s;break}if(a===r){l=!0,r=o,n=s;break}a=a.sibling}if(!l){for(a=s.child;a;){if(a===n){l=!0,n=s,r=o;break}if(a===r){l=!0,r=s,n=o;break}a=a.sibling}if(!l)throw Error(_(189))}}if(n.alternate!==r)throw Error(_(190))}if(n.tag!==3)throw Error(_(188));return n.stateNode.current===n?e:t}function Lu(e){return e=L0(e),e!==null?Tu(e):null}function Tu(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Tu(e);if(t!==null)return t;e=e.sibling}return null}var Ju=xt.unstable_scheduleCallback,Tc=xt.unstable_cancelCallback,T0=xt.unstable_shouldYield,J0=xt.unstable_requestPaint,Re=xt.unstable_now,F0=xt.unstable_getCurrentPriorityLevel,Ma=xt.unstable_ImmediatePriority,Fu=xt.unstable_UserBlockingPriority,Js=xt.unstable_NormalPriority,_0=xt.unstable_LowPriority,_u=xt.unstable_IdlePriority,fi=null,Kt=null;function z0(e){if(Kt&&typeof Kt.onCommitFiberRoot=="function")try{Kt.onCommitFiberRoot(fi,e,void 0,(e.current.flags&128)===128)}catch{}}var Jt=Math.clz32?Math.clz32:B0,H0=Math.log,$0=Math.LN2;function B0(e){return e>>>=0,e===0?32:31-(H0(e)/$0|0)|0}var Zo=64,es=4194304;function eo(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Fs(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,s=e.pingedLanes,l=n&268435455;if(l!==0){var a=l&~o;a!==0?r=eo(a):(s&=l,s!==0&&(r=eo(s)))}else l=n&~o,l!==0?r=eo(l):s!==0&&(r=eo(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&o)&&(o=r&-r,s=t&-t,o>=s||o===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Jt(t),o=1<<n,r|=e[n],t&=~o;return r}function U0(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function W0(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes;0<s;){var l=31-Jt(s),a=1<<l,c=o[l];c===-1?(!(a&n)||a&r)&&(o[l]=U0(a,t)):c<=t&&(e.expiredLanes|=a),s&=~a}}function Fl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function zu(){var e=Zo;return Zo<<=1,!(Zo&4194240)&&(Zo=64),e}function Ki(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function _o(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Jt(t),e[t]=n}function V0(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-Jt(n),s=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~s}}function Da(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Jt(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var xe=0;function Hu(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var $u,Ra,Bu,Uu,Wu,_l=!1,ts=[],kn=null,jn=null,wn=null,yo=new Map,bo=new Map,xn=[],K0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Jc(e,t){switch(e){case"focusin":case"focusout":kn=null;break;case"dragenter":case"dragleave":jn=null;break;case"mouseover":case"mouseout":wn=null;break;case"pointerover":case"pointerout":yo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":bo.delete(t.pointerId)}}function Ur(e,t,n,r,o,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[o]},t!==null&&(t=Ho(t),t!==null&&Ra(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function Q0(e,t,n,r,o){switch(t){case"focusin":return kn=Ur(kn,e,t,n,r,o),!0;case"dragenter":return jn=Ur(jn,e,t,n,r,o),!0;case"mouseover":return wn=Ur(wn,e,t,n,r,o),!0;case"pointerover":var s=o.pointerId;return yo.set(s,Ur(yo.get(s)||null,e,t,n,r,o)),!0;case"gotpointercapture":return s=o.pointerId,bo.set(s,Ur(bo.get(s)||null,e,t,n,r,o)),!0}return!1}function Vu(e){var t=Jn(e.target);if(t!==null){var n=Yn(t);if(n!==null){if(t=n.tag,t===13){if(t=Au(n),t!==null){e.blockedOn=t,Wu(e.priority,function(){Bu(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ks(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=zl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Al=r,n.target.dispatchEvent(r),Al=null}else return t=Ho(n),t!==null&&Ra(t),e.blockedOn=n,!1;t.shift()}return!0}function Fc(e,t,n){ks(e)&&n.delete(t)}function Y0(){_l=!1,kn!==null&&ks(kn)&&(kn=null),jn!==null&&ks(jn)&&(jn=null),wn!==null&&ks(wn)&&(wn=null),yo.forEach(Fc),bo.forEach(Fc)}function Wr(e,t){e.blockedOn===t&&(e.blockedOn=null,_l||(_l=!0,xt.unstable_scheduleCallback(xt.unstable_NormalPriority,Y0)))}function ko(e){function t(o){return Wr(o,e)}if(0<ts.length){Wr(ts[0],e);for(var n=1;n<ts.length;n++){var r=ts[n];r.blockedOn===e&&(r.blockedOn=null)}}for(kn!==null&&Wr(kn,e),jn!==null&&Wr(jn,e),wn!==null&&Wr(wn,e),yo.forEach(t),bo.forEach(t),n=0;n<xn.length;n++)r=xn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<xn.length&&(n=xn[0],n.blockedOn===null);)Vu(n),n.blockedOn===null&&xn.shift()}var gr=ln.ReactCurrentBatchConfig,_s=!0;function G0(e,t,n,r){var o=xe,s=gr.transition;gr.transition=null;try{xe=1,Aa(e,t,n,r)}finally{xe=o,gr.transition=s}}function X0(e,t,n,r){var o=xe,s=gr.transition;gr.transition=null;try{xe=4,Aa(e,t,n,r)}finally{xe=o,gr.transition=s}}function Aa(e,t,n,r){if(_s){var o=zl(e,t,n,r);if(o===null)rl(e,t,r,zs,n),Jc(e,r);else if(Q0(o,e,t,n,r))r.stopPropagation();else if(Jc(e,r),t&4&&-1<K0.indexOf(e)){for(;o!==null;){var s=Ho(o);if(s!==null&&$u(s),s=zl(e,t,n,r),s===null&&rl(e,t,r,zs,n),s===o)break;o=s}o!==null&&r.stopPropagation()}else rl(e,t,r,null,n)}}var zs=null;function zl(e,t,n,r){if(zs=null,e=Oa(r),e=Jn(e),e!==null)if(t=Yn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Au(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return zs=e,null}function Ku(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(F0()){case Ma:return 1;case Fu:return 4;case Js:case _0:return 16;case _u:return 536870912;default:return 16}default:return 16}}var yn=null,La=null,js=null;function Qu(){if(js)return js;var e,t=La,n=t.length,r,o="value"in yn?yn.value:yn.textContent,s=o.length;for(e=0;e<n&&t[e]===o[e];e++);var l=n-e;for(r=1;r<=l&&t[n-r]===o[s-r];r++);return js=o.slice(e,1<r?1-r:void 0)}function ws(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ns(){return!0}function _c(){return!1}function yt(e){function t(n,r,o,s,l){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=s,this.target=l,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ns:_c,this.isPropagationStopped=_c,this}return Ee(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ns)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ns)},persist:function(){},isPersistent:ns}),t}var Or={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ta=yt(Or),zo=Ee({},Or,{view:0,detail:0}),q0=yt(zo),Qi,Yi,Vr,pi=Ee({},zo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ja,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Vr&&(Vr&&e.type==="mousemove"?(Qi=e.screenX-Vr.screenX,Yi=e.screenY-Vr.screenY):Yi=Qi=0,Vr=e),Qi)},movementY:function(e){return"movementY"in e?e.movementY:Yi}}),zc=yt(pi),Z0=Ee({},pi,{dataTransfer:0}),em=yt(Z0),tm=Ee({},zo,{relatedTarget:0}),Gi=yt(tm),nm=Ee({},Or,{animationName:0,elapsedTime:0,pseudoElement:0}),rm=yt(nm),om=Ee({},Or,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),sm=yt(om),im=Ee({},Or,{data:0}),Hc=yt(im),lm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},am={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=cm[e])?!!t[e]:!1}function Ja(){return dm}var um=Ee({},zo,{key:function(e){if(e.key){var t=lm[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ws(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?am[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ja,charCode:function(e){return e.type==="keypress"?ws(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ws(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),fm=yt(um),pm=Ee({},pi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$c=yt(pm),mm=Ee({},zo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ja}),hm=yt(mm),gm=Ee({},Or,{propertyName:0,elapsedTime:0,pseudoElement:0}),xm=yt(gm),vm=Ee({},pi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ym=yt(vm),bm=[9,13,27,32],Fa=nn&&"CompositionEvent"in window,oo=null;nn&&"documentMode"in document&&(oo=document.documentMode);var km=nn&&"TextEvent"in window&&!oo,Yu=nn&&(!Fa||oo&&8<oo&&11>=oo),Bc=" ",Uc=!1;function Gu(e,t){switch(e){case"keyup":return bm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var nr=!1;function jm(e,t){switch(e){case"compositionend":return Xu(t);case"keypress":return t.which!==32?null:(Uc=!0,Bc);case"textInput":return e=t.data,e===Bc&&Uc?null:e;default:return null}}function wm(e,t){if(nr)return e==="compositionend"||!Fa&&Gu(e,t)?(e=Qu(),js=La=yn=null,nr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Yu&&t.locale!=="ko"?null:t.data;default:return null}}var Sm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Sm[e.type]:t==="textarea"}function qu(e,t,n,r){Pu(r),t=Hs(t,"onChange"),0<t.length&&(n=new Ta("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var so=null,jo=null;function Cm(e){df(e,0)}function mi(e){var t=sr(e);if(ju(t))return e}function Nm(e,t){if(e==="change")return t}var Zu=!1;if(nn){var Xi;if(nn){var qi="oninput"in document;if(!qi){var Vc=document.createElement("div");Vc.setAttribute("oninput","return;"),qi=typeof Vc.oninput=="function"}Xi=qi}else Xi=!1;Zu=Xi&&(!document.documentMode||9<document.documentMode)}function Kc(){so&&(so.detachEvent("onpropertychange",ef),jo=so=null)}function ef(e){if(e.propertyName==="value"&&mi(jo)){var t=[];qu(t,jo,e,Oa(e)),Ru(Cm,t)}}function Im(e,t,n){e==="focusin"?(Kc(),so=t,jo=n,so.attachEvent("onpropertychange",ef)):e==="focusout"&&Kc()}function Em(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return mi(jo)}function Pm(e,t){if(e==="click")return mi(t)}function Om(e,t){if(e==="input"||e==="change")return mi(t)}function Mm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var _t=typeof Object.is=="function"?Object.is:Mm;function wo(e,t){if(_t(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!jl.call(t,o)||!_t(e[o],t[o]))return!1}return!0}function Qc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Yc(e,t){var n=Qc(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Qc(n)}}function tf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?tf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function nf(){for(var e=window,t=As();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=As(e.document)}return t}function _a(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Dm(e){var t=nf(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&tf(n.ownerDocument.documentElement,n)){if(r!==null&&_a(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,s=Math.min(r.start,o);r=r.end===void 0?s:Math.min(r.end,o),!e.extend&&s>r&&(o=r,r=s,s=o),o=Yc(n,s);var l=Yc(n,r);o&&l&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Rm=nn&&"documentMode"in document&&11>=document.documentMode,rr=null,Hl=null,io=null,$l=!1;function Gc(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;$l||rr==null||rr!==As(r)||(r=rr,"selectionStart"in r&&_a(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),io&&wo(io,r)||(io=r,r=Hs(Hl,"onSelect"),0<r.length&&(t=new Ta("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rr)))}function rs(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var or={animationend:rs("Animation","AnimationEnd"),animationiteration:rs("Animation","AnimationIteration"),animationstart:rs("Animation","AnimationStart"),transitionend:rs("Transition","TransitionEnd")},Zi={},rf={};nn&&(rf=document.createElement("div").style,"AnimationEvent"in window||(delete or.animationend.animation,delete or.animationiteration.animation,delete or.animationstart.animation),"TransitionEvent"in window||delete or.transitionend.transition);function hi(e){if(Zi[e])return Zi[e];if(!or[e])return e;var t=or[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in rf)return Zi[e]=t[n];return e}var of=hi("animationend"),sf=hi("animationiteration"),lf=hi("animationstart"),af=hi("transitionend"),cf=new Map,Xc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dn(e,t){cf.set(e,t),Qn(t,[e])}for(var el=0;el<Xc.length;el++){var tl=Xc[el],Am=tl.toLowerCase(),Lm=tl[0].toUpperCase()+tl.slice(1);Dn(Am,"on"+Lm)}Dn(of,"onAnimationEnd");Dn(sf,"onAnimationIteration");Dn(lf,"onAnimationStart");Dn("dblclick","onDoubleClick");Dn("focusin","onFocus");Dn("focusout","onBlur");Dn(af,"onTransitionEnd");br("onMouseEnter",["mouseout","mouseover"]);br("onMouseLeave",["mouseout","mouseover"]);br("onPointerEnter",["pointerout","pointerover"]);br("onPointerLeave",["pointerout","pointerover"]);Qn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Qn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Qn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Qn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Qn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Qn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var to="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tm=new Set("cancel close invalid load scroll toggle".split(" ").concat(to));function qc(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,A0(r,t,void 0,e),e.currentTarget=null}function df(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var l=r.length-1;0<=l;l--){var a=r[l],c=a.instance,d=a.currentTarget;if(a=a.listener,c!==s&&o.isPropagationStopped())break e;qc(o,a,d),s=c}else for(l=0;l<r.length;l++){if(a=r[l],c=a.instance,d=a.currentTarget,a=a.listener,c!==s&&o.isPropagationStopped())break e;qc(o,a,d),s=c}}}if(Ts)throw e=Jl,Ts=!1,Jl=null,e}function je(e,t){var n=t[Kl];n===void 0&&(n=t[Kl]=new Set);var r=e+"__bubble";n.has(r)||(uf(t,e,2,!1),n.add(r))}function nl(e,t,n){var r=0;t&&(r|=4),uf(n,e,r,t)}var os="_reactListening"+Math.random().toString(36).slice(2);function So(e){if(!e[os]){e[os]=!0,xu.forEach(function(n){n!=="selectionchange"&&(Tm.has(n)||nl(n,!1,e),nl(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[os]||(t[os]=!0,nl("selectionchange",!1,t))}}function uf(e,t,n,r){switch(Ku(t)){case 1:var o=G0;break;case 4:o=X0;break;default:o=Aa}n=o.bind(null,t,n,e),o=void 0,!Tl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function rl(e,t,n,r,o){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var a=r.stateNode.containerInfo;if(a===o||a.nodeType===8&&a.parentNode===o)break;if(l===4)for(l=r.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===o||c.nodeType===8&&c.parentNode===o))return;l=l.return}for(;a!==null;){if(l=Jn(a),l===null)return;if(c=l.tag,c===5||c===6){r=s=l;continue e}a=a.parentNode}}r=r.return}Ru(function(){var d=s,p=Oa(n),u=[];e:{var f=cf.get(e);if(f!==void 0){var h=Ta,y=e;switch(e){case"keypress":if(ws(n)===0)break e;case"keydown":case"keyup":h=fm;break;case"focusin":y="focus",h=Gi;break;case"focusout":y="blur",h=Gi;break;case"beforeblur":case"afterblur":h=Gi;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=zc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=em;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=hm;break;case of:case sf:case lf:h=rm;break;case af:h=xm;break;case"scroll":h=q0;break;case"wheel":h=ym;break;case"copy":case"cut":case"paste":h=sm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=$c}var b=(t&4)!==0,k=!b&&e==="scroll",x=b?f!==null?f+"Capture":null:f;b=[];for(var m=d,g;m!==null;){g=m;var S=g.stateNode;if(g.tag===5&&S!==null&&(g=S,x!==null&&(S=vo(m,x),S!=null&&b.push(Co(m,S,g)))),k)break;m=m.return}0<b.length&&(f=new h(f,y,null,n,p),u.push({event:f,listeners:b}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",f&&n!==Al&&(y=n.relatedTarget||n.fromElement)&&(Jn(y)||y[rn]))break e;if((h||f)&&(f=p.window===p?p:(f=p.ownerDocument)?f.defaultView||f.parentWindow:window,h?(y=n.relatedTarget||n.toElement,h=d,y=y?Jn(y):null,y!==null&&(k=Yn(y),y!==k||y.tag!==5&&y.tag!==6)&&(y=null)):(h=null,y=d),h!==y)){if(b=zc,S="onMouseLeave",x="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(b=$c,S="onPointerLeave",x="onPointerEnter",m="pointer"),k=h==null?f:sr(h),g=y==null?f:sr(y),f=new b(S,m+"leave",h,n,p),f.target=k,f.relatedTarget=g,S=null,Jn(p)===d&&(b=new b(x,m+"enter",y,n,p),b.target=g,b.relatedTarget=k,S=b),k=S,h&&y)t:{for(b=h,x=y,m=0,g=b;g;g=Zn(g))m++;for(g=0,S=x;S;S=Zn(S))g++;for(;0<m-g;)b=Zn(b),m--;for(;0<g-m;)x=Zn(x),g--;for(;m--;){if(b===x||x!==null&&b===x.alternate)break t;b=Zn(b),x=Zn(x)}b=null}else b=null;h!==null&&Zc(u,f,h,b,!1),y!==null&&k!==null&&Zc(u,k,y,b,!0)}}e:{if(f=d?sr(d):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var I=Nm;else if(Wc(f))if(Zu)I=Om;else{I=Em;var E=Im}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(I=Pm);if(I&&(I=I(e,d))){qu(u,I,n,p);break e}E&&E(e,f,d),e==="focusout"&&(E=f._wrapperState)&&E.controlled&&f.type==="number"&&Pl(f,"number",f.value)}switch(E=d?sr(d):window,e){case"focusin":(Wc(E)||E.contentEditable==="true")&&(rr=E,Hl=d,io=null);break;case"focusout":io=Hl=rr=null;break;case"mousedown":$l=!0;break;case"contextmenu":case"mouseup":case"dragend":$l=!1,Gc(u,n,p);break;case"selectionchange":if(Rm)break;case"keydown":case"keyup":Gc(u,n,p)}var j;if(Fa)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else nr?Gu(e,n)&&(A="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(Yu&&n.locale!=="ko"&&(nr||A!=="onCompositionStart"?A==="onCompositionEnd"&&nr&&(j=Qu()):(yn=p,La="value"in yn?yn.value:yn.textContent,nr=!0)),E=Hs(d,A),0<E.length&&(A=new Hc(A,e,null,n,p),u.push({event:A,listeners:E}),j?A.data=j:(j=Xu(n),j!==null&&(A.data=j)))),(j=km?jm(e,n):wm(e,n))&&(d=Hs(d,"onBeforeInput"),0<d.length&&(p=new Hc("onBeforeInput","beforeinput",null,n,p),u.push({event:p,listeners:d}),p.data=j))}df(u,t)})}function Co(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hs(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,s=o.stateNode;o.tag===5&&s!==null&&(o=s,s=vo(e,n),s!=null&&r.unshift(Co(e,s,o)),s=vo(e,t),s!=null&&r.push(Co(e,s,o))),e=e.return}return r}function Zn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Zc(e,t,n,r,o){for(var s=t._reactName,l=[];n!==null&&n!==r;){var a=n,c=a.alternate,d=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&d!==null&&(a=d,o?(c=vo(n,s),c!=null&&l.unshift(Co(n,c,a))):o||(c=vo(n,s),c!=null&&l.push(Co(n,c,a)))),n=n.return}l.length!==0&&e.push({event:t,listeners:l})}var Jm=/\r\n?/g,Fm=/\u0000|\uFFFD/g;function ed(e){return(typeof e=="string"?e:""+e).replace(Jm,`
`).replace(Fm,"")}function ss(e,t,n){if(t=ed(t),ed(e)!==t&&n)throw Error(_(425))}function $s(){}var Bl=null,Ul=null;function Wl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Vl=typeof setTimeout=="function"?setTimeout:void 0,_m=typeof clearTimeout=="function"?clearTimeout:void 0,td=typeof Promise=="function"?Promise:void 0,zm=typeof queueMicrotask=="function"?queueMicrotask:typeof td<"u"?function(e){return td.resolve(null).then(e).catch(Hm)}:Vl;function Hm(e){setTimeout(function(){throw e})}function ol(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){e.removeChild(o),ko(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);ko(t)}function Sn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function nd(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Mr=Math.random().toString(36).slice(2),Vt="__reactFiber$"+Mr,No="__reactProps$"+Mr,rn="__reactContainer$"+Mr,Kl="__reactEvents$"+Mr,$m="__reactListeners$"+Mr,Bm="__reactHandles$"+Mr;function Jn(e){var t=e[Vt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[rn]||n[Vt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=nd(e);e!==null;){if(n=e[Vt])return n;e=nd(e)}return t}e=n,n=e.parentNode}return null}function Ho(e){return e=e[Vt]||e[rn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function sr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(_(33))}function gi(e){return e[No]||null}var Ql=[],ir=-1;function Rn(e){return{current:e}}function we(e){0>ir||(e.current=Ql[ir],Ql[ir]=null,ir--)}function be(e,t){ir++,Ql[ir]=e.current,e.current=t}var On={},Ze=Rn(On),at=Rn(!1),Bn=On;function kr(e,t){var n=e.type.contextTypes;if(!n)return On;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},s;for(s in n)o[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function ct(e){return e=e.childContextTypes,e!=null}function Bs(){we(at),we(Ze)}function rd(e,t,n){if(Ze.current!==On)throw Error(_(168));be(Ze,t),be(at,n)}function ff(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(_(108,I0(e)||"Unknown",o));return Ee({},n,r)}function Us(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||On,Bn=Ze.current,be(Ze,e),be(at,at.current),!0}function od(e,t,n){var r=e.stateNode;if(!r)throw Error(_(169));n?(e=ff(e,t,Bn),r.__reactInternalMemoizedMergedChildContext=e,we(at),we(Ze),be(Ze,e)):we(at),be(at,n)}var qt=null,xi=!1,sl=!1;function pf(e){qt===null?qt=[e]:qt.push(e)}function Um(e){xi=!0,pf(e)}function An(){if(!sl&&qt!==null){sl=!0;var e=0,t=xe;try{var n=qt;for(xe=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}qt=null,xi=!1}catch(o){throw qt!==null&&(qt=qt.slice(e+1)),Ju(Ma,An),o}finally{xe=t,sl=!1}}return null}var lr=[],ar=0,Ws=null,Vs=0,St=[],Ct=0,Un=null,Zt=1,en="";function Ln(e,t){lr[ar++]=Vs,lr[ar++]=Ws,Ws=e,Vs=t}function mf(e,t,n){St[Ct++]=Zt,St[Ct++]=en,St[Ct++]=Un,Un=e;var r=Zt;e=en;var o=32-Jt(r)-1;r&=~(1<<o),n+=1;var s=32-Jt(t)+o;if(30<s){var l=o-o%5;s=(r&(1<<l)-1).toString(32),r>>=l,o-=l,Zt=1<<32-Jt(t)+o|n<<o|r,en=s+e}else Zt=1<<s|n<<o|r,en=e}function za(e){e.return!==null&&(Ln(e,1),mf(e,1,0))}function Ha(e){for(;e===Ws;)Ws=lr[--ar],lr[ar]=null,Vs=lr[--ar],lr[ar]=null;for(;e===Un;)Un=St[--Ct],St[Ct]=null,en=St[--Ct],St[Ct]=null,Zt=St[--Ct],St[Ct]=null}var gt=null,ht=null,Se=!1,Lt=null;function hf(e,t){var n=Nt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function sd(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,gt=e,ht=Sn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,gt=e,ht=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Un!==null?{id:Zt,overflow:en}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Nt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,gt=e,ht=null,!0):!1;default:return!1}}function Yl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Gl(e){if(Se){var t=ht;if(t){var n=t;if(!sd(e,t)){if(Yl(e))throw Error(_(418));t=Sn(n.nextSibling);var r=gt;t&&sd(e,t)?hf(r,n):(e.flags=e.flags&-4097|2,Se=!1,gt=e)}}else{if(Yl(e))throw Error(_(418));e.flags=e.flags&-4097|2,Se=!1,gt=e}}}function id(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;gt=e}function is(e){if(e!==gt)return!1;if(!Se)return id(e),Se=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Wl(e.type,e.memoizedProps)),t&&(t=ht)){if(Yl(e))throw gf(),Error(_(418));for(;t;)hf(e,t),t=Sn(t.nextSibling)}if(id(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(_(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){ht=Sn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}ht=null}}else ht=gt?Sn(e.stateNode.nextSibling):null;return!0}function gf(){for(var e=ht;e;)e=Sn(e.nextSibling)}function jr(){ht=gt=null,Se=!1}function $a(e){Lt===null?Lt=[e]:Lt.push(e)}var Wm=ln.ReactCurrentBatchConfig;function Kr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(_(309));var r=n.stateNode}if(!r)throw Error(_(147,e));var o=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(l){var a=o.refs;l===null?delete a[s]:a[s]=l},t._stringRef=s,t)}if(typeof e!="string")throw Error(_(284));if(!n._owner)throw Error(_(290,e))}return e}function ls(e,t){throw e=Object.prototype.toString.call(t),Error(_(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ld(e){var t=e._init;return t(e._payload)}function xf(e){function t(x,m){if(e){var g=x.deletions;g===null?(x.deletions=[m],x.flags|=16):g.push(m)}}function n(x,m){if(!e)return null;for(;m!==null;)t(x,m),m=m.sibling;return null}function r(x,m){for(x=new Map;m!==null;)m.key!==null?x.set(m.key,m):x.set(m.index,m),m=m.sibling;return x}function o(x,m){return x=En(x,m),x.index=0,x.sibling=null,x}function s(x,m,g){return x.index=g,e?(g=x.alternate,g!==null?(g=g.index,g<m?(x.flags|=2,m):g):(x.flags|=2,m)):(x.flags|=1048576,m)}function l(x){return e&&x.alternate===null&&(x.flags|=2),x}function a(x,m,g,S){return m===null||m.tag!==6?(m=fl(g,x.mode,S),m.return=x,m):(m=o(m,g),m.return=x,m)}function c(x,m,g,S){var I=g.type;return I===tr?p(x,m,g.props.children,S,g.key):m!==null&&(m.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===mn&&ld(I)===m.type)?(S=o(m,g.props),S.ref=Kr(x,m,g),S.return=x,S):(S=Os(g.type,g.key,g.props,null,x.mode,S),S.ref=Kr(x,m,g),S.return=x,S)}function d(x,m,g,S){return m===null||m.tag!==4||m.stateNode.containerInfo!==g.containerInfo||m.stateNode.implementation!==g.implementation?(m=pl(g,x.mode,S),m.return=x,m):(m=o(m,g.children||[]),m.return=x,m)}function p(x,m,g,S,I){return m===null||m.tag!==7?(m=Hn(g,x.mode,S,I),m.return=x,m):(m=o(m,g),m.return=x,m)}function u(x,m,g){if(typeof m=="string"&&m!==""||typeof m=="number")return m=fl(""+m,x.mode,g),m.return=x,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Go:return g=Os(m.type,m.key,m.props,null,x.mode,g),g.ref=Kr(x,null,m),g.return=x,g;case er:return m=pl(m,x.mode,g),m.return=x,m;case mn:var S=m._init;return u(x,S(m._payload),g)}if(Zr(m)||$r(m))return m=Hn(m,x.mode,g,null),m.return=x,m;ls(x,m)}return null}function f(x,m,g,S){var I=m!==null?m.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return I!==null?null:a(x,m,""+g,S);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Go:return g.key===I?c(x,m,g,S):null;case er:return g.key===I?d(x,m,g,S):null;case mn:return I=g._init,f(x,m,I(g._payload),S)}if(Zr(g)||$r(g))return I!==null?null:p(x,m,g,S,null);ls(x,g)}return null}function h(x,m,g,S,I){if(typeof S=="string"&&S!==""||typeof S=="number")return x=x.get(g)||null,a(m,x,""+S,I);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Go:return x=x.get(S.key===null?g:S.key)||null,c(m,x,S,I);case er:return x=x.get(S.key===null?g:S.key)||null,d(m,x,S,I);case mn:var E=S._init;return h(x,m,g,E(S._payload),I)}if(Zr(S)||$r(S))return x=x.get(g)||null,p(m,x,S,I,null);ls(m,S)}return null}function y(x,m,g,S){for(var I=null,E=null,j=m,A=m=0,J=null;j!==null&&A<g.length;A++){j.index>A?(J=j,j=null):J=j.sibling;var w=f(x,j,g[A],S);if(w===null){j===null&&(j=J);break}e&&j&&w.alternate===null&&t(x,j),m=s(w,m,A),E===null?I=w:E.sibling=w,E=w,j=J}if(A===g.length)return n(x,j),Se&&Ln(x,A),I;if(j===null){for(;A<g.length;A++)j=u(x,g[A],S),j!==null&&(m=s(j,m,A),E===null?I=j:E.sibling=j,E=j);return Se&&Ln(x,A),I}for(j=r(x,j);A<g.length;A++)J=h(j,x,A,g[A],S),J!==null&&(e&&J.alternate!==null&&j.delete(J.key===null?A:J.key),m=s(J,m,A),E===null?I=J:E.sibling=J,E=J);return e&&j.forEach(function(R){return t(x,R)}),Se&&Ln(x,A),I}function b(x,m,g,S){var I=$r(g);if(typeof I!="function")throw Error(_(150));if(g=I.call(g),g==null)throw Error(_(151));for(var E=I=null,j=m,A=m=0,J=null,w=g.next();j!==null&&!w.done;A++,w=g.next()){j.index>A?(J=j,j=null):J=j.sibling;var R=f(x,j,w.value,S);if(R===null){j===null&&(j=J);break}e&&j&&R.alternate===null&&t(x,j),m=s(R,m,A),E===null?I=R:E.sibling=R,E=R,j=J}if(w.done)return n(x,j),Se&&Ln(x,A),I;if(j===null){for(;!w.done;A++,w=g.next())w=u(x,w.value,S),w!==null&&(m=s(w,m,A),E===null?I=w:E.sibling=w,E=w);return Se&&Ln(x,A),I}for(j=r(x,j);!w.done;A++,w=g.next())w=h(j,x,A,w.value,S),w!==null&&(e&&w.alternate!==null&&j.delete(w.key===null?A:w.key),m=s(w,m,A),E===null?I=w:E.sibling=w,E=w);return e&&j.forEach(function(U){return t(x,U)}),Se&&Ln(x,A),I}function k(x,m,g,S){if(typeof g=="object"&&g!==null&&g.type===tr&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case Go:e:{for(var I=g.key,E=m;E!==null;){if(E.key===I){if(I=g.type,I===tr){if(E.tag===7){n(x,E.sibling),m=o(E,g.props.children),m.return=x,x=m;break e}}else if(E.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===mn&&ld(I)===E.type){n(x,E.sibling),m=o(E,g.props),m.ref=Kr(x,E,g),m.return=x,x=m;break e}n(x,E);break}else t(x,E);E=E.sibling}g.type===tr?(m=Hn(g.props.children,x.mode,S,g.key),m.return=x,x=m):(S=Os(g.type,g.key,g.props,null,x.mode,S),S.ref=Kr(x,m,g),S.return=x,x=S)}return l(x);case er:e:{for(E=g.key;m!==null;){if(m.key===E)if(m.tag===4&&m.stateNode.containerInfo===g.containerInfo&&m.stateNode.implementation===g.implementation){n(x,m.sibling),m=o(m,g.children||[]),m.return=x,x=m;break e}else{n(x,m);break}else t(x,m);m=m.sibling}m=pl(g,x.mode,S),m.return=x,x=m}return l(x);case mn:return E=g._init,k(x,m,E(g._payload),S)}if(Zr(g))return y(x,m,g,S);if($r(g))return b(x,m,g,S);ls(x,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,m!==null&&m.tag===6?(n(x,m.sibling),m=o(m,g),m.return=x,x=m):(n(x,m),m=fl(g,x.mode,S),m.return=x,x=m),l(x)):n(x,m)}return k}var wr=xf(!0),vf=xf(!1),Ks=Rn(null),Qs=null,cr=null,Ba=null;function Ua(){Ba=cr=Qs=null}function Wa(e){var t=Ks.current;we(Ks),e._currentValue=t}function Xl(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function xr(e,t){Qs=e,Ba=cr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(lt=!0),e.firstContext=null)}function Et(e){var t=e._currentValue;if(Ba!==e)if(e={context:e,memoizedValue:t,next:null},cr===null){if(Qs===null)throw Error(_(308));cr=e,Qs.dependencies={lanes:0,firstContext:e}}else cr=cr.next=e;return t}var Fn=null;function Va(e){Fn===null?Fn=[e]:Fn.push(e)}function yf(e,t,n,r){var o=t.interleaved;return o===null?(n.next=n,Va(t)):(n.next=o.next,o.next=n),t.interleaved=n,on(e,r)}function on(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var hn=!1;function Ka(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function tn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Cn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,he&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,on(e,n)}return o=r.interleaved,o===null?(t.next=t,Va(r)):(t.next=o.next,o.next=t),r.interleaved=t,on(e,n)}function Ss(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Da(e,n)}}function ad(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?o=s=l:s=s.next=l,n=n.next}while(n!==null);s===null?o=s=t:s=s.next=t}else o=s=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ys(e,t,n,r){var o=e.updateQueue;hn=!1;var s=o.firstBaseUpdate,l=o.lastBaseUpdate,a=o.shared.pending;if(a!==null){o.shared.pending=null;var c=a,d=c.next;c.next=null,l===null?s=d:l.next=d,l=c;var p=e.alternate;p!==null&&(p=p.updateQueue,a=p.lastBaseUpdate,a!==l&&(a===null?p.firstBaseUpdate=d:a.next=d,p.lastBaseUpdate=c))}if(s!==null){var u=o.baseState;l=0,p=d=c=null,a=s;do{var f=a.lane,h=a.eventTime;if((r&f)===f){p!==null&&(p=p.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=e,b=a;switch(f=t,h=n,b.tag){case 1:if(y=b.payload,typeof y=="function"){u=y.call(h,u,f);break e}u=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=b.payload,f=typeof y=="function"?y.call(h,u,f):y,f==null)break e;u=Ee({},u,f);break e;case 2:hn=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,f=o.effects,f===null?o.effects=[a]:f.push(a))}else h={eventTime:h,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},p===null?(d=p=h,c=u):p=p.next=h,l|=f;if(a=a.next,a===null){if(a=o.shared.pending,a===null)break;f=a,a=f.next,f.next=null,o.lastBaseUpdate=f,o.shared.pending=null}}while(!0);if(p===null&&(c=u),o.baseState=c,o.firstBaseUpdate=d,o.lastBaseUpdate=p,t=o.shared.interleaved,t!==null){o=t;do l|=o.lane,o=o.next;while(o!==t)}else s===null&&(o.shared.lanes=0);Vn|=l,e.lanes=l,e.memoizedState=u}}function cd(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(_(191,o));o.call(r)}}}var $o={},Qt=Rn($o),Io=Rn($o),Eo=Rn($o);function _n(e){if(e===$o)throw Error(_(174));return e}function Qa(e,t){switch(be(Eo,t),be(Io,e),be(Qt,$o),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ml(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ml(t,e)}we(Qt),be(Qt,t)}function Sr(){we(Qt),we(Io),we(Eo)}function kf(e){_n(Eo.current);var t=_n(Qt.current),n=Ml(t,e.type);t!==n&&(be(Io,e),be(Qt,n))}function Ya(e){Io.current===e&&(we(Qt),we(Io))}var Ne=Rn(0);function Gs(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var il=[];function Ga(){for(var e=0;e<il.length;e++)il[e]._workInProgressVersionPrimary=null;il.length=0}var Cs=ln.ReactCurrentDispatcher,ll=ln.ReactCurrentBatchConfig,Wn=0,Ie=null,Je=null,He=null,Xs=!1,lo=!1,Po=0,Vm=0;function Ge(){throw Error(_(321))}function Xa(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!_t(e[n],t[n]))return!1;return!0}function qa(e,t,n,r,o,s){if(Wn=s,Ie=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Cs.current=e===null||e.memoizedState===null?Gm:Xm,e=n(r,o),lo){s=0;do{if(lo=!1,Po=0,25<=s)throw Error(_(301));s+=1,He=Je=null,t.updateQueue=null,Cs.current=qm,e=n(r,o)}while(lo)}if(Cs.current=qs,t=Je!==null&&Je.next!==null,Wn=0,He=Je=Ie=null,Xs=!1,t)throw Error(_(300));return e}function Za(){var e=Po!==0;return Po=0,e}function Wt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return He===null?Ie.memoizedState=He=e:He=He.next=e,He}function Pt(){if(Je===null){var e=Ie.alternate;e=e!==null?e.memoizedState:null}else e=Je.next;var t=He===null?Ie.memoizedState:He.next;if(t!==null)He=t,Je=e;else{if(e===null)throw Error(_(310));Je=e,e={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},He===null?Ie.memoizedState=He=e:He=He.next=e}return He}function Oo(e,t){return typeof t=="function"?t(e):t}function al(e){var t=Pt(),n=t.queue;if(n===null)throw Error(_(311));n.lastRenderedReducer=e;var r=Je,o=r.baseQueue,s=n.pending;if(s!==null){if(o!==null){var l=o.next;o.next=s.next,s.next=l}r.baseQueue=o=s,n.pending=null}if(o!==null){s=o.next,r=r.baseState;var a=l=null,c=null,d=s;do{var p=d.lane;if((Wn&p)===p)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var u={lane:p,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(a=c=u,l=r):c=c.next=u,Ie.lanes|=p,Vn|=p}d=d.next}while(d!==null&&d!==s);c===null?l=r:c.next=a,_t(r,t.memoizedState)||(lt=!0),t.memoizedState=r,t.baseState=l,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do s=o.lane,Ie.lanes|=s,Vn|=s,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function cl(e){var t=Pt(),n=t.queue;if(n===null)throw Error(_(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,s=t.memoizedState;if(o!==null){n.pending=null;var l=o=o.next;do s=e(s,l.action),l=l.next;while(l!==o);_t(s,t.memoizedState)||(lt=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function jf(){}function wf(e,t){var n=Ie,r=Pt(),o=t(),s=!_t(r.memoizedState,o);if(s&&(r.memoizedState=o,lt=!0),r=r.queue,ec(Nf.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||He!==null&&He.memoizedState.tag&1){if(n.flags|=2048,Mo(9,Cf.bind(null,n,r,o,t),void 0,null),Be===null)throw Error(_(349));Wn&30||Sf(n,t,o)}return o}function Sf(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ie.updateQueue,t===null?(t={lastEffect:null,stores:null},Ie.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Cf(e,t,n,r){t.value=n,t.getSnapshot=r,If(t)&&Ef(e)}function Nf(e,t,n){return n(function(){If(t)&&Ef(e)})}function If(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!_t(e,n)}catch{return!0}}function Ef(e){var t=on(e,1);t!==null&&Ft(t,e,1,-1)}function dd(e){var t=Wt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Oo,lastRenderedState:e},t.queue=e,e=e.dispatch=Ym.bind(null,Ie,e),[t.memoizedState,e]}function Mo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ie.updateQueue,t===null?(t={lastEffect:null,stores:null},Ie.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Pf(){return Pt().memoizedState}function Ns(e,t,n,r){var o=Wt();Ie.flags|=e,o.memoizedState=Mo(1|t,n,void 0,r===void 0?null:r)}function vi(e,t,n,r){var o=Pt();r=r===void 0?null:r;var s=void 0;if(Je!==null){var l=Je.memoizedState;if(s=l.destroy,r!==null&&Xa(r,l.deps)){o.memoizedState=Mo(t,n,s,r);return}}Ie.flags|=e,o.memoizedState=Mo(1|t,n,s,r)}function ud(e,t){return Ns(8390656,8,e,t)}function ec(e,t){return vi(2048,8,e,t)}function Of(e,t){return vi(4,2,e,t)}function Mf(e,t){return vi(4,4,e,t)}function Df(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Rf(e,t,n){return n=n!=null?n.concat([e]):null,vi(4,4,Df.bind(null,t,e),n)}function tc(){}function Af(e,t){var n=Pt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Xa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Lf(e,t){var n=Pt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Xa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Tf(e,t,n){return Wn&21?(_t(n,t)||(n=zu(),Ie.lanes|=n,Vn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,lt=!0),e.memoizedState=n)}function Km(e,t){var n=xe;xe=n!==0&&4>n?n:4,e(!0);var r=ll.transition;ll.transition={};try{e(!1),t()}finally{xe=n,ll.transition=r}}function Jf(){return Pt().memoizedState}function Qm(e,t,n){var r=In(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ff(e))_f(t,n);else if(n=yf(e,t,n,r),n!==null){var o=nt();Ft(n,e,r,o),zf(n,t,r)}}function Ym(e,t,n){var r=In(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ff(e))_f(t,o);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var l=t.lastRenderedState,a=s(l,n);if(o.hasEagerState=!0,o.eagerState=a,_t(a,l)){var c=t.interleaved;c===null?(o.next=o,Va(t)):(o.next=c.next,c.next=o),t.interleaved=o;return}}catch{}finally{}n=yf(e,t,o,r),n!==null&&(o=nt(),Ft(n,e,r,o),zf(n,t,r))}}function Ff(e){var t=e.alternate;return e===Ie||t!==null&&t===Ie}function _f(e,t){lo=Xs=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function zf(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Da(e,n)}}var qs={readContext:Et,useCallback:Ge,useContext:Ge,useEffect:Ge,useImperativeHandle:Ge,useInsertionEffect:Ge,useLayoutEffect:Ge,useMemo:Ge,useReducer:Ge,useRef:Ge,useState:Ge,useDebugValue:Ge,useDeferredValue:Ge,useTransition:Ge,useMutableSource:Ge,useSyncExternalStore:Ge,useId:Ge,unstable_isNewReconciler:!1},Gm={readContext:Et,useCallback:function(e,t){return Wt().memoizedState=[e,t===void 0?null:t],e},useContext:Et,useEffect:ud,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Ns(4194308,4,Df.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ns(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ns(4,2,e,t)},useMemo:function(e,t){var n=Wt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Wt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Qm.bind(null,Ie,e),[r.memoizedState,e]},useRef:function(e){var t=Wt();return e={current:e},t.memoizedState=e},useState:dd,useDebugValue:tc,useDeferredValue:function(e){return Wt().memoizedState=e},useTransition:function(){var e=dd(!1),t=e[0];return e=Km.bind(null,e[1]),Wt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ie,o=Wt();if(Se){if(n===void 0)throw Error(_(407));n=n()}else{if(n=t(),Be===null)throw Error(_(349));Wn&30||Sf(r,t,n)}o.memoizedState=n;var s={value:n,getSnapshot:t};return o.queue=s,ud(Nf.bind(null,r,s,e),[e]),r.flags|=2048,Mo(9,Cf.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Wt(),t=Be.identifierPrefix;if(Se){var n=en,r=Zt;n=(r&~(1<<32-Jt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Po++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Vm++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Xm={readContext:Et,useCallback:Af,useContext:Et,useEffect:ec,useImperativeHandle:Rf,useInsertionEffect:Of,useLayoutEffect:Mf,useMemo:Lf,useReducer:al,useRef:Pf,useState:function(){return al(Oo)},useDebugValue:tc,useDeferredValue:function(e){var t=Pt();return Tf(t,Je.memoizedState,e)},useTransition:function(){var e=al(Oo)[0],t=Pt().memoizedState;return[e,t]},useMutableSource:jf,useSyncExternalStore:wf,useId:Jf,unstable_isNewReconciler:!1},qm={readContext:Et,useCallback:Af,useContext:Et,useEffect:ec,useImperativeHandle:Rf,useInsertionEffect:Of,useLayoutEffect:Mf,useMemo:Lf,useReducer:cl,useRef:Pf,useState:function(){return cl(Oo)},useDebugValue:tc,useDeferredValue:function(e){var t=Pt();return Je===null?t.memoizedState=e:Tf(t,Je.memoizedState,e)},useTransition:function(){var e=cl(Oo)[0],t=Pt().memoizedState;return[e,t]},useMutableSource:jf,useSyncExternalStore:wf,useId:Jf,unstable_isNewReconciler:!1};function Rt(e,t){if(e&&e.defaultProps){t=Ee({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function ql(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ee({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var yi={isMounted:function(e){return(e=e._reactInternals)?Yn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=nt(),o=In(e),s=tn(r,o);s.payload=t,n!=null&&(s.callback=n),t=Cn(e,s,o),t!==null&&(Ft(t,e,o,r),Ss(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=nt(),o=In(e),s=tn(r,o);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=Cn(e,s,o),t!==null&&(Ft(t,e,o,r),Ss(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=nt(),r=In(e),o=tn(n,r);o.tag=2,t!=null&&(o.callback=t),t=Cn(e,o,r),t!==null&&(Ft(t,e,r,n),Ss(t,e,r))}};function fd(e,t,n,r,o,s,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,l):t.prototype&&t.prototype.isPureReactComponent?!wo(n,r)||!wo(o,s):!0}function Hf(e,t,n){var r=!1,o=On,s=t.contextType;return typeof s=="object"&&s!==null?s=Et(s):(o=ct(t)?Bn:Ze.current,r=t.contextTypes,s=(r=r!=null)?kr(e,o):On),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=yi,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=s),t}function pd(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&yi.enqueueReplaceState(t,t.state,null)}function Zl(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},Ka(e);var s=t.contextType;typeof s=="object"&&s!==null?o.context=Et(s):(s=ct(t)?Bn:Ze.current,o.context=kr(e,s)),o.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(ql(e,t,s,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&yi.enqueueReplaceState(o,o.state,null),Ys(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function Cr(e,t){try{var n="",r=t;do n+=N0(r),r=r.return;while(r);var o=n}catch(s){o=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:o,digest:null}}function dl(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function ea(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Zm=typeof WeakMap=="function"?WeakMap:Map;function $f(e,t,n){n=tn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ei||(ei=!0,da=r),ea(e,t)},n}function Bf(e,t,n){n=tn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){ea(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){ea(e,t),typeof r!="function"&&(Nn===null?Nn=new Set([this]):Nn.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),n}function md(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Zm;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=ph.bind(null,e,t,n),t.then(e,e))}function hd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function gd(e,t,n,r,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=tn(-1,1),t.tag=2,Cn(n,t,1))),n.lanes|=1),e)}var eh=ln.ReactCurrentOwner,lt=!1;function tt(e,t,n,r){t.child=e===null?vf(t,null,n,r):wr(t,e.child,n,r)}function xd(e,t,n,r,o){n=n.render;var s=t.ref;return xr(t,o),r=qa(e,t,n,r,s,o),n=Za(),e!==null&&!lt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,sn(e,t,o)):(Se&&n&&za(t),t.flags|=1,tt(e,t,r,o),t.child)}function vd(e,t,n,r,o){if(e===null){var s=n.type;return typeof s=="function"&&!cc(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,Uf(e,t,s,r,o)):(e=Os(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&o)){var l=s.memoizedProps;if(n=n.compare,n=n!==null?n:wo,n(l,r)&&e.ref===t.ref)return sn(e,t,o)}return t.flags|=1,e=En(s,r),e.ref=t.ref,e.return=t,t.child=e}function Uf(e,t,n,r,o){if(e!==null){var s=e.memoizedProps;if(wo(s,r)&&e.ref===t.ref)if(lt=!1,t.pendingProps=r=s,(e.lanes&o)!==0)e.flags&131072&&(lt=!0);else return t.lanes=e.lanes,sn(e,t,o)}return ta(e,t,n,r,o)}function Wf(e,t,n){var r=t.pendingProps,o=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},be(ur,mt),mt|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,be(ur,mt),mt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,be(ur,mt),mt|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,be(ur,mt),mt|=r;return tt(e,t,o,n),t.child}function Vf(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ta(e,t,n,r,o){var s=ct(n)?Bn:Ze.current;return s=kr(t,s),xr(t,o),n=qa(e,t,n,r,s,o),r=Za(),e!==null&&!lt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,sn(e,t,o)):(Se&&r&&za(t),t.flags|=1,tt(e,t,n,o),t.child)}function yd(e,t,n,r,o){if(ct(n)){var s=!0;Us(t)}else s=!1;if(xr(t,o),t.stateNode===null)Is(e,t),Hf(t,n,r),Zl(t,n,r,o),r=!0;else if(e===null){var l=t.stateNode,a=t.memoizedProps;l.props=a;var c=l.context,d=n.contextType;typeof d=="object"&&d!==null?d=Et(d):(d=ct(n)?Bn:Ze.current,d=kr(t,d));var p=n.getDerivedStateFromProps,u=typeof p=="function"||typeof l.getSnapshotBeforeUpdate=="function";u||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(a!==r||c!==d)&&pd(t,l,r,d),hn=!1;var f=t.memoizedState;l.state=f,Ys(t,r,l,o),c=t.memoizedState,a!==r||f!==c||at.current||hn?(typeof p=="function"&&(ql(t,n,p,r),c=t.memoizedState),(a=hn||fd(t,n,a,r,f,c,d))?(u||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),l.props=r,l.state=c,l.context=d,r=a):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{l=t.stateNode,bf(e,t),a=t.memoizedProps,d=t.type===t.elementType?a:Rt(t.type,a),l.props=d,u=t.pendingProps,f=l.context,c=n.contextType,typeof c=="object"&&c!==null?c=Et(c):(c=ct(n)?Bn:Ze.current,c=kr(t,c));var h=n.getDerivedStateFromProps;(p=typeof h=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(a!==u||f!==c)&&pd(t,l,r,c),hn=!1,f=t.memoizedState,l.state=f,Ys(t,r,l,o);var y=t.memoizedState;a!==u||f!==y||at.current||hn?(typeof h=="function"&&(ql(t,n,h,r),y=t.memoizedState),(d=hn||fd(t,n,d,r,f,y,c)||!1)?(p||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,y,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,y,c)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=y),l.props=r,l.state=y,l.context=c,r=d):(typeof l.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return na(e,t,n,r,s,o)}function na(e,t,n,r,o,s){Vf(e,t);var l=(t.flags&128)!==0;if(!r&&!l)return o&&od(t,n,!1),sn(e,t,s);r=t.stateNode,eh.current=t;var a=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&l?(t.child=wr(t,e.child,null,s),t.child=wr(t,null,a,s)):tt(e,t,a,s),t.memoizedState=r.state,o&&od(t,n,!0),t.child}function Kf(e){var t=e.stateNode;t.pendingContext?rd(e,t.pendingContext,t.pendingContext!==t.context):t.context&&rd(e,t.context,!1),Qa(e,t.containerInfo)}function bd(e,t,n,r,o){return jr(),$a(o),t.flags|=256,tt(e,t,n,r),t.child}var ra={dehydrated:null,treeContext:null,retryLane:0};function oa(e){return{baseLanes:e,cachePool:null,transitions:null}}function Qf(e,t,n){var r=t.pendingProps,o=Ne.current,s=!1,l=(t.flags&128)!==0,a;if((a=l)||(a=e!==null&&e.memoizedState===null?!1:(o&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),be(Ne,o&1),e===null)return Gl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=r.children,e=r.fallback,s?(r=t.mode,s=t.child,l={mode:"hidden",children:l},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=l):s=ji(l,r,0,null),e=Hn(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=oa(n),t.memoizedState=ra,e):nc(t,l));if(o=e.memoizedState,o!==null&&(a=o.dehydrated,a!==null))return th(e,t,l,r,a,o,n);if(s){s=r.fallback,l=t.mode,o=e.child,a=o.sibling;var c={mode:"hidden",children:r.children};return!(l&1)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=En(o,c),r.subtreeFlags=o.subtreeFlags&14680064),a!==null?s=En(a,s):(s=Hn(s,l,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,l=e.child.memoizedState,l=l===null?oa(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=ra,r}return s=e.child,e=s.sibling,r=En(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function nc(e,t){return t=ji({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function as(e,t,n,r){return r!==null&&$a(r),wr(t,e.child,null,n),e=nc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function th(e,t,n,r,o,s,l){if(n)return t.flags&256?(t.flags&=-257,r=dl(Error(_(422))),as(e,t,l,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,o=t.mode,r=ji({mode:"visible",children:r.children},o,0,null),s=Hn(s,o,l,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&wr(t,e.child,null,l),t.child.memoizedState=oa(l),t.memoizedState=ra,s);if(!(t.mode&1))return as(e,t,l,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(_(419)),r=dl(s,r,void 0),as(e,t,l,r)}if(a=(l&e.childLanes)!==0,lt||a){if(r=Be,r!==null){switch(l&-l){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|l)?0:o,o!==0&&o!==s.retryLane&&(s.retryLane=o,on(e,o),Ft(r,e,o,-1))}return ac(),r=dl(Error(_(421))),as(e,t,l,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=mh.bind(null,e),o._reactRetry=t,null):(e=s.treeContext,ht=Sn(o.nextSibling),gt=t,Se=!0,Lt=null,e!==null&&(St[Ct++]=Zt,St[Ct++]=en,St[Ct++]=Un,Zt=e.id,en=e.overflow,Un=t),t=nc(t,r.children),t.flags|=4096,t)}function kd(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Xl(e.return,t,n)}function ul(e,t,n,r,o){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=o)}function Yf(e,t,n){var r=t.pendingProps,o=r.revealOrder,s=r.tail;if(tt(e,t,r.children,n),r=Ne.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&kd(e,n,t);else if(e.tag===19)kd(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(be(Ne,r),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&Gs(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),ul(t,!1,o,n,s);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Gs(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}ul(t,!0,n,null,s);break;case"together":ul(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Is(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function sn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Vn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(_(153));if(t.child!==null){for(e=t.child,n=En(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=En(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function nh(e,t,n){switch(t.tag){case 3:Kf(t),jr();break;case 5:kf(t);break;case 1:ct(t.type)&&Us(t);break;case 4:Qa(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;be(Ks,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(be(Ne,Ne.current&1),t.flags|=128,null):n&t.child.childLanes?Qf(e,t,n):(be(Ne,Ne.current&1),e=sn(e,t,n),e!==null?e.sibling:null);be(Ne,Ne.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Yf(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),be(Ne,Ne.current),r)break;return null;case 22:case 23:return t.lanes=0,Wf(e,t,n)}return sn(e,t,n)}var Gf,sa,Xf,qf;Gf=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};sa=function(){};Xf=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,_n(Qt.current);var s=null;switch(n){case"input":o=Il(e,o),r=Il(e,r),s=[];break;case"select":o=Ee({},o,{value:void 0}),r=Ee({},r,{value:void 0}),s=[];break;case"textarea":o=Ol(e,o),r=Ol(e,r),s=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=$s)}Dl(n,r);var l;n=null;for(d in o)if(!r.hasOwnProperty(d)&&o.hasOwnProperty(d)&&o[d]!=null)if(d==="style"){var a=o[d];for(l in a)a.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(go.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var c=r[d];if(a=o!=null?o[d]:void 0,r.hasOwnProperty(d)&&c!==a&&(c!=null||a!=null))if(d==="style")if(a){for(l in a)!a.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in c)c.hasOwnProperty(l)&&a[l]!==c[l]&&(n||(n={}),n[l]=c[l])}else n||(s||(s=[]),s.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(s=s||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(go.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&je("scroll",e),s||a===c||(s=[])):(s=s||[]).push(d,c))}n&&(s=s||[]).push("style",n);var d=s;(t.updateQueue=d)&&(t.flags|=4)}};qf=function(e,t,n,r){n!==r&&(t.flags|=4)};function Qr(e,t){if(!Se)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Xe(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function rh(e,t,n){var r=t.pendingProps;switch(Ha(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xe(t),null;case 1:return ct(t.type)&&Bs(),Xe(t),null;case 3:return r=t.stateNode,Sr(),we(at),we(Ze),Ga(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(is(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Lt!==null&&(pa(Lt),Lt=null))),sa(e,t),Xe(t),null;case 5:Ya(t);var o=_n(Eo.current);if(n=t.type,e!==null&&t.stateNode!=null)Xf(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(_(166));return Xe(t),null}if(e=_n(Qt.current),is(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Vt]=t,r[No]=s,e=(t.mode&1)!==0,n){case"dialog":je("cancel",r),je("close",r);break;case"iframe":case"object":case"embed":je("load",r);break;case"video":case"audio":for(o=0;o<to.length;o++)je(to[o],r);break;case"source":je("error",r);break;case"img":case"image":case"link":je("error",r),je("load",r);break;case"details":je("toggle",r);break;case"input":Oc(r,s),je("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},je("invalid",r);break;case"textarea":Dc(r,s),je("invalid",r)}Dl(n,s),o=null;for(var l in s)if(s.hasOwnProperty(l)){var a=s[l];l==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&ss(r.textContent,a,e),o=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&ss(r.textContent,a,e),o=["children",""+a]):go.hasOwnProperty(l)&&a!=null&&l==="onScroll"&&je("scroll",r)}switch(n){case"input":Xo(r),Mc(r,s,!0);break;case"textarea":Xo(r),Rc(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=$s)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{l=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Cu(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),n==="select"&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[Vt]=t,e[No]=r,Gf(e,t,!1,!1),t.stateNode=e;e:{switch(l=Rl(n,r),n){case"dialog":je("cancel",e),je("close",e),o=r;break;case"iframe":case"object":case"embed":je("load",e),o=r;break;case"video":case"audio":for(o=0;o<to.length;o++)je(to[o],e);o=r;break;case"source":je("error",e),o=r;break;case"img":case"image":case"link":je("error",e),je("load",e),o=r;break;case"details":je("toggle",e),o=r;break;case"input":Oc(e,r),o=Il(e,r),je("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=Ee({},r,{value:void 0}),je("invalid",e);break;case"textarea":Dc(e,r),o=Ol(e,r),je("invalid",e);break;default:o=r}Dl(n,o),a=o;for(s in a)if(a.hasOwnProperty(s)){var c=a[s];s==="style"?Eu(e,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Nu(e,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&xo(e,c):typeof c=="number"&&xo(e,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(go.hasOwnProperty(s)?c!=null&&s==="onScroll"&&je("scroll",e):c!=null&&Na(e,s,c,l))}switch(n){case"input":Xo(e),Mc(e,r,!1);break;case"textarea":Xo(e),Rc(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Pn(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?pr(e,!!r.multiple,s,!1):r.defaultValue!=null&&pr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=$s)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Xe(t),null;case 6:if(e&&t.stateNode!=null)qf(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(_(166));if(n=_n(Eo.current),_n(Qt.current),is(t)){if(r=t.stateNode,n=t.memoizedProps,r[Vt]=t,(s=r.nodeValue!==n)&&(e=gt,e!==null))switch(e.tag){case 3:ss(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ss(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Vt]=t,t.stateNode=r}return Xe(t),null;case 13:if(we(Ne),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Se&&ht!==null&&t.mode&1&&!(t.flags&128))gf(),jr(),t.flags|=98560,s=!1;else if(s=is(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(_(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(_(317));s[Vt]=t}else jr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Xe(t),s=!1}else Lt!==null&&(pa(Lt),Lt=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ne.current&1?_e===0&&(_e=3):ac())),t.updateQueue!==null&&(t.flags|=4),Xe(t),null);case 4:return Sr(),sa(e,t),e===null&&So(t.stateNode.containerInfo),Xe(t),null;case 10:return Wa(t.type._context),Xe(t),null;case 17:return ct(t.type)&&Bs(),Xe(t),null;case 19:if(we(Ne),s=t.memoizedState,s===null)return Xe(t),null;if(r=(t.flags&128)!==0,l=s.rendering,l===null)if(r)Qr(s,!1);else{if(_e!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=Gs(e),l!==null){for(t.flags|=128,Qr(s,!1),r=l.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,l=s.alternate,l===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return be(Ne,Ne.current&1|2),t.child}e=e.sibling}s.tail!==null&&Re()>Nr&&(t.flags|=128,r=!0,Qr(s,!1),t.lanes=4194304)}else{if(!r)if(e=Gs(l),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Qr(s,!0),s.tail===null&&s.tailMode==="hidden"&&!l.alternate&&!Se)return Xe(t),null}else 2*Re()-s.renderingStartTime>Nr&&n!==1073741824&&(t.flags|=128,r=!0,Qr(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(n=s.last,n!==null?n.sibling=l:t.child=l,s.last=l)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Re(),t.sibling=null,n=Ne.current,be(Ne,r?n&1|2:n&1),t):(Xe(t),null);case 22:case 23:return lc(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?mt&1073741824&&(Xe(t),t.subtreeFlags&6&&(t.flags|=8192)):Xe(t),null;case 24:return null;case 25:return null}throw Error(_(156,t.tag))}function oh(e,t){switch(Ha(t),t.tag){case 1:return ct(t.type)&&Bs(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Sr(),we(at),we(Ze),Ga(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ya(t),null;case 13:if(we(Ne),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(_(340));jr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return we(Ne),null;case 4:return Sr(),null;case 10:return Wa(t.type._context),null;case 22:case 23:return lc(),null;case 24:return null;default:return null}}var cs=!1,qe=!1,sh=typeof WeakSet=="function"?WeakSet:Set,V=null;function dr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Oe(e,t,r)}else n.current=null}function ia(e,t,n){try{n()}catch(r){Oe(e,t,r)}}var jd=!1;function ih(e,t){if(Bl=_s,e=nf(),_a(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var l=0,a=-1,c=-1,d=0,p=0,u=e,f=null;t:for(;;){for(var h;u!==n||o!==0&&u.nodeType!==3||(a=l+o),u!==s||r!==0&&u.nodeType!==3||(c=l+r),u.nodeType===3&&(l+=u.nodeValue.length),(h=u.firstChild)!==null;)f=u,u=h;for(;;){if(u===e)break t;if(f===n&&++d===o&&(a=l),f===s&&++p===r&&(c=l),(h=u.nextSibling)!==null)break;u=f,f=u.parentNode}u=h}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ul={focusedElem:e,selectionRange:n},_s=!1,V=t;V!==null;)if(t=V,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,V=e;else for(;V!==null;){t=V;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var b=y.memoizedProps,k=y.memoizedState,x=t.stateNode,m=x.getSnapshotBeforeUpdate(t.elementType===t.type?b:Rt(t.type,b),k);x.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(_(163))}}catch(S){Oe(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,V=e;break}V=t.return}return y=jd,jd=!1,y}function ao(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var s=o.destroy;o.destroy=void 0,s!==void 0&&ia(t,n,s)}o=o.next}while(o!==r)}}function bi(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function la(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Zf(e){var t=e.alternate;t!==null&&(e.alternate=null,Zf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Vt],delete t[No],delete t[Kl],delete t[$m],delete t[Bm])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ep(e){return e.tag===5||e.tag===3||e.tag===4}function wd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||ep(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function aa(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=$s));else if(r!==4&&(e=e.child,e!==null))for(aa(e,t,n),e=e.sibling;e!==null;)aa(e,t,n),e=e.sibling}function ca(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(ca(e,t,n),e=e.sibling;e!==null;)ca(e,t,n),e=e.sibling}var Ve=null,At=!1;function fn(e,t,n){for(n=n.child;n!==null;)tp(e,t,n),n=n.sibling}function tp(e,t,n){if(Kt&&typeof Kt.onCommitFiberUnmount=="function")try{Kt.onCommitFiberUnmount(fi,n)}catch{}switch(n.tag){case 5:qe||dr(n,t);case 6:var r=Ve,o=At;Ve=null,fn(e,t,n),Ve=r,At=o,Ve!==null&&(At?(e=Ve,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ve.removeChild(n.stateNode));break;case 18:Ve!==null&&(At?(e=Ve,n=n.stateNode,e.nodeType===8?ol(e.parentNode,n):e.nodeType===1&&ol(e,n),ko(e)):ol(Ve,n.stateNode));break;case 4:r=Ve,o=At,Ve=n.stateNode.containerInfo,At=!0,fn(e,t,n),Ve=r,At=o;break;case 0:case 11:case 14:case 15:if(!qe&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var s=o,l=s.destroy;s=s.tag,l!==void 0&&(s&2||s&4)&&ia(n,t,l),o=o.next}while(o!==r)}fn(e,t,n);break;case 1:if(!qe&&(dr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Oe(n,t,a)}fn(e,t,n);break;case 21:fn(e,t,n);break;case 22:n.mode&1?(qe=(r=qe)||n.memoizedState!==null,fn(e,t,n),qe=r):fn(e,t,n);break;default:fn(e,t,n)}}function Sd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new sh),t.forEach(function(r){var o=hh.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function Dt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var s=e,l=t,a=l;e:for(;a!==null;){switch(a.tag){case 5:Ve=a.stateNode,At=!1;break e;case 3:Ve=a.stateNode.containerInfo,At=!0;break e;case 4:Ve=a.stateNode.containerInfo,At=!0;break e}a=a.return}if(Ve===null)throw Error(_(160));tp(s,l,o),Ve=null,At=!1;var c=o.alternate;c!==null&&(c.return=null),o.return=null}catch(d){Oe(o,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)np(t,e),t=t.sibling}function np(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Dt(t,e),Ut(e),r&4){try{ao(3,e,e.return),bi(3,e)}catch(b){Oe(e,e.return,b)}try{ao(5,e,e.return)}catch(b){Oe(e,e.return,b)}}break;case 1:Dt(t,e),Ut(e),r&512&&n!==null&&dr(n,n.return);break;case 5:if(Dt(t,e),Ut(e),r&512&&n!==null&&dr(n,n.return),e.flags&32){var o=e.stateNode;try{xo(o,"")}catch(b){Oe(e,e.return,b)}}if(r&4&&(o=e.stateNode,o!=null)){var s=e.memoizedProps,l=n!==null?n.memoizedProps:s,a=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&wu(o,s),Rl(a,l);var d=Rl(a,s);for(l=0;l<c.length;l+=2){var p=c[l],u=c[l+1];p==="style"?Eu(o,u):p==="dangerouslySetInnerHTML"?Nu(o,u):p==="children"?xo(o,u):Na(o,p,u,d)}switch(a){case"input":El(o,s);break;case"textarea":Su(o,s);break;case"select":var f=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?pr(o,!!s.multiple,h,!1):f!==!!s.multiple&&(s.defaultValue!=null?pr(o,!!s.multiple,s.defaultValue,!0):pr(o,!!s.multiple,s.multiple?[]:"",!1))}o[No]=s}catch(b){Oe(e,e.return,b)}}break;case 6:if(Dt(t,e),Ut(e),r&4){if(e.stateNode===null)throw Error(_(162));o=e.stateNode,s=e.memoizedProps;try{o.nodeValue=s}catch(b){Oe(e,e.return,b)}}break;case 3:if(Dt(t,e),Ut(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ko(t.containerInfo)}catch(b){Oe(e,e.return,b)}break;case 4:Dt(t,e),Ut(e);break;case 13:Dt(t,e),Ut(e),o=e.child,o.flags&8192&&(s=o.memoizedState!==null,o.stateNode.isHidden=s,!s||o.alternate!==null&&o.alternate.memoizedState!==null||(sc=Re())),r&4&&Sd(e);break;case 22:if(p=n!==null&&n.memoizedState!==null,e.mode&1?(qe=(d=qe)||p,Dt(t,e),qe=d):Dt(t,e),Ut(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!p&&e.mode&1)for(V=e,p=e.child;p!==null;){for(u=V=p;V!==null;){switch(f=V,h=f.child,f.tag){case 0:case 11:case 14:case 15:ao(4,f,f.return);break;case 1:dr(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){r=f,n=f.return;try{t=r,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(b){Oe(r,n,b)}}break;case 5:dr(f,f.return);break;case 22:if(f.memoizedState!==null){Nd(u);continue}}h!==null?(h.return=f,V=h):Nd(u)}p=p.sibling}e:for(p=null,u=e;;){if(u.tag===5){if(p===null){p=u;try{o=u.stateNode,d?(s=o.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=u.stateNode,c=u.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=Iu("display",l))}catch(b){Oe(e,e.return,b)}}}else if(u.tag===6){if(p===null)try{u.stateNode.nodeValue=d?"":u.memoizedProps}catch(b){Oe(e,e.return,b)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===e)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===e)break e;for(;u.sibling===null;){if(u.return===null||u.return===e)break e;p===u&&(p=null),u=u.return}p===u&&(p=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:Dt(t,e),Ut(e),r&4&&Sd(e);break;case 21:break;default:Dt(t,e),Ut(e)}}function Ut(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(ep(n)){var r=n;break e}n=n.return}throw Error(_(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(xo(o,""),r.flags&=-33);var s=wd(e);ca(e,s,o);break;case 3:case 4:var l=r.stateNode.containerInfo,a=wd(e);aa(e,a,l);break;default:throw Error(_(161))}}catch(c){Oe(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function lh(e,t,n){V=e,rp(e)}function rp(e,t,n){for(var r=(e.mode&1)!==0;V!==null;){var o=V,s=o.child;if(o.tag===22&&r){var l=o.memoizedState!==null||cs;if(!l){var a=o.alternate,c=a!==null&&a.memoizedState!==null||qe;a=cs;var d=qe;if(cs=l,(qe=c)&&!d)for(V=o;V!==null;)l=V,c=l.child,l.tag===22&&l.memoizedState!==null?Id(o):c!==null?(c.return=l,V=c):Id(o);for(;s!==null;)V=s,rp(s),s=s.sibling;V=o,cs=a,qe=d}Cd(e)}else o.subtreeFlags&8772&&s!==null?(s.return=o,V=s):Cd(e)}}function Cd(e){for(;V!==null;){var t=V;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:qe||bi(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!qe)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:Rt(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&cd(t,s,r);break;case 3:var l=t.updateQueue;if(l!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}cd(t,l,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var p=d.memoizedState;if(p!==null){var u=p.dehydrated;u!==null&&ko(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(_(163))}qe||t.flags&512&&la(t)}catch(f){Oe(t,t.return,f)}}if(t===e){V=null;break}if(n=t.sibling,n!==null){n.return=t.return,V=n;break}V=t.return}}function Nd(e){for(;V!==null;){var t=V;if(t===e){V=null;break}var n=t.sibling;if(n!==null){n.return=t.return,V=n;break}V=t.return}}function Id(e){for(;V!==null;){var t=V;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{bi(4,t)}catch(c){Oe(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(c){Oe(t,o,c)}}var s=t.return;try{la(t)}catch(c){Oe(t,s,c)}break;case 5:var l=t.return;try{la(t)}catch(c){Oe(t,l,c)}}}catch(c){Oe(t,t.return,c)}if(t===e){V=null;break}var a=t.sibling;if(a!==null){a.return=t.return,V=a;break}V=t.return}}var ah=Math.ceil,Zs=ln.ReactCurrentDispatcher,rc=ln.ReactCurrentOwner,It=ln.ReactCurrentBatchConfig,he=0,Be=null,Te=null,Ke=0,mt=0,ur=Rn(0),_e=0,Do=null,Vn=0,ki=0,oc=0,co=null,it=null,sc=0,Nr=1/0,Xt=null,ei=!1,da=null,Nn=null,ds=!1,bn=null,ti=0,uo=0,ua=null,Es=-1,Ps=0;function nt(){return he&6?Re():Es!==-1?Es:Es=Re()}function In(e){return e.mode&1?he&2&&Ke!==0?Ke&-Ke:Wm.transition!==null?(Ps===0&&(Ps=zu()),Ps):(e=xe,e!==0||(e=window.event,e=e===void 0?16:Ku(e.type)),e):1}function Ft(e,t,n,r){if(50<uo)throw uo=0,ua=null,Error(_(185));_o(e,n,r),(!(he&2)||e!==Be)&&(e===Be&&(!(he&2)&&(ki|=n),_e===4&&vn(e,Ke)),dt(e,r),n===1&&he===0&&!(t.mode&1)&&(Nr=Re()+500,xi&&An()))}function dt(e,t){var n=e.callbackNode;W0(e,t);var r=Fs(e,e===Be?Ke:0);if(r===0)n!==null&&Tc(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Tc(n),t===1)e.tag===0?Um(Ed.bind(null,e)):pf(Ed.bind(null,e)),zm(function(){!(he&6)&&An()}),n=null;else{switch(Hu(r)){case 1:n=Ma;break;case 4:n=Fu;break;case 16:n=Js;break;case 536870912:n=_u;break;default:n=Js}n=up(n,op.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function op(e,t){if(Es=-1,Ps=0,he&6)throw Error(_(327));var n=e.callbackNode;if(vr()&&e.callbackNode!==n)return null;var r=Fs(e,e===Be?Ke:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=ni(e,r);else{t=r;var o=he;he|=2;var s=ip();(Be!==e||Ke!==t)&&(Xt=null,Nr=Re()+500,zn(e,t));do try{uh();break}catch(a){sp(e,a)}while(!0);Ua(),Zs.current=s,he=o,Te!==null?t=0:(Be=null,Ke=0,t=_e)}if(t!==0){if(t===2&&(o=Fl(e),o!==0&&(r=o,t=fa(e,o))),t===1)throw n=Do,zn(e,0),vn(e,r),dt(e,Re()),n;if(t===6)vn(e,r);else{if(o=e.current.alternate,!(r&30)&&!ch(o)&&(t=ni(e,r),t===2&&(s=Fl(e),s!==0&&(r=s,t=fa(e,s))),t===1))throw n=Do,zn(e,0),vn(e,r),dt(e,Re()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(_(345));case 2:Tn(e,it,Xt);break;case 3:if(vn(e,r),(r&130023424)===r&&(t=sc+500-Re(),10<t)){if(Fs(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){nt(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Vl(Tn.bind(null,e,it,Xt),t);break}Tn(e,it,Xt);break;case 4:if(vn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var l=31-Jt(r);s=1<<l,l=t[l],l>o&&(o=l),r&=~s}if(r=o,r=Re()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ah(r/1960))-r,10<r){e.timeoutHandle=Vl(Tn.bind(null,e,it,Xt),r);break}Tn(e,it,Xt);break;case 5:Tn(e,it,Xt);break;default:throw Error(_(329))}}}return dt(e,Re()),e.callbackNode===n?op.bind(null,e):null}function fa(e,t){var n=co;return e.current.memoizedState.isDehydrated&&(zn(e,t).flags|=256),e=ni(e,t),e!==2&&(t=it,it=n,t!==null&&pa(t)),e}function pa(e){it===null?it=e:it.push.apply(it,e)}function ch(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],s=o.getSnapshot;o=o.value;try{if(!_t(s(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function vn(e,t){for(t&=~oc,t&=~ki,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Jt(t),r=1<<n;e[n]=-1,t&=~r}}function Ed(e){if(he&6)throw Error(_(327));vr();var t=Fs(e,0);if(!(t&1))return dt(e,Re()),null;var n=ni(e,t);if(e.tag!==0&&n===2){var r=Fl(e);r!==0&&(t=r,n=fa(e,r))}if(n===1)throw n=Do,zn(e,0),vn(e,t),dt(e,Re()),n;if(n===6)throw Error(_(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Tn(e,it,Xt),dt(e,Re()),null}function ic(e,t){var n=he;he|=1;try{return e(t)}finally{he=n,he===0&&(Nr=Re()+500,xi&&An())}}function Kn(e){bn!==null&&bn.tag===0&&!(he&6)&&vr();var t=he;he|=1;var n=It.transition,r=xe;try{if(It.transition=null,xe=1,e)return e()}finally{xe=r,It.transition=n,he=t,!(he&6)&&An()}}function lc(){mt=ur.current,we(ur)}function zn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,_m(n)),Te!==null)for(n=Te.return;n!==null;){var r=n;switch(Ha(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Bs();break;case 3:Sr(),we(at),we(Ze),Ga();break;case 5:Ya(r);break;case 4:Sr();break;case 13:we(Ne);break;case 19:we(Ne);break;case 10:Wa(r.type._context);break;case 22:case 23:lc()}n=n.return}if(Be=e,Te=e=En(e.current,null),Ke=mt=t,_e=0,Do=null,oc=ki=Vn=0,it=co=null,Fn!==null){for(t=0;t<Fn.length;t++)if(n=Fn[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,s=n.pending;if(s!==null){var l=s.next;s.next=o,r.next=l}n.pending=r}Fn=null}return e}function sp(e,t){do{var n=Te;try{if(Ua(),Cs.current=qs,Xs){for(var r=Ie.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Xs=!1}if(Wn=0,He=Je=Ie=null,lo=!1,Po=0,rc.current=null,n===null||n.return===null){_e=1,Do=t,Te=null;break}e:{var s=e,l=n.return,a=n,c=t;if(t=Ke,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,p=a,u=p.tag;if(!(p.mode&1)&&(u===0||u===11||u===15)){var f=p.alternate;f?(p.updateQueue=f.updateQueue,p.memoizedState=f.memoizedState,p.lanes=f.lanes):(p.updateQueue=null,p.memoizedState=null)}var h=hd(l);if(h!==null){h.flags&=-257,gd(h,l,a,s,t),h.mode&1&&md(s,d,t),t=h,c=d;var y=t.updateQueue;if(y===null){var b=new Set;b.add(c),t.updateQueue=b}else y.add(c);break e}else{if(!(t&1)){md(s,d,t),ac();break e}c=Error(_(426))}}else if(Se&&a.mode&1){var k=hd(l);if(k!==null){!(k.flags&65536)&&(k.flags|=256),gd(k,l,a,s,t),$a(Cr(c,a));break e}}s=c=Cr(c,a),_e!==4&&(_e=2),co===null?co=[s]:co.push(s),s=l;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var x=$f(s,c,t);ad(s,x);break e;case 1:a=c;var m=s.type,g=s.stateNode;if(!(s.flags&128)&&(typeof m.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Nn===null||!Nn.has(g)))){s.flags|=65536,t&=-t,s.lanes|=t;var S=Bf(s,a,t);ad(s,S);break e}}s=s.return}while(s!==null)}ap(n)}catch(I){t=I,Te===n&&n!==null&&(Te=n=n.return);continue}break}while(!0)}function ip(){var e=Zs.current;return Zs.current=qs,e===null?qs:e}function ac(){(_e===0||_e===3||_e===2)&&(_e=4),Be===null||!(Vn&268435455)&&!(ki&268435455)||vn(Be,Ke)}function ni(e,t){var n=he;he|=2;var r=ip();(Be!==e||Ke!==t)&&(Xt=null,zn(e,t));do try{dh();break}catch(o){sp(e,o)}while(!0);if(Ua(),he=n,Zs.current=r,Te!==null)throw Error(_(261));return Be=null,Ke=0,_e}function dh(){for(;Te!==null;)lp(Te)}function uh(){for(;Te!==null&&!T0();)lp(Te)}function lp(e){var t=dp(e.alternate,e,mt);e.memoizedProps=e.pendingProps,t===null?ap(e):Te=t,rc.current=null}function ap(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=oh(n,t),n!==null){n.flags&=32767,Te=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{_e=6,Te=null;return}}else if(n=rh(n,t,mt),n!==null){Te=n;return}if(t=t.sibling,t!==null){Te=t;return}Te=t=e}while(t!==null);_e===0&&(_e=5)}function Tn(e,t,n){var r=xe,o=It.transition;try{It.transition=null,xe=1,fh(e,t,n,r)}finally{It.transition=o,xe=r}return null}function fh(e,t,n,r){do vr();while(bn!==null);if(he&6)throw Error(_(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(_(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(V0(e,s),e===Be&&(Te=Be=null,Ke=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ds||(ds=!0,up(Js,function(){return vr(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=It.transition,It.transition=null;var l=xe;xe=1;var a=he;he|=4,rc.current=null,ih(e,n),np(n,e),Dm(Ul),_s=!!Bl,Ul=Bl=null,e.current=n,lh(n),J0(),he=a,xe=l,It.transition=s}else e.current=n;if(ds&&(ds=!1,bn=e,ti=o),s=e.pendingLanes,s===0&&(Nn=null),z0(n.stateNode),dt(e,Re()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(ei)throw ei=!1,e=da,da=null,e;return ti&1&&e.tag!==0&&vr(),s=e.pendingLanes,s&1?e===ua?uo++:(uo=0,ua=e):uo=0,An(),null}function vr(){if(bn!==null){var e=Hu(ti),t=It.transition,n=xe;try{if(It.transition=null,xe=16>e?16:e,bn===null)var r=!1;else{if(e=bn,bn=null,ti=0,he&6)throw Error(_(331));var o=he;for(he|=4,V=e.current;V!==null;){var s=V,l=s.child;if(V.flags&16){var a=s.deletions;if(a!==null){for(var c=0;c<a.length;c++){var d=a[c];for(V=d;V!==null;){var p=V;switch(p.tag){case 0:case 11:case 15:ao(8,p,s)}var u=p.child;if(u!==null)u.return=p,V=u;else for(;V!==null;){p=V;var f=p.sibling,h=p.return;if(Zf(p),p===d){V=null;break}if(f!==null){f.return=h,V=f;break}V=h}}}var y=s.alternate;if(y!==null){var b=y.child;if(b!==null){y.child=null;do{var k=b.sibling;b.sibling=null,b=k}while(b!==null)}}V=s}}if(s.subtreeFlags&2064&&l!==null)l.return=s,V=l;else e:for(;V!==null;){if(s=V,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ao(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,V=x;break e}V=s.return}}var m=e.current;for(V=m;V!==null;){l=V;var g=l.child;if(l.subtreeFlags&2064&&g!==null)g.return=l,V=g;else e:for(l=m;V!==null;){if(a=V,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:bi(9,a)}}catch(I){Oe(a,a.return,I)}if(a===l){V=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,V=S;break e}V=a.return}}if(he=o,An(),Kt&&typeof Kt.onPostCommitFiberRoot=="function")try{Kt.onPostCommitFiberRoot(fi,e)}catch{}r=!0}return r}finally{xe=n,It.transition=t}}return!1}function Pd(e,t,n){t=Cr(n,t),t=$f(e,t,1),e=Cn(e,t,1),t=nt(),e!==null&&(_o(e,1,t),dt(e,t))}function Oe(e,t,n){if(e.tag===3)Pd(e,e,n);else for(;t!==null;){if(t.tag===3){Pd(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Nn===null||!Nn.has(r))){e=Cr(n,e),e=Bf(t,e,1),t=Cn(t,e,1),e=nt(),t!==null&&(_o(t,1,e),dt(t,e));break}}t=t.return}}function ph(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=nt(),e.pingedLanes|=e.suspendedLanes&n,Be===e&&(Ke&n)===n&&(_e===4||_e===3&&(Ke&130023424)===Ke&&500>Re()-sc?zn(e,0):oc|=n),dt(e,t)}function cp(e,t){t===0&&(e.mode&1?(t=es,es<<=1,!(es&130023424)&&(es=4194304)):t=1);var n=nt();e=on(e,t),e!==null&&(_o(e,t,n),dt(e,n))}function mh(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),cp(e,n)}function hh(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(_(314))}r!==null&&r.delete(t),cp(e,n)}var dp;dp=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||at.current)lt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return lt=!1,nh(e,t,n);lt=!!(e.flags&131072)}else lt=!1,Se&&t.flags&1048576&&mf(t,Vs,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Is(e,t),e=t.pendingProps;var o=kr(t,Ze.current);xr(t,n),o=qa(null,t,r,e,o,n);var s=Za();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ct(r)?(s=!0,Us(t)):s=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Ka(t),o.updater=yi,t.stateNode=o,o._reactInternals=t,Zl(t,r,e,n),t=na(null,t,r,!0,s,n)):(t.tag=0,Se&&s&&za(t),tt(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Is(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=xh(r),e=Rt(r,e),o){case 0:t=ta(null,t,r,e,n);break e;case 1:t=yd(null,t,r,e,n);break e;case 11:t=xd(null,t,r,e,n);break e;case 14:t=vd(null,t,r,Rt(r.type,e),n);break e}throw Error(_(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Rt(r,o),ta(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Rt(r,o),yd(e,t,r,o,n);case 3:e:{if(Kf(t),e===null)throw Error(_(387));r=t.pendingProps,s=t.memoizedState,o=s.element,bf(e,t),Ys(t,r,null,n);var l=t.memoizedState;if(r=l.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){o=Cr(Error(_(423)),t),t=bd(e,t,r,n,o);break e}else if(r!==o){o=Cr(Error(_(424)),t),t=bd(e,t,r,n,o);break e}else for(ht=Sn(t.stateNode.containerInfo.firstChild),gt=t,Se=!0,Lt=null,n=vf(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(jr(),r===o){t=sn(e,t,n);break e}tt(e,t,r,n)}t=t.child}return t;case 5:return kf(t),e===null&&Gl(t),r=t.type,o=t.pendingProps,s=e!==null?e.memoizedProps:null,l=o.children,Wl(r,o)?l=null:s!==null&&Wl(r,s)&&(t.flags|=32),Vf(e,t),tt(e,t,l,n),t.child;case 6:return e===null&&Gl(t),null;case 13:return Qf(e,t,n);case 4:return Qa(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=wr(t,null,r,n):tt(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Rt(r,o),xd(e,t,r,o,n);case 7:return tt(e,t,t.pendingProps,n),t.child;case 8:return tt(e,t,t.pendingProps.children,n),t.child;case 12:return tt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,s=t.memoizedProps,l=o.value,be(Ks,r._currentValue),r._currentValue=l,s!==null)if(_t(s.value,l)){if(s.children===o.children&&!at.current){t=sn(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){l=s.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=tn(-1,n&-n),c.tag=2;var d=s.updateQueue;if(d!==null){d=d.shared;var p=d.pending;p===null?c.next=c:(c.next=p.next,p.next=c),d.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),Xl(s.return,n,t),a.lanes|=n;break}c=c.next}}else if(s.tag===10)l=s.type===t.type?null:s.child;else if(s.tag===18){if(l=s.return,l===null)throw Error(_(341));l.lanes|=n,a=l.alternate,a!==null&&(a.lanes|=n),Xl(l,n,t),l=s.sibling}else l=s.child;if(l!==null)l.return=s;else for(l=s;l!==null;){if(l===t){l=null;break}if(s=l.sibling,s!==null){s.return=l.return,l=s;break}l=l.return}s=l}tt(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,xr(t,n),o=Et(o),r=r(o),t.flags|=1,tt(e,t,r,n),t.child;case 14:return r=t.type,o=Rt(r,t.pendingProps),o=Rt(r.type,o),vd(e,t,r,o,n);case 15:return Uf(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Rt(r,o),Is(e,t),t.tag=1,ct(r)?(e=!0,Us(t)):e=!1,xr(t,n),Hf(t,r,o),Zl(t,r,o,n),na(null,t,r,!0,e,n);case 19:return Yf(e,t,n);case 22:return Wf(e,t,n)}throw Error(_(156,t.tag))};function up(e,t){return Ju(e,t)}function gh(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nt(e,t,n,r){return new gh(e,t,n,r)}function cc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function xh(e){if(typeof e=="function")return cc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ea)return 11;if(e===Pa)return 14}return 2}function En(e,t){var n=e.alternate;return n===null?(n=Nt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Os(e,t,n,r,o,s){var l=2;if(r=e,typeof e=="function")cc(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case tr:return Hn(n.children,o,s,t);case Ia:l=8,o|=8;break;case wl:return e=Nt(12,n,t,o|2),e.elementType=wl,e.lanes=s,e;case Sl:return e=Nt(13,n,t,o),e.elementType=Sl,e.lanes=s,e;case Cl:return e=Nt(19,n,t,o),e.elementType=Cl,e.lanes=s,e;case bu:return ji(n,o,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case vu:l=10;break e;case yu:l=9;break e;case Ea:l=11;break e;case Pa:l=14;break e;case mn:l=16,r=null;break e}throw Error(_(130,e==null?e:typeof e,""))}return t=Nt(l,n,t,o),t.elementType=e,t.type=r,t.lanes=s,t}function Hn(e,t,n,r){return e=Nt(7,e,r,t),e.lanes=n,e}function ji(e,t,n,r){return e=Nt(22,e,r,t),e.elementType=bu,e.lanes=n,e.stateNode={isHidden:!1},e}function fl(e,t,n){return e=Nt(6,e,null,t),e.lanes=n,e}function pl(e,t,n){return t=Nt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function vh(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ki(0),this.expirationTimes=Ki(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ki(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function dc(e,t,n,r,o,s,l,a,c){return e=new vh(e,t,n,a,c),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Nt(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ka(s),e}function yh(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:er,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function fp(e){if(!e)return On;e=e._reactInternals;e:{if(Yn(e)!==e||e.tag!==1)throw Error(_(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ct(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(_(171))}if(e.tag===1){var n=e.type;if(ct(n))return ff(e,n,t)}return t}function pp(e,t,n,r,o,s,l,a,c){return e=dc(n,r,!0,e,o,s,l,a,c),e.context=fp(null),n=e.current,r=nt(),o=In(n),s=tn(r,o),s.callback=t??null,Cn(n,s,o),e.current.lanes=o,_o(e,o,r),dt(e,r),e}function wi(e,t,n,r){var o=t.current,s=nt(),l=In(o);return n=fp(n),t.context===null?t.context=n:t.pendingContext=n,t=tn(s,l),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Cn(o,t,l),e!==null&&(Ft(e,o,l,s),Ss(e,o,l)),l}function ri(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Od(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function uc(e,t){Od(e,t),(e=e.alternate)&&Od(e,t)}function bh(){return null}var mp=typeof reportError=="function"?reportError:function(e){console.error(e)};function fc(e){this._internalRoot=e}Si.prototype.render=fc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(_(409));wi(e,t,null,null)};Si.prototype.unmount=fc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Kn(function(){wi(null,e,null,null)}),t[rn]=null}};function Si(e){this._internalRoot=e}Si.prototype.unstable_scheduleHydration=function(e){if(e){var t=Uu();e={blockedOn:null,target:e,priority:t};for(var n=0;n<xn.length&&t!==0&&t<xn[n].priority;n++);xn.splice(n,0,e),n===0&&Vu(e)}};function pc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ci(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Md(){}function kh(e,t,n,r,o){if(o){if(typeof r=="function"){var s=r;r=function(){var d=ri(l);s.call(d)}}var l=pp(t,r,e,0,null,!1,!1,"",Md);return e._reactRootContainer=l,e[rn]=l.current,So(e.nodeType===8?e.parentNode:e),Kn(),l}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var a=r;r=function(){var d=ri(c);a.call(d)}}var c=dc(e,0,!1,null,null,!1,!1,"",Md);return e._reactRootContainer=c,e[rn]=c.current,So(e.nodeType===8?e.parentNode:e),Kn(function(){wi(t,c,n,r)}),c}function Ni(e,t,n,r,o){var s=n._reactRootContainer;if(s){var l=s;if(typeof o=="function"){var a=o;o=function(){var c=ri(l);a.call(c)}}wi(t,l,e,o)}else l=kh(n,t,e,o,r);return ri(l)}$u=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=eo(t.pendingLanes);n!==0&&(Da(t,n|1),dt(t,Re()),!(he&6)&&(Nr=Re()+500,An()))}break;case 13:Kn(function(){var r=on(e,1);if(r!==null){var o=nt();Ft(r,e,1,o)}}),uc(e,1)}};Ra=function(e){if(e.tag===13){var t=on(e,134217728);if(t!==null){var n=nt();Ft(t,e,134217728,n)}uc(e,134217728)}};Bu=function(e){if(e.tag===13){var t=In(e),n=on(e,t);if(n!==null){var r=nt();Ft(n,e,t,r)}uc(e,t)}};Uu=function(){return xe};Wu=function(e,t){var n=xe;try{return xe=e,t()}finally{xe=n}};Ll=function(e,t,n){switch(t){case"input":if(El(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=gi(r);if(!o)throw Error(_(90));ju(r),El(r,o)}}}break;case"textarea":Su(e,n);break;case"select":t=n.value,t!=null&&pr(e,!!n.multiple,t,!1)}};Mu=ic;Du=Kn;var jh={usingClientEntryPoint:!1,Events:[Ho,sr,gi,Pu,Ou,ic]},Yr={findFiberByHostInstance:Jn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},wh={bundleType:Yr.bundleType,version:Yr.version,rendererPackageName:Yr.rendererPackageName,rendererConfig:Yr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ln.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Lu(e),e===null?null:e.stateNode},findFiberByHostInstance:Yr.findFiberByHostInstance||bh,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var us=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!us.isDisabled&&us.supportsFiber)try{fi=us.inject(wh),Kt=us}catch{}}vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jh;vt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pc(t))throw Error(_(200));return yh(e,t,null,n)};vt.createRoot=function(e,t){if(!pc(e))throw Error(_(299));var n=!1,r="",o=mp;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=dc(e,1,!1,null,null,n,!1,r,o),e[rn]=t.current,So(e.nodeType===8?e.parentNode:e),new fc(t)};vt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(_(188)):(e=Object.keys(e).join(","),Error(_(268,e)));return e=Lu(t),e=e===null?null:e.stateNode,e};vt.flushSync=function(e){return Kn(e)};vt.hydrate=function(e,t,n){if(!Ci(t))throw Error(_(200));return Ni(null,e,t,!0,n)};vt.hydrateRoot=function(e,t,n){if(!pc(e))throw Error(_(405));var r=n!=null&&n.hydratedSources||null,o=!1,s="",l=mp;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),t=pp(t,null,e,1,n??null,o,!1,s,l),e[rn]=t.current,So(e),r)for(e=0;e<r.length;e++)n=r[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new Si(t)};vt.render=function(e,t,n){if(!Ci(t))throw Error(_(200));return Ni(null,e,t,!1,n)};vt.unmountComponentAtNode=function(e){if(!Ci(e))throw Error(_(40));return e._reactRootContainer?(Kn(function(){Ni(null,null,e,!1,function(){e._reactRootContainer=null,e[rn]=null})}),!0):!1};vt.unstable_batchedUpdates=ic;vt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Ci(n))throw Error(_(200));if(e==null||e._reactInternals===void 0)throw Error(_(38));return Ni(e,t,n,!1,r)};vt.version="18.3.1-next-f1338f8080-20240426";function hp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(hp)}catch(e){console.error(e)}}hp(),mu.exports=vt;var fr=mu.exports,Dd=fr;kl.createRoot=Dd.createRoot,kl.hydrateRoot=Dd.hydrateRoot;function Sh({brand:e,actions:t}){return i.jsxs("div",{className:"flex flex-shrink-0 flex-row flex-wrap items-center justify-between gap-4 border-b border-stone-200 bg-white px-6 py-4 dark:border-stone-700 dark:bg-stone-800",children:[i.jsx("div",{className:"flex min-h-[2rem] items-center gap-4",children:e}),t&&i.jsx("div",{className:"flex items-center gap-2",children:t})]})}const Ch={},Rd=e=>{let t;const n=new Set,r=(p,u)=>{const f=typeof p=="function"?p(t):p;if(!Object.is(f,t)){const h=t;t=u??(typeof f!="object"||f===null)?f:Object.assign({},t,f),n.forEach(y=>y(t,h))}},o=()=>t,c={setState:r,getState:o,getInitialState:()=>d,subscribe:p=>(n.add(p),()=>n.delete(p)),destroy:()=>{(Ch?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},d=t=e(r,o,c);return c},Nh=e=>e?Rd(e):Rd;var gp={exports:{}},xp={},vp={exports:{}},yp={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ir=v;function Ih(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Eh=typeof Object.is=="function"?Object.is:Ih,Ph=Ir.useState,Oh=Ir.useEffect,Mh=Ir.useLayoutEffect,Dh=Ir.useDebugValue;function Rh(e,t){var n=t(),r=Ph({inst:{value:n,getSnapshot:t}}),o=r[0].inst,s=r[1];return Mh(function(){o.value=n,o.getSnapshot=t,ml(o)&&s({inst:o})},[e,n,t]),Oh(function(){return ml(o)&&s({inst:o}),e(function(){ml(o)&&s({inst:o})})},[e]),Dh(n),n}function ml(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Eh(e,n)}catch{return!0}}function Ah(e,t){return t()}var Lh=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Ah:Rh;yp.useSyncExternalStore=Ir.useSyncExternalStore!==void 0?Ir.useSyncExternalStore:Lh;vp.exports=yp;var Th=vp.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ii=v,Jh=Th;function Fh(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var _h=typeof Object.is=="function"?Object.is:Fh,zh=Jh.useSyncExternalStore,Hh=Ii.useRef,$h=Ii.useEffect,Bh=Ii.useMemo,Uh=Ii.useDebugValue;xp.useSyncExternalStoreWithSelector=function(e,t,n,r,o){var s=Hh(null);if(s.current===null){var l={hasValue:!1,value:null};s.current=l}else l=s.current;s=Bh(function(){function c(h){if(!d){if(d=!0,p=h,h=r(h),o!==void 0&&l.hasValue){var y=l.value;if(o(y,h))return u=y}return u=h}if(y=u,_h(p,h))return y;var b=r(h);return o!==void 0&&o(y,b)?(p=h,y):(p=h,u=b)}var d=!1,p,u,f=n===void 0?null:n;return[function(){return c(t())},f===null?void 0:function(){return c(f())}]},[t,n,r,o]);var a=zh(e,s[0],s[1]);return $h(function(){l.hasValue=!0,l.value=a},[a]),Uh(a),a};gp.exports=xp;var Wh=gp.exports;const Vh=nu(Wh),bp={},{useDebugValue:Kh}=ye,{useSyncExternalStoreWithSelector:Qh}=Vh;let Ad=!1;const Yh=e=>e;function Gh(e,t=Yh,n){(bp?"production":void 0)!=="production"&&n&&!Ad&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Ad=!0);const r=Qh(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Kh(r),r}const Ld=e=>{(bp?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?Nh(e):e,n=(r,o)=>Gh(t,r,o);return Object.assign(n,t),n},Xh=e=>e?Ld(e):Ld,Td="journey-mapper-state",hl={async getState(){const e=localStorage.getItem(Td);return e?JSON.parse(e):null},async saveState(e){localStorage.setItem(Td,JSON.stringify(e))}};let fs;const qh=new Uint8Array(16);function Zh(){if(!fs&&(fs=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!fs))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return fs(qh)}const We=[];for(let e=0;e<256;++e)We.push((e+256).toString(16).slice(1));function eg(e,t=0){return We[e[t+0]]+We[e[t+1]]+We[e[t+2]]+We[e[t+3]]+"-"+We[e[t+4]]+We[e[t+5]]+"-"+We[e[t+6]]+We[e[t+7]]+"-"+We[e[t+8]]+We[e[t+9]]+"-"+We[e[t+10]]+We[e[t+11]]+We[e[t+12]]+We[e[t+13]]+We[e[t+14]]+We[e[t+15]]}const tg=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Jd={randomUUID:tg};function ng(e,t,n){if(Jd.randomUUID&&!e)return Jd.randomUUID();e=e||{};const r=e.random||(e.rng||Zh)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,eg(r)}function jt(){return ng()}function se(){return new Date().toISOString()}function rg(e){const t=e.trim();if(!t)return null;try{let n=t;return/^https?:\/\//i.test(n)||(n="https://"+n),new URL(n).hostname.replace(/^www\./,"")||null}catch{return null}}const og=["High","Medium","Low"];function mc(e){if(!e||!e.trim())return[];try{const t=JSON.parse(e);if(Array.isArray(t))return t.filter(n=>n&&typeof n=="object"&&(typeof n.name=="string"||typeof n.text=="string")).map(n=>{let r="Functional";return n.tag==="Social Emotional"?r="Social":(n.tag==="Social"||n.tag==="Emotional")&&(r=n.tag),{name:typeof n.name=="string"&&n.name.trim()?n.name.trim():typeof n.text=="string"?n.text.trim():"Untitled job",description:typeof n.description=="string"?n.description:void 0,tag:r,struggles:Array.isArray(n.struggles)?n.struggles.filter(s=>typeof s=="string"):void 0,functionalDimensions:Array.isArray(n.functionalDimensions)?n.functionalDimensions.filter(s=>typeof s=="string"):void 0,socialDimensions:Array.isArray(n.socialDimensions)?n.socialDimensions.filter(s=>typeof s=="string"):void 0,emotionalDimensions:Array.isArray(n.emotionalDimensions)?n.emotionalDimensions.filter(s=>typeof s=="string"):void 0,solutionsAndWorkarounds:typeof n.solutionsAndWorkarounds=="string"?n.solutionsAndWorkarounds:void 0,isPriority:!!n.isPriority}})}catch{return e.split(/\n|;|/).map(n=>n.trim()).filter(Boolean).map(n=>({name:n,tag:"Functional"}))}return[]}function kp(e){return e==null?[]:e.split(/\n/).map(t=>t.trim())}function Tt(e){if(!e||!e.trim())return[];try{const t=JSON.parse(e);if(Array.isArray(t))return t.filter(n=>n&&typeof n.text=="string"&&og.includes(n.tag))}catch{return e.split(/\n|;|/).map(n=>n.trim()).filter(Boolean).map(n=>({text:n,tag:"Medium"}))}return[]}function ps(e){return JSON.stringify(e)}const sg=["High","Medium","Low"];function Er(e){if(!e||!e.trim())return[];try{const t=JSON.parse(e);if(Array.isArray(t))return t.filter(n=>n&&typeof n=="object"&&"name"in n&&typeof n.name=="string").map(n=>{const r=sg.includes(n.tag)?n.tag:"Medium";return{id:typeof n.id=="string"?n.id:jt(),name:n.name,tag:r,description:typeof n.description=="string"?n.description:void 0,pointOfDifferentiation:typeof n.pointOfDifferentiation=="string"?n.pointOfDifferentiation:void 0,criticalAssumptions:typeof n.criticalAssumptions=="string"?n.criticalAssumptions:void 0,isPriority:!!n.isPriority}})}catch{return e.split(/\n|;|/).map(n=>n.trim()).filter(Boolean).map((n,r)=>({id:`legacy-${r}-${n.slice(0,20)}`,name:n,tag:"Medium"}))}return[]}function ig(e){return JSON.stringify(e)}function Ms(e){if(!e||!e.trim())return[];try{const t=JSON.parse(e);if(Array.isArray(t))return t.filter(n=>n&&typeof n=="object"&&"label"in n&&"url"in n).map(n=>({id:typeof n.id=="string"?n.id:jt(),label:String(n.label).trim()||"Document",url:String(n.url).trim()}))}catch{}return[]}function Fd(e){return JSON.stringify(e)}function fo(e,t,n){const r=Tt(e.struggles),o=Tt(e.internalStruggles??""),s=t??Er(e.opportunities),l=n??mc(e.customerJobs??"");let a=50;for(const u of r)u.tag==="High"?a-=12:u.tag==="Medium"?a-=6:a-=2;for(const u of o)u.tag==="High"?a-=10:u.tag==="Medium"?a-=5:a-=2;for(const u of s){const f=u.tag??u.priority;f==="High"?a+=10:f==="Medium"?a+=5:a+=2}const c=l.length||1,p=l.filter(u=>u.tag==="Social"||u.tag==="Emotional").length/c*25;return a+=p,Math.max(0,Math.min(100,Math.round(a)))}const Y="2025-01-15T10:00:00.000Z";function re(e){return{id:e.id,journeyId:e.journeyId,order:e.order,title:e.title??"",description:e.description??"",imageUrl:"",struggles:e.struggles??"",internalStruggles:e.internalStruggles??"",relatedDocuments:e.relatedDocuments??"",opportunities:e.opportunities??"",frontStageActions:e.frontStageActions??"",backStageActions:e.backStageActions??"",systems:e.systems??"",relatedProcesses:e.relatedProcesses??"",systemsTechnologiesChannels:e.systemsTechnologiesChannels??"",jobIds:e.jobIds??[],customRowValues:{},createdAt:Y,updatedAt:Y}}function lg(e,t,n){const r=[],o=e.map(s=>{const l=t.find(y=>y.id===s.journeyId),a=l?n.find(y=>y.id===l.projectId):null,c=a==null?void 0:a.clientId;if(!c)return{...s,jobIds:s.jobIds??[],customerJobs:void 0};const d=mc(s.customerJobs??""),p=d.slice(0,Math.ceil(d.length/2)),u=[];for(let y=0;y<p.length;y++){const b=p[y],k=`demo-job-${s.id}-${y}`;u.push(k),r.push({id:k,clientId:c,name:b.name??b.text??"Untitled job",description:b.description,tag:b.tag??"Functional",priority:b.isPriority?"High":"Medium",insightIds:[],struggles:b.struggles,functionalDimensions:b.functionalDimensions,socialDimensions:b.socialDimensions,emotionalDimensions:b.emotionalDimensions,solutionsAndWorkarounds:b.solutionsAndWorkarounds,isPriority:b.isPriority??!1,createdAt:Y,updatedAt:Y})}const{customerJobs:f,...h}=s;return{...h,jobIds:u,customRowValues:s.customRowValues??{}}});return{jobs:r,phasesWithJobIds:o}}function ag(e,t,n){const r=[],o="Horizon 1",s="Horizon 2",l="Horizon 3";let a=0;for(const c of e){const d=t.find(f=>f.id===c.journeyId),p=d?n.find(f=>f.id===d.projectId):null;if(!d||!p)continue;Er(c.opportunities??"").forEach(f=>{r.push({id:f.id,clientId:p.clientId,projectId:p.id,journeyId:d.id,phaseId:c.id,stage:a<4?o:a<8?s:a<12?l:"Backlog",stageOrder:a<4?a:a<8?a-4:a<12?a-8:0,name:f.name,priority:f.tag||"High",description:f.description??"",pointOfDifferentiation:f.pointOfDifferentiation??"",criticalAssumptions:f.criticalAssumptions??"",linkedJobIds:[],isPriority:!!f.isPriority,createdAt:Y,updatedAt:Y}),a++})}return r}function gl(){const e=[{id:"demo-client-nzicc",name:"NZICC",description:"New Zealand International Convention Centre. World-class events and conferences in Auckland.",website:"https://www.nzicc.co.nz",logoUrl:"https://logo.clearbit.com/nzicc.co.nz",createdAt:Y,updatedAt:Y},{id:"demo-client-rocketlab",name:"Rocket Lab",description:"Private aerospace manufacturer and small satellite launch provider.",website:"https://www.rocketlabusa.com",logoUrl:"https://logo.clearbit.com/rocketlabusa.com",createdAt:Y,updatedAt:Y}],t=[{id:"demo-project-attendee",clientId:"demo-client-nzicc",name:"Attendee Experience",description:"End-to-end journey for conference and event attendees",createdAt:Y,updatedAt:Y},{id:"demo-project-venueops",clientId:"demo-client-nzicc",name:"Venue Operations",description:"Day-to-day venue management and operations",createdAt:Y,updatedAt:Y},{id:"demo-project-exhibitor",clientId:"demo-client-nzicc",name:"Exhibitor Experience",description:"Exhibitor journey from booking to show day",createdAt:Y,updatedAt:Y},{id:"demo-project-corporate",clientId:"demo-client-nzicc",name:"Corporate Events",description:"Corporate meeting and event booking experience",createdAt:Y,updatedAt:Y},{id:"demo-project-humanpayload",clientId:"demo-client-rocketlab",name:"Human Payload",description:"Crew selection and readiness for human spaceflight",createdAt:Y,updatedAt:Y},{id:"demo-project-satellite",clientId:"demo-client-rocketlab",name:"Satellite Operations",description:"Customer launch operations and mission management",createdAt:Y,updatedAt:Y},{id:"demo-project-customersupport",clientId:"demo-client-rocketlab",name:"Customer Support",description:"Post-sale customer onboarding and support",createdAt:Y,updatedAt:Y},{id:"demo-project-rd",clientId:"demo-client-rocketlab",name:"R&D Partnerships",description:"Research collaboration and technology development",createdAt:Y,updatedAt:Y}],n=[{id:"demo-journey-conference",projectId:"demo-project-attendee",name:"Attend Conference",description:"From first awareness to post-event engagement",rowOrder:void 0,customRows:[],createdAt:Y,updatedAt:Y},{id:"demo-journey-concert",projectId:"demo-project-attendee",name:"Attend Concert",description:"Live music event experience lifecycle",rowOrder:void 0,customRows:[],createdAt:Y,updatedAt:Y},{id:"demo-journey-facilitymgmt",projectId:"demo-project-venueops",name:"Facility Management",description:"Venue operations and maintenance workflow",rowOrder:void 0,customRows:[],createdAt:Y,updatedAt:Y},{id:"demo-journey-exhibitor",projectId:"demo-project-exhibitor",name:"Exhibitor Journey",description:"From stand booking to event day",rowOrder:void 0,customRows:[],createdAt:Y,updatedAt:Y},{id:"demo-journey-corporatebook",projectId:"demo-project-corporate",name:"Corporate Booking",description:"Meeting and event inquiry to confirmation",rowOrder:void 0,customRows:[],createdAt:Y,updatedAt:Y},{id:"demo-journey-astronaut",projectId:"demo-project-humanpayload",name:"Application for Astronaut",description:"Candidate journey from application to selection",rowOrder:void 0,customRows:[],createdAt:Y,updatedAt:Y},{id:"demo-journey-medical",projectId:"demo-project-humanpayload",name:"Medical Check",description:"Medical evaluation and clearance for crew",rowOrder:void 0,customRows:[],createdAt:Y,updatedAt:Y},{id:"demo-journey-launchops",projectId:"demo-project-satellite",name:"Launch Operations",description:"Mission integration through launch",rowOrder:void 0,customRows:[],createdAt:Y,updatedAt:Y},{id:"demo-journey-onboarding",projectId:"demo-project-customersupport",name:"Customer Onboarding",description:"New customer setup and handover",rowOrder:void 0,customRows:[],createdAt:Y,updatedAt:Y},{id:"demo-journey-collab",projectId:"demo-project-rd",name:"Research Collaboration",description:"Partner engagement and joint development",rowOrder:void 0,customRows:[],createdAt:Y,updatedAt:Y}],r=[re({id:"demo-phase-conf-1",journeyId:"demo-journey-conference",order:1,title:"Discovery & Consideration",description:"Potential attendee becomes aware of the event and evaluates whether to attend.",customerJobs:JSON.stringify([{text:"Understand event value and relevance",tag:"Functional",isPriority:!0},{text:"Check dates and fit with schedule",tag:"Functional"},{text:"Feel excited about the experience",tag:"Emotional",isPriority:!0}]),frontStageActions:`Search for events
Browse NZICC website
Read programme
Compare with other events
Check speaker lineup`,systemsTechnologiesChannels:`Google Search
NZICC website
Email newsletters
LinkedIn / social`,struggles:JSON.stringify([{text:"Information scattered across sources",tag:"High"},{text:"Unclear pricing and what's included",tag:"Medium"}]),internalStruggles:JSON.stringify([{text:"Content spread across multiple systems",tag:"High"},{text:"Slow approval process for programme updates",tag:"Medium"}]),opportunities:JSON.stringify([{id:"opp-conf-1a",name:"Unified event hub",tag:"High",isPriority:!0},{id:"opp-conf-1b",name:"Personalised recommendations",tag:"Medium"}]),relatedDocuments:JSON.stringify([{id:"doc-conf-1a",label:"Event Programme (SharePoint)",url:"https://contoso.sharepoint.com/sites/events/programme-2025"},{id:"doc-conf-1b",label:"Discovery Phase Confluence",url:"https://nzicc.atlassian.net/wiki/spaces/EVENTS/pages/discovery-phase"}]),backStageActions:`Content team updates programme
Marketing runs campaigns
Sales handles enquiries`,systems:`CMS
CRM
Email platform`,relatedProcesses:`Event programming
Sponsorship sales
Venue operations`}),re({id:"demo-phase-conf-2",journeyId:"demo-journey-conference",order:2,title:"Registration & Booking",description:"Committing to attend and completing registration and payment.",customerJobs:JSON.stringify([{text:"Secure a place quickly",tag:"Functional",isPriority:!0},{text:"Choose the right ticket type",tag:"Functional"},{text:"Get confirmation and peace of mind",tag:"Emotional"}]),frontStageActions:`Select ticket type
Enter details
Pay
Receive confirmation
Add to calendar`,systemsTechnologiesChannels:`Event registration platform
Payment gateway
Email confirmation`,struggles:JSON.stringify([{text:"Form length and friction",tag:"Medium"},{text:"Unclear refund policy",tag:"Low"}]),internalStruggles:JSON.stringify([{text:"Integration gaps between reg platform and CRM",tag:"High"}]),opportunities:JSON.stringify([{id:"opp-conf-2a",name:"One-click rebook for returning attendees",tag:"High"},{id:"opp-conf-2b",name:"Group booking flow",tag:"Medium"}]),relatedDocuments:JSON.stringify([{id:"doc-conf-2a",label:"Registration Jira Epic",url:"https://nzicc.atlassian.net/browse/EVT-142"},{id:"doc-conf-2b",label:"Refund Policy (SharePoint)",url:"https://contoso.sharepoint.com/sites/events/policies/refund"}]),backStageActions:`Process payments
Issue tickets
Update attendee list
Handle exceptions`,systems:`Registration system
Finance / reconciliation`,relatedProcesses:`Finance
Customer support`}),re({id:"demo-phase-conf-3",journeyId:"demo-journey-conference",order:3,title:"Pre-Event Prep",description:"Between booking and arrival: logistics, agenda, and expectations.",customerJobs:JSON.stringify([{text:"Plan travel and accommodation",tag:"Functional"},{text:"Build my agenda",tag:"Functional",isPriority:!0},{text:"Connect with other attendees",tag:"Social",isPriority:!0}]),frontStageActions:`Receive pre-event emails
Download app
Select sessions
Book workshops
View venue map`,systemsTechnologiesChannels:`Event app
Email
Web portal`,struggles:JSON.stringify([{text:"Too many emails",tag:"Medium"},{text:"Session clashes",tag:"High"}]),opportunities:JSON.stringify([{id:"opp-conf-3a",name:"Smart agenda builder with conflict detection",tag:"High"}]),backStageActions:`Send comms
Update programme
Manage waitlists
Brief speakers`,systems:`Event app backend
Email automation`,relatedProcesses:`Programme management
Logistics`}),re({id:"demo-phase-conf-4",journeyId:"demo-journey-conference",order:4,title:"At the Conference",description:"On-site experience: sessions, networking, and logistics.",customerJobs:JSON.stringify([{text:"Learn from sessions",tag:"Functional",isPriority:!0},{text:"Network effectively",tag:"Social"},{text:"Feel welcome and oriented",tag:"Emotional",isPriority:!0}]),frontStageActions:`Arrive and check in
Navigate venue
Attend sessions
Use app for updates
Visit expo
Network`,systemsTechnologiesChannels:`Event app
Badge system
Signage
WiFi`,struggles:JSON.stringify([{text:"Finding rooms and people",tag:"Medium"},{text:"Queue times for food",tag:"Low"}]),opportunities:JSON.stringify([{id:"opp-conf-4a",name:"Real-time wayfinding and meet-up",tag:"High"}]),backStageActions:`Run registration desk
AV and room support
Catering
Safety and access`,systems:`Badge / access
Event app
Catering systems`,relatedProcesses:`Venue ops
AV
Catering`}),re({id:"demo-phase-conf-5",journeyId:"demo-journey-conference",order:5,title:"Follow-up & Engagement",description:"After the event: content, connections, and next steps.",customerJobs:JSON.stringify([{text:"Access session content",tag:"Functional"},{text:"Stay in touch with contacts",tag:"Social"},{text:"Decide on next year",tag:"Functional"}]),frontStageActions:`Receive follow-up email
Download slides
Connect on LinkedIn
Complete survey
Consider next event`,systemsTechnologiesChannels:`Email
Content portal
Survey tool
LinkedIn`,struggles:JSON.stringify([{text:"Content arrives late",tag:"Medium"}]),opportunities:JSON.stringify([{id:"opp-conf-5a",name:"Post-event community and content hub",tag:"High"}]),backStageActions:`Collate and publish content
Send survey
Analyse feedback
Plan next event`,systems:`CMS
Survey platform
CRM`,relatedProcesses:`Marketing
Content`}),re({id:"demo-phase-concert-1",journeyId:"demo-journey-concert",order:1,title:"Discovery",description:"Hearing about the concert and deciding to go.",customerJobs:JSON.stringify([{text:"Find out about the event",tag:"Functional"},{text:"Check if friends are interested",tag:"Social"},{text:"Get excited about the night",tag:"Emotional"}]),frontStageActions:`See social or ad
Check artist and venue
Look up date and time
Share with friends`,systemsTechnologiesChannels:`Social media
Spotify / artist pages
Event listing sites`,struggles:JSON.stringify([{text:"Missing presale or early bird",tag:"Medium"}]),opportunities:JSON.stringify([{id:"opp-concert-1a",name:"Artist-fan notification for NZ dates",tag:"High"}]),backStageActions:`Promote event
Manage artist relations
Set onsale dates`,systems:`Ticketing platform
Marketing`,relatedProcesses:`Programming
Marketing`}),re({id:"demo-phase-concert-2",journeyId:"demo-journey-concert",order:2,title:"Ticket Purchase",description:"Buying tickets before they sell out.",customerJobs:JSON.stringify([{text:"Get tickets at a fair price",tag:"Functional"},{text:"Sit with my group",tag:"Social"}]),frontStageActions:`Join queue at onsale
Select seats or tier
Pay
Receive e-tickets`,systemsTechnologiesChannels:`Ticketmaster / Eventfinda
Payment
Email`,struggles:JSON.stringify([{text:"Queue drops or timeouts",tag:"High"},{text:"Resale and scalping",tag:"High"}]),opportunities:JSON.stringify([{id:"opp-concert-2a",name:"Fair queue and anti-scalping",tag:"High"}]),backStageActions:`Run onsale
Manage inventory
Fraud checks`,systems:`Ticketing
Payments`,relatedProcesses:`Finance
IT`}),re({id:"demo-phase-concert-3",journeyId:"demo-journey-concert",order:3,title:"Pre-Show",description:"Between purchase and show night.",customerJobs:JSON.stringify([{text:"Plan transport and meet-up",tag:"Functional"},{text:"Know what to expect",tag:"Emotional"}]),frontStageActions:`Receive reminder emails
Check door time and rules
Plan route
Coordinate with group`,systemsTechnologiesChannels:`Email
Website
Maps`,struggles:JSON.stringify([]),opportunities:JSON.stringify([{id:"opp-concert-3a",name:"Journey and parking info in one place",tag:"Medium"}]),backStageActions:`Send comms
Finalise run sheet
Brief staff`,systems:`Email
Venue ops`,relatedProcesses:"Operations"}),re({id:"demo-phase-concert-4",journeyId:"demo-journey-concert",order:4,title:"At the Venue",description:"Arrival, entry, and the live experience.",customerJobs:JSON.stringify([{text:"Get in smoothly",tag:"Functional"},{text:"Enjoy the performance",tag:"Emotional"},{text:"Feel safe",tag:"Emotional"}]),frontStageActions:`Arrive
Queue if needed
Scan ticket
Find seat or spot
Buy drinks/merch
Watch show`,systemsTechnologiesChannels:`Scanning
POS
Venue WiFi`,struggles:JSON.stringify([{text:"Long entry or bar queues",tag:"Medium"}]),opportunities:JSON.stringify([{id:"opp-concert-4a",name:"Cashless and faster F&B",tag:"Medium"}]),backStageActions:`Doors and security
F&B
Artist liaison
Safety`,systems:`Access control
POS
CCTV`,relatedProcesses:`Security
F&B`}),re({id:"demo-phase-concert-5",journeyId:"demo-journey-concert",order:5,title:"Post-Experience",description:"After the show: getting home and remembering the night.",customerJobs:JSON.stringify([{text:"Get home safely",tag:"Functional"},{text:"Relive and share the experience",tag:"Social"}]),frontStageActions:`Exit venue
Travel home
Post on social
Sign up for next announcements`,systemsTechnologiesChannels:`Social
Email signup
Rideshare`,struggles:JSON.stringify([]),opportunities:JSON.stringify([{id:"opp-concert-5a",name:"Post-show photo and fan content",tag:"Low"}]),backStageActions:`Venue clear-down
Debrief
Marketing capture`,systems:`CRM
Email`,relatedProcesses:"Marketing"}),re({id:"demo-phase-astro-1",journeyId:"demo-journey-astronaut",order:1,title:"Application Submission",description:"Candidate submits initial application and supporting materials.",customerJobs:JSON.stringify([{text:"Present my qualifications clearly",tag:"Functional",isPriority:!0},{text:"Understand what is required",tag:"Functional"},{text:"Feel my application is fairly considered",tag:"Emotional",isPriority:!0}]),frontStageActions:`Read criteria and FAQ
Prepare CV and cover
Complete application form
Submit before deadline`,systemsTechnologiesChannels:`Career portal
Email
Document upload`,struggles:JSON.stringify([{text:"Unclear criteria or process",tag:"High"},{text:"Technical issues with upload",tag:"Medium"}]),internalStruggles:JSON.stringify([{text:"ATS configuration limits custom fields",tag:"Medium"},{text:"Legal review bottleneck for criteria",tag:"High"}]),opportunities:JSON.stringify([{id:"opp-astro-1a",name:"Clear rubric and example applications",tag:"High",isPriority:!0}]),relatedDocuments:JSON.stringify([{id:"doc-astro-1a",label:"Application Criteria (Confluence)",url:"https://rocketlab.atlassian.net/wiki/spaces/CREW/pages/application-criteria"},{id:"doc-astro-1b",label:"Recruitment Jira Board",url:"https://rocketlab.atlassian.net/jira/software/projects/CREW/boards/12"},{id:"doc-astro-1c",label:"HR Onboarding SharePoint",url:"https://rocketlab.sharepoint.com/sites/hr/recruitment"}]),backStageActions:`Publish criteria
Support applicants
Triage submissions`,systems:`ATS
HR systems`,relatedProcesses:`Recruitment
Legal`}),re({id:"demo-phase-astro-2",journeyId:"demo-journey-astronaut",order:2,title:"Initial Screening",description:"Review of applications and first-round decisions.",customerJobs:JSON.stringify([{text:"Know my status",tag:"Functional"},{text:"Receive respectful communication",tag:"Emotional"}]),frontStageActions:`Receive acknowledgment
Check portal for updates
Respond to any requests for info`,systemsTechnologiesChannels:`Email
Applicant portal`,struggles:JSON.stringify([{text:"Long wait without feedback",tag:"High"}]),opportunities:JSON.stringify([{id:"opp-astro-2a",name:"Timeline and status updates",tag:"High",isPriority:!0}]),backStageActions:`Review applications
Shortlist
Send updates
Schedule next round`,systems:`ATS
Calendar`,relatedProcesses:`Recruitment
Medical liaison`}),re({id:"demo-phase-astro-3",journeyId:"demo-journey-astronaut",order:3,title:"Assessment Centre",description:"In-person or remote assessments: technical, physical, and behavioural.",customerJobs:JSON.stringify([{text:"Demonstrate my capabilities",tag:"Functional"},{text:"Understand what is being assessed",tag:"Functional"},{text:"Manage stress and perform",tag:"Emotional"}]),frontStageActions:`Receive invite and brief
Travel if required
Complete assessments
Interviews and exercises`,systemsTechnologiesChannels:`Email
Video calls
Assessment platform`,struggles:JSON.stringify([{text:"Unclear assessment format",tag:"Medium"},{text:"Logistics and travel",tag:"Medium"}]),opportunities:JSON.stringify([{id:"opp-astro-3a",name:"Structured prep and expectations",tag:"High",isPriority:!0}]),backStageActions:`Design and run assessments
Brief assessors
Collate scores
Medical liaison`,systems:`Assessment tools
Scheduling`,relatedProcesses:`Medical
Safety`}),re({id:"demo-phase-astro-4",journeyId:"demo-journey-astronaut",order:4,title:"Selection & Offer",description:"Final selection and offer of a place in the programme.",customerJobs:JSON.stringify([{text:"Receive a clear decision",tag:"Functional"},{text:"Understand next steps if selected",tag:"Functional"},{text:"Receive feedback if not",tag:"Emotional"}]),frontStageActions:`Receive call or email
Review offer and terms
Accept or decline
Complete paperwork`,systemsTechnologiesChannels:`Phone
Email
Contract platform`,struggles:JSON.stringify([{text:"Uncertainty during final decision",tag:"High"}]),opportunities:JSON.stringify([{id:"opp-astro-4a",name:"Transparent timeline and feedback",tag:"High"}]),backStageActions:`Panel decision
Medical sign-off
Legal and contracts
Onboarding prep`,systems:`HR
Legal
Medical`,relatedProcesses:`Legal
Medical`}),re({id:"demo-phase-astro-5",journeyId:"demo-journey-astronaut",order:5,title:"Pre-Flight Onboarding",description:"From offer acceptance to readiness for training and flight.",customerJobs:JSON.stringify([{text:"Complete all requirements",tag:"Functional"},{text:"Build trust with team",tag:"Social"},{text:"Feel prepared and supported",tag:"Emotional"}]),frontStageActions:`Complete forms and checks
Attend orientation
Begin training modules
Meet team and instructors`,systemsTechnologiesChannels:`Learning platform
Scheduling
Comms`,struggles:JSON.stringify([{text:"Volume of admin and training",tag:"Medium"}]),opportunities:JSON.stringify([{id:"opp-astro-5a",name:"Single onboarding checklist and support",tag:"Medium"}]),backStageActions:`Run onboarding
Coordinate medical and training
Plan first flight phase`,systems:`LMS
HR
Medical`,relatedProcesses:`Training
Medical`}),re({id:"demo-phase-med-1",journeyId:"demo-journey-medical",order:1,title:"Scheduling",description:"Candidate or crew schedules the medical evaluation.",customerJobs:JSON.stringify([{text:"Book at a time that works",tag:"Functional"},{text:"Know what to bring and expect",tag:"Functional"}]),frontStageActions:`Receive referral or instruction
Contact facility or portal
Choose date and time
Receive confirmation`,systemsTechnologiesChannels:`Phone
Booking portal
Email`,struggles:JSON.stringify([{text:"Limited availability",tag:"Medium"}]),opportunities:JSON.stringify([{id:"opp-med-1a",name:"Self-serve booking and prep pack",tag:"High"}]),backStageActions:`Manage capacity
Send confirmations
Prepare packs`,systems:`Scheduling
CRM`,relatedProcesses:"Clinical admin"}),re({id:"demo-phase-med-2",journeyId:"demo-journey-medical",order:2,title:"Pre-Visit Preparation",description:"Instructions, forms, and readiness before the appointment.",customerJobs:JSON.stringify([{text:"Complete forms correctly",tag:"Functional"},{text:"Arrive prepared",tag:"Functional"}]),frontStageActions:`Receive prep pack
Complete health questionnaire
Fast or adjust meds if required
Plan travel`,systemsTechnologiesChannels:`Email
Portal or PDF forms`,struggles:JSON.stringify([{text:"Unclear instructions",tag:"Medium"}]),opportunities:JSON.stringify([{id:"opp-med-2a",name:"Digital forms and clear checklist",tag:"Medium"}]),backStageActions:`Send prep materials
Review submissions
Prepare for appointment`,systems:`Forms
EHR`,relatedProcesses:"Clinical"}),re({id:"demo-phase-med-3",journeyId:"demo-journey-medical",order:3,title:"At the Facility",description:"Day of the medical: checks, tests, and consultations.",customerJobs:JSON.stringify([{text:"Complete all required checks",tag:"Functional"},{text:"Understand what is being done",tag:"Functional"},{text:"Feel respected and safe",tag:"Emotional"}]),frontStageActions:`Arrive and check in
Vitals and history
Physical exam
Lab and imaging
Consultation with physician`,systemsTechnologiesChannels:`Check-in
Lab systems
EHR`,struggles:JSON.stringify([{text:"Long wait times",tag:"Medium"},{text:"Unclear next steps",tag:"Low"}]),opportunities:JSON.stringify([{id:"opp-med-3a",name:"Clear flow and estimated times",tag:"Medium"}]),backStageActions:`Run clinic
Run labs
Document in EHR
Coordinate with flight surgeon`,systems:`EHR
Lab
Imaging`,relatedProcesses:"Aviation medicine"}),re({id:"demo-phase-med-4",journeyId:"demo-journey-medical",order:4,title:"Results & Review",description:"Results are compiled and reviewed; findings communicated.",customerJobs:JSON.stringify([{text:"Receive clear results",tag:"Functional"},{text:"Understand implications",tag:"Functional"},{text:"Know what happens next",tag:"Emotional"}]),frontStageActions:`Receive results (portal or call)
Follow-up if needed
Discuss with physician`,systemsTechnologiesChannels:`Portal
Phone
Secure messaging`,struggles:JSON.stringify([{text:"Delay in results or communication",tag:"High"}]),opportunities:JSON.stringify([{id:"opp-med-4a",name:"Structured results and next-step communication",tag:"High"}]),backStageActions:`Review results
Flight surgeon sign-off
Report to programme
Document`,systems:`EHR
Reporting`,relatedProcesses:`Aviation medicine
Programme`}),re({id:"demo-phase-fac-1",journeyId:"demo-journey-facilitymgmt",order:1,title:"Shift Handover & Briefing",description:"Operations team receives handover and priorities for the day.",customerJobs:JSON.stringify([{text:"Understand today's events and priorities",tag:"Functional"},{text:"Know any issues carried over",tag:"Functional"},{text:"Feel confident to start the shift",tag:"Emotional"}]),frontStageActions:`Attend handover meeting
Review run sheets
Check incident log
Receive keys and radios`,systemsTechnologiesChannels:`Handover system
Walkie-talkie
Event management portal`,struggles:JSON.stringify([{text:"Incomplete handover documentation",tag:"Medium"},{text:"Conflicting priorities across events",tag:"High"}]),internalStruggles:JSON.stringify([{text:"System doesn't link events to space requirements",tag:"High"}]),opportunities:JSON.stringify([{id:"opp-fac-1a",name:"Unified handover checklist and run sheet",tag:"High"}]),backStageActions:`Conduct handover
Update incident log
Brief security and catering`,systems:`Facility management
CMMS`,relatedProcesses:`Operations
Security`}),re({id:"demo-phase-fac-2",journeyId:"demo-journey-facilitymgmt",order:2,title:"Pre-Event Inspections",description:"Walk-through and checks before doors open.",customerJobs:JSON.stringify([{text:"Verify all spaces are ready",tag:"Functional"},{text:"Identify and escalate issues",tag:"Functional"}]),frontStageActions:`Walk venue zones
Check HVAC and lighting
Verify signage and wayfinding
Test access and egress`,systemsTechnologiesChannels:`Inspection app
Walkie-talkie
BMS`,struggles:JSON.stringify([{text:"Inspection findings not linked to work orders",tag:"Medium"}]),opportunities:JSON.stringify([{id:"opp-fac-2a",name:"Mobile inspection with photo evidence and auto-work order",tag:"High"}]),backStageActions:`Log defects
Create work orders
Coordinate with vendors`,systems:`CMMS
BMS`,relatedProcesses:`Maintenance
Housekeeping`}),re({id:"demo-phase-fac-3",journeyId:"demo-journey-facilitymgmt",order:3,title:"Event In Progress",description:"Ongoing support during the event.",customerJobs:JSON.stringify([{text:"Respond to incidents quickly",tag:"Functional"},{text:"Keep event running smoothly",tag:"Functional"}]),frontStageActions:`Monitor venue
Respond to calls
Coordinate with event manager
Handle ad-hoc requests`,systemsTechnologiesChannels:`Radio
Incident system
Event dashboard`,struggles:JSON.stringify([{text:"Multiple channels for reporting issues",tag:"Medium"},{text:"Slow response to non-urgent requests",tag:"Low"}]),opportunities:JSON.stringify([{id:"opp-fac-3a",name:"Single incident and request channel",tag:"Medium"}]),backStageActions:`Log incidents
Dispatch team
Update run sheet`,systems:`Incident management
Event ops`,relatedProcesses:`Safety
Catering`}),re({id:"demo-phase-fac-4",journeyId:"demo-journey-facilitymgmt",order:4,title:"Post-Event & Close-Out",description:"Event wrap-up and preparation for next day.",customerJobs:JSON.stringify([{text:"Close out event cleanly",tag:"Functional"},{text:"Document issues for handover",tag:"Functional"}]),frontStageActions:`Secure venue
Complete close-out checklist
Document incidents
Hand over to next shift`,systemsTechnologiesChannels:`Close-out checklist
Incident log`,struggles:JSON.stringify([{text:"Incomplete close-out when running late",tag:"Medium"}]),opportunities:JSON.stringify([{id:"opp-fac-4a",name:"Digital close-out with mandatory sign-off",tag:"Medium"}]),backStageActions:`Update handover notes
Schedule follow-up work
Brief next shift`,systems:`Handover system
CMMS`,relatedProcesses:"Operations"}),re({id:"demo-phase-exh-1",journeyId:"demo-journey-exhibitor",order:1,title:"Stand Booking & Contract",description:"Exhibitor selects space and completes booking.",customerJobs:JSON.stringify([{text:"Find the right stand location",tag:"Functional"},{text:"Understand costs and inclusions",tag:"Functional"},{text:"Secure a good spot before it's gone",tag:"Emotional"}]),frontStageActions:`Browse floor plan
Select stand package
Submit application
Sign contract
Pay deposit`,systemsTechnologiesChannels:`Exhibitor portal
Floor plan
Email`,struggles:JSON.stringify([{text:"Unclear pricing and package options",tag:"High"},{text:"Floor plan hard to interpret",tag:"Medium"}]),internalStruggles:JSON.stringify([{text:"Manual contract generation delays",tag:"Medium"}]),opportunities:JSON.stringify([{id:"opp-exh-1a",name:"Interactive floor plan with real-time availability",tag:"High"},{id:"opp-exh-1b",name:"Clear package comparison and e-sign",tag:"Medium"}]),backStageActions:`Allocate stands
Generate contracts
Process payments`,systems:`Event management
CRM
Finance`,relatedProcesses:`Sales
Finance`}),re({id:"demo-phase-exh-2",journeyId:"demo-journey-exhibitor",order:2,title:"Pre-Event Planning",description:"Exhibitor plans stand build, services, and logistics.",customerJobs:JSON.stringify([{text:"Order services and utilities",tag:"Functional"},{text:"Understand build rules and deadlines",tag:"Functional"}]),frontStageActions:`Receive exhibitor manual
Order electricity, AV, furniture
Submit stand design for approval
Book contractor access`,systemsTechnologiesChannels:`Exhibitor portal
Email
Phone`,struggles:JSON.stringify([{text:"Multiple forms and portals",tag:"High"},{text:"Unclear deadlines",tag:"Medium"}]),opportunities:JSON.stringify([{id:"opp-exh-2a",name:"Single exhibitor hub with checklist and deadlines",tag:"High"}]),backStageActions:`Review designs
Process orders
Coordinate with contractors`,systems:`Exhibitor management
Orders`,relatedProcesses:`Operations
Health & safety`}),re({id:"demo-phase-exh-3",journeyId:"demo-journey-exhibitor",order:3,title:"Bump-In & Setup",description:"Exhibitor arrives and builds stand.",customerJobs:JSON.stringify([{text:"Get in and out efficiently",tag:"Functional"},{text:"Resolve any last-minute issues",tag:"Functional"}]),frontStageActions:`Check in and collect pass
Navigate to stand
Coordinate with contractors
Test utilities`,systemsTechnologiesChannels:`Check-in desk
Venue signage
Radio`,struggles:JSON.stringify([{text:"Long queues at check-in",tag:"Medium"},{text:"Delayed utility hook-up",tag:"High"}]),opportunities:JSON.stringify([{id:"opp-exh-3a",name:"Pre-registration and express check-in",tag:"Medium"}]),backStageActions:`Process check-ins
Manage load-in schedule
Support exhibitors`,systems:`Access control
Operations`,relatedProcesses:`Security
Contractors`}),re({id:"demo-phase-exh-4",journeyId:"demo-journey-exhibitor",order:4,title:"Show Days",description:"Exhibitor runs stand during the event.",customerJobs:JSON.stringify([{text:"Engage visitors effectively",tag:"Functional"},{text:"Get support when needed",tag:"Functional"}]),frontStageActions:`Staff stand
Engage visitors
Capture leads
Attend sessions`,systemsTechnologiesChannels:`Lead capture app
Event app
Exhibitor lounge`,struggles:JSON.stringify([{text:"Lead capture not integrated with CRM",tag:"Medium"}]),opportunities:JSON.stringify([{id:"opp-exh-4a",name:"Integrated lead capture and analytics",tag:"Medium"}]),backStageActions:`Exhibitor support desk
Venue services
Lead data export`,systems:`Lead capture
CRM`,relatedProcesses:"Operations"}),re({id:"demo-phase-exh-5",journeyId:"demo-journey-exhibitor",order:5,title:"Bump-Out",description:"Exhibitor dismantles and exits.",customerJobs:JSON.stringify([{text:"Dismantle and leave on schedule",tag:"Functional"},{text:"Avoid penalties",tag:"Functional"}]),frontStageActions:`Dismantle stand
Return passes
Exit venue`,systemsTechnologiesChannels:`Bump-out schedule
Check-out`,struggles:JSON.stringify([{text:"Congestion and delays",tag:"Medium"}]),opportunities:JSON.stringify([{id:"opp-exh-5a",name:"Staggered bump-out with real-time status",tag:"Low"}]),backStageActions:`Manage bump-out
Inspect stands
Process final invoices`,systems:`Operations
Finance`,relatedProcesses:"Contractors"}),re({id:"demo-phase-corp-1",journeyId:"demo-journey-corporatebook",order:1,title:"Inquiry & Discovery",description:"Corporate contact explores venue and submits inquiry.",customerJobs:JSON.stringify([{text:"Find suitable spaces for my event",tag:"Functional"},{text:"Get a sense of cost and availability",tag:"Functional"},{text:"Feel the venue matches our brand",tag:"Emotional"}]),frontStageActions:`Browse website
View virtual tour
Submit inquiry form
Receive initial response`,systemsTechnologiesChannels:`NZICC website
Inquiry form
Email`,struggles:JSON.stringify([{text:"Generic response and slow follow-up",tag:"High"},{text:"No availability visibility",tag:"Medium"}]),internalStruggles:JSON.stringify([{text:"Inquiries land in shared inbox",tag:"Medium"}]),opportunities:JSON.stringify([{id:"opp-corp-1a",name:"Instant availability checker and tailored proposal",tag:"High"}]),backStageActions:`Triage inquiries
Check availability
Assign account manager`,systems:`CRM
Booking system`,relatedProcesses:"Sales"}),re({id:"demo-phase-corp-2",journeyId:"demo-journey-corporatebook",order:2,title:"Proposal & Site Visit",description:"Proposal sent; client may visit venue.",customerJobs:JSON.stringify([{text:"Receive a clear, tailored proposal",tag:"Functional"},{text:"See the space in person",tag:"Functional"}]),frontStageActions:`Receive proposal
Review options
Schedule site visit
Attend visit`,systemsTechnologiesChannels:`Email
PDF proposal
In-person`,struggles:JSON.stringify([{text:"Proposal lacks flexibility",tag:"Medium"},{text:"Site visit hard to schedule",tag:"Low"}]),opportunities:JSON.stringify([{id:"opp-corp-2a",name:"Configurable proposal and self-serve site visit booking",tag:"Medium"}]),backStageActions:`Prepare proposal
Coordinate visit
Follow up`,systems:`Proposal tool
Scheduling`,relatedProcesses:"Sales"}),re({id:"demo-phase-corp-3",journeyId:"demo-journey-corporatebook",order:3,title:"Contract & Confirmation",description:"Negotiation, contract, and deposit.",customerJobs:JSON.stringify([{text:"Sign contract and secure the date",tag:"Functional"},{text:"Understand terms and inclusions",tag:"Functional"}]),frontStageActions:`Negotiate terms
Sign contract
Pay deposit
Receive confirmation`,systemsTechnologiesChannels:`Email
E-sign
Payment portal`,struggles:JSON.stringify([{text:"Contract revisions slow",tag:"Medium"}]),opportunities:JSON.stringify([{id:"opp-corp-3a",name:"E-sign and integrated payment",tag:"Medium"}]),backStageActions:`Draft contract
Process payment
Update booking system`,systems:`Legal
Finance
Booking`,relatedProcesses:`Legal
Finance`}),re({id:"demo-phase-launch-1",journeyId:"demo-journey-launchops",order:1,title:"Mission Integration Kick-off",description:"Customer satellite arrives; integration planning begins.",customerJobs:JSON.stringify([{text:"Understand integration requirements",tag:"Functional"},{text:"Meet the team and process",tag:"Social"},{text:"Feel confident in the partnership",tag:"Emotional"}]),frontStageActions:`Attend kick-off meeting
Receive integration handbook
Review interface requirements
Establish communication channels`,systemsTechnologiesChannels:`Email
Video call
SharePoint
Confluence`,struggles:JSON.stringify([{text:"Documentation spread across systems",tag:"Medium"},{text:"Unclear interface and schedule",tag:"High"}]),internalStruggles:JSON.stringify([{text:"Engineering and ops use different tools",tag:"High"}]),opportunities:JSON.stringify([{id:"opp-launch-1a",name:"Mission integration portal with checklist",tag:"High"}]),backStageActions:`Assign integration lead
Prepare facilities
Schedule reviews`,systems:`Mission management
Confluence`,relatedProcesses:`Integration
Safety`}),re({id:"demo-phase-launch-2",journeyId:"demo-journey-launchops",order:2,title:"Satellite Processing",description:"Spacecraft checked, fueled, and mated to launch vehicle.",customerJobs:JSON.stringify([{text:"Track progress and milestones",tag:"Functional"},{text:"Participate in key reviews",tag:"Functional"}]),frontStageActions:`Attend pre-ship review
Watch processing (remote or on-site)
Participate in readiness review`,systemsTechnologiesChannels:`Mission portal
Email
Video
On-site`,struggles:JSON.stringify([{text:"Limited visibility into processing status",tag:"High"}]),opportunities:JSON.stringify([{id:"opp-launch-2a",name:"Real-time processing status and milestone alerts",tag:"High"}]),backStageActions:`Process spacecraft
Run tests
Document and report`,systems:`Processing
Test systems`,relatedProcesses:`Integration
Quality`}),re({id:"demo-phase-launch-3",journeyId:"demo-journey-launchops",order:3,title:"Launch Campaign",description:"Final countdown and launch.",customerJobs:JSON.stringify([{text:"Follow launch and deployment",tag:"Functional"},{text:"Celebrate success with the team",tag:"Social"}]),frontStageActions:`Attend launch (remote or on-site)
Monitor deployment
Receive post-launch briefing`,systemsTechnologiesChannels:`Launch stream
Mission control
Email`,struggles:JSON.stringify([{text:"Communication gaps during scrubs",tag:"Medium"}]),opportunities:JSON.stringify([{id:"opp-launch-3a",name:"Clear scrub and recycle communication",tag:"Medium"}]),backStageActions:`Execute launch
Monitor vehicle
Confirm deployment`,systems:`Launch ops
Telemetry`,relatedProcesses:`Launch
Mission ops`}),re({id:"demo-phase-launch-4",journeyId:"demo-journey-launchops",order:4,title:"Post-Launch Handover",description:"Orbit confirmation and mission handover to customer.",customerJobs:JSON.stringify([{text:"Receive orbit data and handover",tag:"Functional"},{text:"Know how to operate the spacecraft",tag:"Functional"}]),frontStageActions:`Receive orbit determination data
Attend handover meeting
Access mission data archive`,systemsTechnologiesChannels:`Mission portal
Email
Archive`,struggles:JSON.stringify([{text:"Delayed data delivery",tag:"Medium"}]),opportunities:JSON.stringify([{id:"opp-launch-4a",name:"Automated orbit and data handover",tag:"Medium"}]),backStageActions:`Process telemetry
Generate handover pack
Archive data`,systems:`Mission ops
Archive`,relatedProcesses:"Mission ops"}),re({id:"demo-phase-onboard-1",journeyId:"demo-journey-onboarding",order:1,title:"Welcome & Kick-off",description:"New customer receives welcome and is assigned a dedicated contact.",customerJobs:JSON.stringify([{text:"Know who to contact",tag:"Functional"},{text:"Understand the onboarding timeline",tag:"Functional"},{text:"Feel welcomed",tag:"Emotional"}]),frontStageActions:`Receive welcome email
Meet account manager
Review onboarding checklist
Attend kick-off call`,systemsTechnologiesChannels:`Email
Video call
Customer portal`,struggles:JSON.stringify([{text:"Slow first response after contract",tag:"High"}]),internalStruggles:JSON.stringify([{text:"Handoff from sales to CS is manual",tag:"Medium"}]),opportunities:JSON.stringify([{id:"opp-onboard-1a",name:"Automated welcome and assigned CSM",tag:"High"}]),backStageActions:`Assign CSM
Prepare welcome pack
Schedule kick-off`,systems:`CRM
Customer portal`,relatedProcesses:`Sales handoff
Customer success`}),re({id:"demo-phase-onboard-2",journeyId:"demo-journey-onboarding",order:2,title:"Technical Setup",description:"Access to portals, documentation, and technical integration.",customerJobs:JSON.stringify([{text:"Get access to systems and docs",tag:"Functional"},{text:"Understand integration options",tag:"Functional"}]),frontStageActions:`Receive portal access
Review documentation
Complete technical questionnaire
Attend integration briefing`,systemsTechnologiesChannels:`Customer portal
Confluence
Email`,struggles:JSON.stringify([{text:"Documentation hard to find",tag:"Medium"},{text:"API docs out of date",tag:"High"}]),opportunities:JSON.stringify([{id:"opp-onboard-2a",name:"Structured docs and API playground",tag:"High"}]),backStageActions:`Provision access
Update docs
Support integration`,systems:`Portal
Docs
Support`,relatedProcesses:`Engineering
Support`}),re({id:"demo-phase-onboard-3",journeyId:"demo-journey-onboarding",order:3,title:"First Mission Planning",description:"Customer plans first launch or mission.",customerJobs:JSON.stringify([{text:"Plan and schedule first mission",tag:"Functional"},{text:"Understand timelines and constraints",tag:"Functional"}]),frontStageActions:`Discuss manifest options
Select launch slot
Complete mission questionnaire
Receive confirmation`,systemsTechnologiesChannels:`Portal
Email
Calls`,struggles:JSON.stringify([{text:"Manifest visibility limited",tag:"Medium"}]),opportunities:JSON.stringify([{id:"opp-onboard-3a",name:"Self-serve manifest and slot selection",tag:"Medium"}]),backStageActions:`Confirm slot
Update manifest
Brief integration team`,systems:`Mission planning
Manifest`,relatedProcesses:`Sales
Integration`}),re({id:"demo-phase-onboard-4",journeyId:"demo-journey-onboarding",order:4,title:"Ongoing Support Handover",description:"Transition to BAU support and success model.",customerJobs:JSON.stringify([{text:"Know how to get support",tag:"Functional"},{text:"Have a clear success plan",tag:"Functional"}]),frontStageActions:`Receive support guide
Review success plan
Meet support and CS team`,systemsTechnologiesChannels:`Portal
Email
Support portal`,struggles:JSON.stringify([{text:"Unclear escalation path",tag:"Low"}]),opportunities:JSON.stringify([{id:"opp-onboard-4a",name:"Clear support tiers and escalation",tag:"Medium"}]),backStageActions:`Document success plan
Brief support team
Schedule check-ins`,systems:`Support
CRM`,relatedProcesses:`Support
Customer success`}),re({id:"demo-phase-collab-1",journeyId:"demo-journey-collab",order:1,title:"Partner Identification & Outreach",description:"Identifying and approaching potential R&D partners.",customerJobs:JSON.stringify([{text:"Find complementary capabilities",tag:"Functional"},{text:"Assess strategic fit",tag:"Functional"}]),frontStageActions:`Research potential partners
Attend conferences
Initiate contact
Share areas of interest`,systemsTechnologiesChannels:`Email
LinkedIn
Events`,struggles:JSON.stringify([{text:"Cold outreach gets low response",tag:"Medium"}]),internalStruggles:JSON.stringify([{text:"No central partner pipeline",tag:"High"}]),opportunities:JSON.stringify([{id:"opp-collab-1a",name:"Partner ecosystem map and outreach tracker",tag:"Medium"}]),backStageActions:`Evaluate inbound interest
Maintain partner pipeline
Coordinate NDAs`,systems:`CRM
Legal`,relatedProcesses:`BD
Legal`}),re({id:"demo-phase-collab-2",journeyId:"demo-journey-collab",order:2,title:"Scoping & Agreement",description:"Defining collaboration scope and terms.",customerJobs:JSON.stringify([{text:"Align on objectives and scope",tag:"Functional"},{text:"Secure IP and commercial terms",tag:"Functional"}]),frontStageActions:`Workshop objectives
Define scope and milestones
Negotiate IP and commercial terms
Sign agreement`,systemsTechnologiesChannels:`Meetings
Email
Legal`,struggles:JSON.stringify([{text:"IP negotiation takes too long",tag:"High"}]),opportunities:JSON.stringify([{id:"opp-collab-2a",name:"Template agreements and IP playbook",tag:"Medium"}]),backStageActions:`Draft agreement
Coordinate legal
Document scope`,systems:`Legal
Project management`,relatedProcesses:`Legal
Engineering`}),re({id:"demo-phase-collab-3",journeyId:"demo-journey-collab",order:3,title:"Joint Development",description:"Collaborative R&D and testing.",customerJobs:JSON.stringify([{text:"Progress the work effectively",tag:"Functional"},{text:"Maintain alignment across teams",tag:"Social"}]),frontStageActions:`Attend steering meetings
Share progress and data
Participate in reviews
Resolve blockers`,systemsTechnologiesChannels:`Video calls
Shared drive
Jira/Confluence`,struggles:JSON.stringify([{text:"Data sharing and security friction",tag:"High"},{text:"Timezone and scheduling",tag:"Medium"}]),opportunities:JSON.stringify([{id:"opp-collab-3a",name:"Secure data room and async updates",tag:"High"}]),backStageActions:`Run development
Track milestones
Report to steering`,systems:`Project tools
Data sharing`,relatedProcesses:`Engineering
Programme`}),re({id:"demo-phase-collab-4",journeyId:"demo-journey-collab",order:4,title:"Outcomes & Next Steps",description:"Wrapping up the collaboration and deciding on follow-on.",customerJobs:JSON.stringify([{text:"Capture and share outcomes",tag:"Functional"},{text:"Decide on next phase or spin-off",tag:"Functional"}]),frontStageActions:`Final review meeting
Document outcomes
Discuss follow-on options
Sign off`,systemsTechnologiesChannels:`Meetings
Reports
Email`,struggles:JSON.stringify([{text:"Outcomes not well documented",tag:"Medium"}]),opportunities:JSON.stringify([{id:"opp-collab-4a",name:"Structured outcome report and learnings",tag:"Medium"}]),backStageActions:`Compile report
Archive project
Update partner record`,systems:`Project
CRM`,relatedProcesses:`BD
Engineering`}),re({id:"demo-phase-med-5",journeyId:"demo-journey-medical",order:5,title:"Clearance & Next Steps",description:"Clearance decision and integration with crew readiness.",customerJobs:JSON.stringify([{text:"Receive clearance or clear path to it",tag:"Functional"},{text:"Address any conditions if needed",tag:"Functional"}]),frontStageActions:`Receive clearance decision
Complete any follow-up
Return to training or programme flow`,systemsTechnologiesChannels:`Email
Portal
Coordinator`,struggles:JSON.stringify([{text:"Conditional clearance and follow-up complexity",tag:"Medium"}]),opportunities:JSON.stringify([{id:"opp-med-5a",name:"Integrated follow-up and retest tracking",tag:"Medium"}]),backStageActions:`Issue clearance
Update crew records
Coordinate with training
Archive`,systems:`Crew system
EHR`,relatedProcesses:`Crew ops
Training`})],{jobs:o,phasesWithJobIds:s}=lg(r,n,t),l=ag(s,n,t),a=[{id:"demo-insight-1",clientId:"demo-client-nzicc",title:"Event discovery fragmented across channels",description:"Research shows attendees use multiple sources (Google, social, email) to find events but no single hub exists. 72% use 3+ sources.",priority:"High",order:0,createdAt:Y,updatedAt:Y},{id:"demo-insight-2",clientId:"demo-client-nzicc",title:"Registration friction drives drop-off",description:"Form length and unclear refund policy cited as top barriers. A/B tests suggest 15% conversion lift with shorter forms.",priority:"High",order:1,createdAt:Y,updatedAt:Y},{id:"demo-insight-3",clientId:"demo-client-nzicc",title:"Networking is key value driver",description:"Post-event surveys rank networking above content for repeat attendance. Pre-event matching requests up 40% YoY.",priority:"Medium",order:2,createdAt:Y,updatedAt:Y},{id:"demo-insight-4",clientId:"demo-client-nzicc",title:"Session clashes drive agenda frustration",description:"Overlapping sessions in multi-track events cause decision stress. 60% of attendees report missing preferred sessions due to clashes.",priority:"High",order:3,createdAt:Y,updatedAt:Y},{id:"demo-insight-5",clientId:"demo-client-nzicc",title:"Post-event content delayed or scattered",description:"Slides and recordings arrive late or across multiple platforms. Attendees want one place to catch up within 48 hours.",priority:"Medium",order:4,createdAt:Y,updatedAt:Y},{id:"demo-insight-6",clientId:"demo-client-nzicc",title:"Ticketing queue anxiety and drop-off",description:"Queue timeouts and perceived unfairness in onsale drive frustration. Fans cite scalping as top concern for high-demand shows.",priority:"High",order:5,createdAt:Y,updatedAt:Y},{id:"demo-insight-7",clientId:"demo-client-rocketlab",title:"Application clarity reduces qualified drop-off",description:"Candidates with clear rubrics and examples complete applications at 2x rate. Unclear criteria drives support load.",priority:"High",order:0,createdAt:Y,updatedAt:Y},{id:"demo-insight-8",clientId:"demo-client-rocketlab",title:"Medical clearance process opaque",description:"Candidates report anxiety around medical timeline. Integrated tracking and status visibility would reduce enquiries.",priority:"Medium",order:1,createdAt:Y,updatedAt:Y},{id:"demo-insight-9",clientId:"demo-client-rocketlab",title:"Candidates want fair and transparent process",description:"Perceived bias in selection drives disengagement. Clear criteria and feedback loops improve trust and completion rates.",priority:"High",order:2,createdAt:Y,updatedAt:Y}],c={"demo-insight-1":["demo-job-demo-phase-conf-1-0","demo-job-demo-phase-concert-1-0"],"demo-insight-2":["demo-job-demo-phase-conf-2-0","demo-job-demo-phase-conf-2-1"],"demo-insight-3":["demo-job-demo-phase-conf-3-2","demo-job-demo-phase-conf-4-1"],"demo-insight-4":["demo-job-demo-phase-conf-3-1"],"demo-insight-5":["demo-job-demo-phase-conf-5-0"],"demo-insight-6":["demo-job-demo-phase-concert-2-0"],"demo-insight-7":["demo-job-demo-phase-astro-1-0","demo-job-demo-phase-astro-1-1"],"demo-insight-8":["demo-job-demo-phase-med-1-0","demo-job-demo-phase-med-2-0"],"demo-insight-9":["demo-job-demo-phase-astro-1-2"]},d=o.map(h=>{const y=Object.entries(c).filter(([,b])=>b.includes(h.id)).map(([b])=>b);return{...h,insightIds:y}}),p={"opp-conf-1a":["demo-job-demo-phase-conf-1-0"],"opp-conf-2a":["demo-job-demo-phase-conf-2-0"],"opp-conf-2b":["demo-job-demo-phase-conf-2-1"],"opp-conf-3a":["demo-job-demo-phase-conf-3-1"],"opp-conf-4a":["demo-job-demo-phase-conf-4-1"],"opp-conf-5a":["demo-job-demo-phase-conf-5-0"],"opp-concert-1a":["demo-job-demo-phase-concert-1-0"],"opp-concert-2a":["demo-job-demo-phase-concert-2-0"],"opp-concert-4a":["demo-job-demo-phase-concert-4-0"],"opp-astro-1a":["demo-job-demo-phase-astro-1-0","demo-job-demo-phase-astro-1-1"],"opp-astro-2a":["demo-job-demo-phase-astro-2-0"],"opp-med-1a":["demo-job-demo-phase-med-1-0"],"opp-med-2a":["demo-job-demo-phase-med-2-0"]},u=new Set(o.map(h=>h.id)),f=l.map(h=>({...h,linkedJobIds:(p[h.id]??[]).filter(y=>u.has(y))}));return{clients:e,projects:t,journeys:n,phases:s,jobs:d,insights:a,opportunities:f,cellComments:{}}}const ma="::";function hc(e,t){return`${e}${ma}${t}`}function _d(e){const t=e.indexOf(ma);return t===-1?null:{phaseId:e.slice(0,t),rowKey:e.slice(t+ma.length)}}const Gr=["description","phaseHealth","customerJobs","frontStageActions","systemsTechnologiesChannels","struggles","internalStruggles","backStageActions","systems","relatedProcesses","opportunities","relatedDocuments"],zd={clients:[],projects:[],journeys:[],phases:[],jobs:[],insights:[],opportunities:[],cellComments:{}},L=Xh((e,t)=>({...zd,selectedClientId:null,selectedProjectId:null,selectedJourneyId:null,selectedPhaseId:null,opportunitiesClientId:null,jobsClientId:null,altDashboardClientId:null,clientPageActiveTab:null,createClientModalOpen:!1,createProjectModalOpen:!1,createJourneyModalOpen:!1,darkMode:(()=>{if(typeof window>"u")return!1;try{const n=localStorage.getItem("journey-mapper-dark");return n===null?!1:n==="true"}catch{return!1}})(),isSignedIn:(()=>{if(typeof window>"u")return!1;try{return localStorage.getItem("journey-mapper-signed-in")==="true"}catch{return!1}})(),loadState:async()=>{var b;try{const k=localStorage.getItem("journey-mapper-dark");k!==null&&e({darkMode:k==="true"})}catch{}let n=await hl.getState();n||(n=gl(),await hl.saveState(n));const r=(n.phases??[]).map(k=>({...k,systems:k.systems??""})),o=n.cellComments??{},s={},l=k=>{if(typeof k=="string")return{text:k,replies:[]};if(k&&typeof k=="object"&&"text"in k&&typeof k.text=="string"){const x=k;return{text:x.text,replies:Array.isArray(x.replies)?x.replies:[]}}return{text:"",replies:[]}};for(const[k,x]of Object.entries(o)){let m=k;if(!k.includes("::")){for(const g of Gr)if(k.endsWith("-"+g)){m=hc(k.slice(0,k.length-g.length-1),g);break}}s[m]=l(x)}const a=(n.journeys??[]).map(k=>{let x=k.rowOrder??[...Gr];if(!x.includes("phaseHealth")){const m=x.indexOf("description");x=m>=0?[...x.slice(0,m+1),"phaseHealth",...x.slice(m+1)]:["phaseHealth",...x]}return{...k,rowOrder:x,customRows:k.customRows??[]}}),c=r.map(k=>({...k,jobIds:k.jobIds??[],internalStruggles:k.internalStruggles??"",relatedDocuments:k.relatedDocuments??"",customRowValues:k.customRowValues??{}}));let d=n.jobs??[],p=c;if(d.length===0&&c.length>0){const k=[],x=se();p=c.map(m=>{var A;const g=a.find(J=>J.id===m.journeyId),S=g?(A=n.projects)==null?void 0:A.find(J=>J.id===g.projectId):null,I=S==null?void 0:S.clientId;if(!I)return{...m,jobIds:m.jobIds??[]};const E=mc(m.customerJobs??""),j=[];for(const J of E){const w={id:jt(),clientId:I,name:J.name??J.text??"Untitled job",description:J.description,tag:J.tag??"Functional",priority:J.isPriority?"High":"Medium",struggles:J.struggles,functionalDimensions:J.functionalDimensions,socialDimensions:J.socialDimensions,emotionalDimensions:J.emotionalDimensions,solutionsAndWorkarounds:J.solutionsAndWorkarounds,isPriority:J.isPriority??!1,insightIds:[],createdAt:x,updatedAt:x};k.push(w),j.push(w.id)}return{...m,jobIds:j,customerJobs:"",customRowValues:m.customRowValues??{}}}),d=k}let u=n.opportunities??[];if(u.length===0&&c.length>0){const k=[],x=se();for(const m of c){const g=a.find(j=>j.id===m.journeyId),S=g?(b=n.projects)==null?void 0:b.find(j=>j.id===g.projectId):null,I=S==null?void 0:S.clientId;if(!I||!g||!S)continue;Er(m.opportunities??"").forEach((j,A)=>{k.push({id:j.id,clientId:I,projectId:S.id,journeyId:g.id,phaseId:m.id,stage:"Backlog",stageOrder:A,name:j.name,priority:j.tag||"High",description:j.description??"",pointOfDifferentiation:j.pointOfDifferentiation??"",criticalAssumptions:j.criticalAssumptions??"",linkedJobIds:[],isPriority:!!j.isPriority,createdAt:x,updatedAt:x})})}if(k.length>0){u=k;const m="Horizon 1",g="Horizon 2",S="Horizon 3";u=u.map((I,E)=>{const j={...I,linkedJobIds:I.linkedJobIds??[]};return E<4?{...j,stage:m,stageOrder:E,updatedAt:se()}:E<8?{...j,stage:g,stageOrder:E-4,updatedAt:se()}:E<12?{...j,stage:S,stageOrder:E-8,updatedAt:se()}:j});for(let I=0;I<c.length;I++){const E=c[I];u.some(j=>j.phaseId===E.id)&&(c[I]={...E,opportunities:"",updatedAt:se(),customRowValues:E.customRowValues??{}})}}}const f={Unallocated:"Backlog","In analysis":"In discovery"};u=u.map(k=>{const x={...k,linkedJobIds:k.linkedJobIds??[]},m=f[k.stage];return m?{...x,stage:m,updatedAt:se()}:x}),d=d.map(k=>({...k,priority:k.priority??(k.isPriority?"High":"Medium"),insightIds:k.insightIds??[]}));let h=(n.insights??[]).map((k,x)=>({...k,title:k.title??"Untitled insight",description:k.description??"",priority:k.priority??"Medium",order:k.order??x}));h.length===0&&(n.clients??[]).length>0&&(h=gl().insights??[]);const y=h.length>0&&(n.insights??[]).length===0;e({clients:n.clients??[],projects:n.projects??[],journeys:a,phases:p,jobs:d,insights:h,opportunities:u,cellComments:s}),y&&t().saveState()},saveState:async()=>{const{clients:n,projects:r,journeys:o,phases:s,jobs:l,insights:a,opportunities:c,cellComments:d}=t();await hl.saveState({clients:n,projects:r,journeys:o,phases:s,jobs:l,insights:a,opportunities:c,cellComments:d})},resetDemoData:()=>{const n=gl();e({...zd,clients:n.clients,projects:n.projects,journeys:n.journeys,phases:n.phases,jobs:n.jobs,insights:n.insights??[],opportunities:n.opportunities??[],cellComments:n.cellComments??{}}),e({selectedClientId:null,selectedProjectId:null,selectedJourneyId:null,selectedPhaseId:null,opportunitiesClientId:null,altDashboardClientId:null,jobsClientId:null}),t().saveState()},createClient:(n,r,o)=>{const s=o?rg(o):null,l=s?`https://logo.clearbit.com/${s}`:void 0,a={id:jt(),name:n,description:r,website:(o==null?void 0:o.trim())||void 0,logoUrl:l,createdAt:se(),updatedAt:se()};return e(c=>({clients:[...c.clients,a]})),t().saveState(),a},updateClient:(n,r)=>{e(o=>({clients:o.clients.map(s=>s.id===n?{...s,...r,updatedAt:se()}:s)})),t().saveState()},deleteClient:n=>{const{projects:r,journeys:o}=t(),s=r.filter(d=>d.clientId===n).map(d=>d.id),l=o.filter(d=>s.includes(d.projectId)).map(d=>d.id),a=t().phases.find(d=>d.id===t().selectedPhaseId),c=a&&l.includes(a.journeyId);e(d=>({clients:d.clients.filter(p=>p.id!==n),projects:d.projects.filter(p=>p.clientId!==n),journeys:d.journeys.filter(p=>!s.includes(p.projectId)),phases:d.phases.filter(p=>!l.includes(p.journeyId)),jobs:d.jobs.filter(p=>p.clientId!==n),selectedClientId:d.selectedClientId===n?null:d.selectedClientId,selectedProjectId:d.selectedProjectId&&s.includes(d.selectedProjectId)?null:d.selectedProjectId,selectedJourneyId:d.selectedJourneyId&&l.includes(d.selectedJourneyId)?null:d.selectedJourneyId,selectedPhaseId:c?null:d.selectedPhaseId})),t().saveState()},createProject:(n,r,o)=>{const s={id:jt(),clientId:n,name:r,description:o,createdAt:se(),updatedAt:se()};return e(l=>({projects:[...l.projects,s]})),t().saveState(),s},updateProject:(n,r)=>{e(o=>({projects:o.projects.map(s=>s.id===n?{...s,...r,updatedAt:se()}:s)})),t().saveState()},deleteProject:n=>{const{journeys:r}=t(),o=r.filter(a=>a.projectId===n).map(a=>a.id),s=t().phases.find(a=>a.id===t().selectedPhaseId),l=s&&o.includes(s.journeyId);e(a=>({projects:a.projects.filter(c=>c.id!==n),journeys:a.journeys.filter(c=>c.projectId!==n),phases:a.phases.filter(c=>!o.includes(c.journeyId)),selectedProjectId:a.selectedProjectId===n?null:a.selectedProjectId,selectedJourneyId:a.selectedJourneyId&&o.includes(a.selectedJourneyId)?null:a.selectedJourneyId,selectedPhaseId:l?null:a.selectedPhaseId})),t().saveState()},createJourney:(n,r,o)=>{const s={id:jt(),projectId:n,name:r,description:o,rowOrder:[...Gr],customRows:[],createdAt:se(),updatedAt:se()};return e(l=>({journeys:[...l.journeys,s]})),t().saveState(),s},updateJourney:(n,r)=>{e(o=>({journeys:o.journeys.map(s=>s.id===n?{...s,...r,updatedAt:se()}:s)})),t().saveState()},deleteJourney:n=>{e(r=>{var o;return{journeys:r.journeys.filter(s=>s.id!==n),phases:r.phases.filter(s=>s.journeyId!==n),selectedJourneyId:r.selectedJourneyId===n?null:r.selectedJourneyId,selectedPhaseId:r.selectedPhaseId&&((o=t().phases.find(s=>s.id===r.selectedPhaseId))==null?void 0:o.journeyId)===n?null:r.selectedPhaseId}}),t().saveState()},addJourneyRow:(n,r)=>{const o={id:jt(),label:r.trim()||"New row"};return e(s=>{const l=s.journeys.find(d=>d.id===n);if(!l)return{};const a=[...l.customRows??[],o],c=[...l.rowOrder??Gr,o.id];return{journeys:s.journeys.map(d=>d.id===n?{...d,customRows:a,rowOrder:c,updatedAt:se()}:d)}}),t().saveState(),o},updateJourneyRow:(n,r,o)=>{e(s=>({journeys:s.journeys.map(l=>l.id===n?{...l,customRows:(l.customRows??[]).map(a=>a.id===r?{...a,label:o.trim()||a.label}:a),updatedAt:se()}:l)})),t().saveState()},deleteJourneyRow:(n,r)=>{e(o=>{const s=o.journeys.find(u=>u.id===n);if(!s)return{};const l=(s.rowOrder??Gr).filter(u=>u!==r),a=(s.customRows??[]).filter(u=>u.id!==r),c=o.phases.map(u=>{if(u.journeyId!==n)return u;const f={...u.customRowValues??{}};return delete f[r],{...u,customRowValues:f,updatedAt:se()}}),d={...o.cellComments},p="::";for(const u of Object.keys(d)){const f=u.indexOf(p);f!==-1&&u.slice(f+p.length)===r&&delete d[u]}return{journeys:o.journeys.map(u=>u.id===n?{...u,rowOrder:l,customRows:a,updatedAt:se()}:u),phases:c,cellComments:d}}),t().saveState()},reorderJourneyRows:(n,r)=>{e(o=>({journeys:o.journeys.map(s=>s.id===n?{...s,rowOrder:r,updatedAt:se()}:s)})),t().saveState()},createPhase:n=>{const r=t().phases.filter(l=>l.journeyId===n),o=r.length===0?0:Math.max(...r.map(l=>l.order)),s={id:jt(),journeyId:n,order:o+1,title:"New Phase",description:"",imageUrl:"",struggles:"",internalStruggles:"",opportunities:"",frontStageActions:"",backStageActions:"",systems:"",relatedProcesses:"",systemsTechnologiesChannels:"",jobIds:[],relatedDocuments:"",customRowValues:{},createdAt:se(),updatedAt:se()};return e(l=>({phases:[...l.phases,s]})),t().saveState(),s},updatePhase:(n,r)=>{e(o=>({phases:o.phases.map(s=>s.id===n?{...s,...r,updatedAt:se()}:s)})),t().saveState()},deletePhase:n=>{t().phases.find(o=>o.id===n)&&(e(o=>({phases:o.phases.filter(s=>s.id!==n),selectedPhaseId:o.selectedPhaseId===n?null:o.selectedPhaseId})),t().saveState())},reorderPhases:(n,r)=>{e(o=>({phases:o.phases.map(l=>{if(l.journeyId!==n)return l;const a=r.indexOf(l.id);return a===-1?l:{...l,order:a,updatedAt:se()}})})),t().saveState()},createJob:(n,r)=>{const o={id:jt(),clientId:n,name:r.name??"Untitled job",description:r.description,tag:r.tag??"Functional",priority:r.priority??"Medium",struggles:r.struggles,functionalDimensions:r.functionalDimensions,socialDimensions:r.socialDimensions,emotionalDimensions:r.emotionalDimensions,solutionsAndWorkarounds:r.solutionsAndWorkarounds,isPriority:r.isPriority??!1,insightIds:r.insightIds??[],createdAt:se(),updatedAt:se()};return e(s=>({jobs:[...s.jobs,o]})),t().saveState(),o},updateJob:(n,r)=>{e(o=>({jobs:o.jobs.map(s=>s.id===n?{...s,...r,updatedAt:se()}:s)})),t().saveState()},deleteJob:n=>{e(r=>({jobs:r.jobs.filter(o=>o.id!==n),phases:r.phases.map(o=>({...o,jobIds:(o.jobIds??[]).filter(s=>s!==n),updatedAt:se()})),opportunities:r.opportunities.map(o=>({...o,linkedJobIds:(o.linkedJobIds??[]).filter(s=>s!==n),updatedAt:se()}))})),t().saveState()},createInsight:(n,r)=>{const s=(t().insights??[]).filter(a=>a.clientId===n).reduce((a,c)=>Math.max(a,c.order??0),0),l={id:jt(),clientId:n,title:r.title??"Untitled insight",description:r.description,priority:r.priority??"Medium",order:s+1,createdAt:se(),updatedAt:se()};return e(a=>({insights:[...a.insights??[],l]})),t().saveState(),l},updateInsight:(n,r)=>{e(o=>({insights:(o.insights??[]).map(s=>s.id===n?{...s,...r,updatedAt:se()}:s)})),t().saveState()},deleteInsight:n=>{e(r=>({insights:(r.insights??[]).filter(o=>o.id!==n),jobs:r.jobs.map(o=>({...o,insightIds:(o.insightIds??[]).filter(s=>s!==n),updatedAt:se()}))})),t().saveState()},reorderInsights:(n,r)=>{e(o=>{const s=new Map(r.map((l,a)=>[l,a]));return{insights:(o.insights??[]).map(l=>l.clientId===n&&s.has(l.id)?{...l,order:s.get(l.id),updatedAt:se()}:l)}}),t().saveState()},setCellComment:(n,r)=>{e(o=>{var s;return{cellComments:{...o.cellComments,[n]:{text:r,replies:((s=o.cellComments[n])==null?void 0:s.replies)??[]}}}}),t().saveState()},addCellCommentReply:(n,r)=>{e(o=>{const s=o.cellComments[n],l=[...(s==null?void 0:s.replies)??[],r];return{cellComments:{...o.cellComments,[n]:{text:(s==null?void 0:s.text)??"",replies:l}}}}),t().saveState()},deleteCellComment:n=>{e(r=>{const o={...r.cellComments};return delete o[n],{cellComments:o}}),t().saveState()},setSelectedClientId:n=>e({selectedClientId:n,selectedProjectId:null,selectedJourneyId:null,selectedPhaseId:null,...n!=null&&{altDashboardClientId:null}}),setSelectedProjectId:n=>e({selectedProjectId:n,selectedJourneyId:null,selectedPhaseId:null}),setSelectedJourneyId:n=>e({selectedJourneyId:n,selectedPhaseId:null}),setSelectedPhaseId:n=>e({selectedPhaseId:n}),setSelection:(n,r,o)=>e({selectedClientId:n,selectedProjectId:r,selectedJourneyId:o,selectedPhaseId:null,...n===null&&{opportunitiesClientId:null,jobsClientId:null,altDashboardClientId:null},...r!=null&&{altDashboardClientId:null}}),goHome:()=>e({selectedClientId:null,selectedProjectId:null,selectedJourneyId:null,selectedPhaseId:null,opportunitiesClientId:null,jobsClientId:null,altDashboardClientId:null}),setCreateClientModalOpen:n=>e({createClientModalOpen:n}),setCreateProjectModalOpen:n=>e({createProjectModalOpen:n}),setCreateJourneyModalOpen:n=>e({createJourneyModalOpen:n}),setDarkMode:n=>{e({darkMode:n});try{localStorage.setItem("journey-mapper-dark",String(n)),document.documentElement.classList.toggle("dark",n)}catch{}},setSignedIn:n=>{e({isSignedIn:n});try{localStorage.setItem("journey-mapper-signed-in",String(n))}catch{}},setOpportunitiesClientId:n=>e(r=>n!=null?{opportunitiesClientId:n,jobsClientId:null,altDashboardClientId:null}:{opportunitiesClientId:null,jobsClientId:null,altDashboardClientId:r.opportunitiesClientId??null}),setJobsClientId:n=>e(r=>n!=null?{jobsClientId:n,opportunitiesClientId:null,altDashboardClientId:null}:{jobsClientId:null,opportunitiesClientId:null,altDashboardClientId:r.jobsClientId??null}),setAltDashboardClientId:n=>e({altDashboardClientId:n,opportunitiesClientId:null,jobsClientId:null}),setClientPageActiveTab:n=>e({clientPageActiveTab:n}),createOpportunity:n=>{const{projects:r}=t(),o=r.find(c=>c.id===n.projectId),s=(o==null?void 0:o.clientId)??n.clientId;if(!s||!o)throw new Error("Invalid project or client");const l="Backlog",a={id:jt(),clientId:s,projectId:n.projectId,journeyId:n.journeyId,phaseId:n.phaseId,stage:l,stageOrder:0,name:n.name.trim()||"Untitled",priority:n.priority??"High",description:n.description??"",pointOfDifferentiation:n.pointOfDifferentiation??"",criticalAssumptions:n.criticalAssumptions??"",linkedJobIds:n.linkedJobIds??[],isPriority:n.isPriority??!1,createdAt:se(),updatedAt:se()};return e(c=>{const d=c.opportunities.filter(u=>u.clientId===s&&u.stage==="Backlog").sort((u,f)=>u.stageOrder-f.stageOrder).map((u,f)=>({...u,stageOrder:f+1,updatedAt:se()}));return{opportunities:[...c.opportunities.filter(u=>u.clientId!==s||u.stage!==l),a,...d]}}),t().saveState(),a},updateOpportunity:(n,r)=>{e(o=>({opportunities:o.opportunities.map(s=>s.id===n?{...s,...r,updatedAt:se()}:s)})),t().saveState()},deleteOpportunity:n=>{e(r=>({opportunities:r.opportunities.filter(o=>o.id!==n)})),t().saveState()},moveOpportunityToStage:(n,r,o=0)=>{e(s=>{const l=s.opportunities.find(f=>f.id===n);if(!l)return{};const a=l.clientId,c=s.opportunities.filter(f=>f.clientId===a&&f.stage===l.stage&&f.id!==n).sort((f,h)=>f.stageOrder-h.stageOrder).map((f,h)=>({...f,stageOrder:h,updatedAt:se()})),d=s.opportunities.filter(f=>f.clientId===a&&f.stage===r&&f.id!==n).sort((f,h)=>f.stageOrder-h.stageOrder),p=[...d.slice(0,o),{...l,stage:r,stageOrder:o,updatedAt:se()},...d.slice(o)].map((f,h)=>({...f,stageOrder:h,updatedAt:se()}));return{opportunities:[...s.opportunities.filter(f=>f.clientId!==a||f.stage!==l.stage&&f.stage!==r),...c,...p]}}),t().saveState()},reorderOpportunitiesInStage:(n,r,o)=>{e(s=>{const l=s.opportunities.filter(f=>f.clientId===n&&f.stage===r),a=new Set(o),c=o.filter(f=>l.some(h=>h.id===f)).map(f=>l.find(h=>h.id===f)),d=l.filter(f=>!a.has(f.id)).sort((f,h)=>f.stageOrder-h.stageOrder),p=[...c,...d].map((f,h)=>({...f,stageOrder:h,updatedAt:se()}));return{opportunities:[...s.opportunities.filter(f=>f.clientId!==n||f.stage!==r),...p]}}),t().saveState()}}));function ha(){const e=L(l=>l.darkMode),t=L(l=>l.setDarkMode),n=L(l=>l.resetDemoData),[r,o]=v.useState(!1),s=v.useRef(null);return v.useEffect(()=>{const l=a=>{s.current&&!s.current.contains(a.target)&&o(!1)};return r&&document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[r]),i.jsxs("div",{ref:s,className:"relative",children:[i.jsx("button",{type:"button",onClick:()=>o(l=>!l),className:"flex h-11 w-11 items-center justify-center rounded-2xl border border-stone-200 bg-white text-stone-600 shadow-soft transition-all duration-200 hover:border-accent/30 hover:bg-accent/5 hover:text-accent dark:border-stone-600 dark:bg-stone-800 dark:text-stone-200 dark:hover:border-accent/40 dark:hover:bg-accent/10 dark:hover:text-accent-light","aria-label":"Settings",children:i.jsxs("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),r&&i.jsxs("div",{className:"absolute right-0 top-full z-50 mt-2 min-w-[180px] rounded-xl border border-stone-200 bg-white py-1 shadow-elevated dark:border-stone-600 dark:bg-stone-800 dark:shadow-elevated-dark",children:[i.jsxs("button",{type:"button",onClick:()=>{t(!e),o(!1)},className:"flex w-full items-center gap-3 px-4 py-2.5 text-left text-sm text-stone-700 hover:bg-stone-100 dark:text-stone-100 dark:hover:bg-stone-700",children:[i.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e?i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"}):i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}),e?"Light mode":"Dark mode"]}),i.jsx("button",{type:"button",onClick:()=>{n(),o(!1)},className:"flex w-full items-center gap-3 px-4 py-2.5 text-left text-sm text-stone-700 hover:bg-stone-100 dark:text-stone-100 dark:hover:bg-stone-700",children:"Reset demo data"})]})]})}function jp({isOpen:e,onClose:t,title:n,children:r}){const o=v.useRef(null);return v.useEffect(()=>{if(!e)return;const s=l=>{l.key==="Escape"&&t()};return document.addEventListener("keydown",s),()=>document.removeEventListener("keydown",s)},[e,t]),e?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"fixed inset-0 z-40 bg-black/30",onClick:t,"aria-hidden":"true"}),i.jsxs("div",{ref:o,className:"fixed right-0 top-0 z-50 h-full w-full max-w-[840px] overflow-y-auto bg-white shadow-elevated animate-in dark:bg-stone-800 dark:shadow-elevated-dark sm:w-[840px]",role:"dialog","aria-modal":"true","aria-labelledby":"drawer-title",children:[i.jsxs("div",{className:"sticky top-0 z-10 flex items-center justify-between border-b border-stone-200 bg-white px-6 py-5 dark:border-stone-600 dark:bg-stone-800",children:[i.jsx("h2",{id:"drawer-title",className:"text-lg font-semibold text-stone-900 dark:text-stone-100",children:n}),i.jsx("button",{onClick:t,className:"rounded-xl p-2 text-stone-500 hover:bg-warm-100 hover:text-stone-700 focus:outline-none focus:ring-2 focus:ring-accent dark:text-stone-200 dark:hover:bg-stone-700","aria-label":"Close drawer",children:i.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),i.jsx("div",{className:"p-6 pb-10",children:r})]})]}):null}function Ot({isOpen:e,onClose:t,title:n,children:r,footer:o,maxWidth:s="max-w-md"}){const l=v.useRef(null),a=v.useRef(null),c=v.useRef(!1);return v.useEffect(()=>{var u,f;if(!e){c.current=!1;return}const d=!c.current;c.current=!0,d&&((f=(u=a.current)==null?void 0:u.querySelector("input, select, textarea"))==null||f.focus());const p=h=>{if(h.key==="Escape"&&t(),h.key==="Tab"){const y=a.current;if(!y)return;const b=y.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),k=b[0],x=b[b.length-1];h.shiftKey?document.activeElement===k&&(h.preventDefault(),x==null||x.focus()):document.activeElement===x&&(h.preventDefault(),k==null||k.focus())}};return document.addEventListener("keydown",p),()=>document.removeEventListener("keydown",p)},[e,t]),e?i.jsxs("div",{ref:l,className:"fixed inset-0 z-50 flex items-center justify-center p-4",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:[i.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:t,"aria-hidden":"true"}),i.jsxs("div",{ref:a,className:`relative flex max-h-[90vh] w-full flex-col ${s} rounded-2xl bg-white p-6 shadow-elevated dark:bg-stone-800 dark:shadow-elevated-dark animate-fade-in`,onClick:d=>d.stopPropagation(),children:[i.jsx("h2",{id:"modal-title",className:"mb-4 shrink-0 text-xl font-bold tracking-tight text-stone-900 dark:text-stone-100",children:n}),i.jsx("div",{className:`min-h-0 ${o?"flex-1 overflow-y-auto overflow-x-hidden pr-1":"shrink-0"}`,children:r}),o&&i.jsx("div",{className:"mt-4 shrink-0 border-t border-stone-200 pt-4 dark:border-stone-600",children:o})]})]}):null}function Ro({isOpen:e,onClose:t,onConfirm:n,title:r,message:o,confirmLabel:s="Delete",confirmVariant:l="danger"}){const a=v.useRef(null);v.useEffect(()=>{var d;e&&((d=a.current)==null||d.focus())},[e]);const c=()=>{n(),t()};return i.jsx(Ot,{isOpen:e,onClose:t,title:r,footer:i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{type:"button",onClick:t,className:"flex-1 rounded-xl border border-stone-300 px-4 py-2.5 font-medium text-stone-700 hover:bg-stone-50 dark:border-stone-600 dark:text-stone-200 dark:hover:bg-stone-700",children:"Cancel"}),i.jsx("button",{ref:a,type:"button",onClick:c,className:`flex-1 rounded-xl px-4 py-2.5 font-semibold text-white shadow-soft transition-all duration-200 ${l==="danger"?"bg-red-500 hover:bg-red-600 hover:shadow-[0_0_20px_-4px_rgba(239,68,68,0.3)]":"bg-accent hover:bg-accent-hover hover:shadow-glow dark:hover:shadow-glow-dark"}`,children:s})]}),children:i.jsx("p",{className:"text-stone-600 dark:text-stone-200",children:o})})}const cg="mb-1 block text-base font-semibold text-stone-700 dark:text-stone-300";function ie({htmlFor:e,children:t,className:n=""}){return i.jsx("label",{htmlFor:e,className:`${cg} ${n}`.trim(),children:t})}function $n({children:e}){return i.jsx("h3",{className:"mb-1 text-base font-semibold text-stone-700 dark:text-stone-300",children:e})}const dg=["Functional","Social","Emotional"],ug=["High","Medium","Low"];function ms({value:e,onChange:t,placeholder:n,rows:r=3}){const o=e.join(`
`);return i.jsx("textarea",{value:o,onChange:s=>t(kp(s.target.value)),rows:r,placeholder:n,className:"w-full rounded-xl border border-stone-300 px-4 py-2.5 focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100 dark:placeholder-stone-500"})}function Ei({isOpen:e,onClose:t,job:n,jobIndex:r,insights:o=[],onSave:s}){const[l,a]=v.useState(""),[c,d]=v.useState(""),[p,u]=v.useState("Functional"),[f,h]=v.useState("Medium"),[y,b]=v.useState([]),[k,x]=v.useState([]),[m,g]=v.useState([]),[S,I]=v.useState([]),[E,j]=v.useState([]),[A,J]=v.useState("");v.useEffect(()=>{n&&(a(n.name??n.text??""),d(n.description??""),u(n.tag??"Functional"),h(n.priority??(n.isPriority?"High":"Medium")),b(n.insightIds??[]),x(n.struggles??[]),g(n.functionalDimensions??[]),I(n.socialDimensions??[]),j(n.emotionalDimensions??[]),J(n.solutionsAndWorkarounds??""))},[n==null?void 0:n.name,n==null?void 0:n.text,n==null?void 0:n.description,n==null?void 0:n.tag,n==null?void 0:n.priority,n==null?void 0:n.insightIds,n==null?void 0:n.isPriority,n==null?void 0:n.struggles,n==null?void 0:n.functionalDimensions,n==null?void 0:n.socialDimensions,n==null?void 0:n.emotionalDimensions,n==null?void 0:n.solutionsAndWorkarounds]);const w=R=>{R.preventDefault(),n!=null&&(s(r,{name:l.trim()||n.name||n.text||"Untitled job",description:c.trim()||void 0,tag:p,priority:f,insightIds:y,struggles:k.filter(Boolean).length>0?k.filter(Boolean):void 0,functionalDimensions:m.filter(Boolean).length>0?m.filter(Boolean):void 0,socialDimensions:S.filter(Boolean).length>0?S.filter(Boolean):void 0,emotionalDimensions:E.filter(Boolean).length>0?E.filter(Boolean):void 0,solutionsAndWorkarounds:A.trim()||void 0}),t())};return n?i.jsx(Ot,{isOpen:e,onClose:t,title:"Job details",maxWidth:"max-w-2xl",footer:i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{type:"button",onClick:t,className:"flex-1 rounded-xl border border-stone-300 px-4 py-2.5 font-medium text-stone-700 hover:bg-stone-50 dark:border-stone-600 dark:text-stone-200 dark:hover:bg-stone-700",children:"Cancel"}),i.jsx("button",{type:"submit",form:"edit-job-form",className:"flex-1 rounded-xl bg-accent px-4 py-2.5 font-medium text-white hover:bg-accent-hover",children:"Save"})]}),children:i.jsxs("form",{id:"edit-job-form",onSubmit:w,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(ie,{htmlFor:"job-name",children:"Name"}),i.jsx("input",{id:"job-name",type:"text",value:l,onChange:R=>a(R.target.value),className:"w-full rounded-xl border border-stone-300 px-4 py-2.5 focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100 dark:placeholder-stone-500",placeholder:"Job name"})]}),i.jsxs("div",{children:[i.jsx(ie,{htmlFor:"job-desc",children:"Description"}),i.jsx("textarea",{id:"job-desc",value:c,onChange:R=>d(R.target.value),rows:2,className:"w-full rounded-xl border border-stone-300 px-4 py-2.5 focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100 dark:placeholder-stone-500",placeholder:"Job description"})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx(ie,{htmlFor:"job-tag",children:"Primary type"}),i.jsx("select",{id:"job-tag",value:p,onChange:R=>u(R.target.value),className:"w-full rounded-xl border border-stone-300 px-4 py-2.5 focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100",children:dg.map(R=>i.jsx("option",{value:R,children:R},R))})]}),i.jsxs("div",{className:"flex-1",children:[i.jsx(ie,{htmlFor:"job-priority",children:"Priority"}),i.jsx("select",{id:"job-priority",value:f,onChange:R=>h(R.target.value),className:"w-full rounded-xl border border-stone-300 px-4 py-2.5 focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100",children:ug.map(R=>i.jsx("option",{value:R,children:R},R))})]})]}),o.length>0&&i.jsxs("div",{children:[i.jsx(ie,{children:"Linked insights"}),i.jsx("p",{className:"mb-1 text-xs text-stone-500 dark:text-stone-400",children:"Select insights to link to this job"}),i.jsx("div",{className:"max-h-32 overflow-y-auto rounded-xl border border-stone-300 p-2 dark:border-stone-600 dark:bg-stone-800",children:o.map(R=>i.jsxs("label",{className:"flex cursor-pointer items-center gap-2 rounded-lg px-2 py-1.5 hover:bg-stone-100 dark:hover:bg-stone-700",children:[i.jsx("input",{type:"checkbox",checked:y.includes(R.id),onChange:U=>b(M=>U.target.checked?[...M,R.id]:M.filter(P=>P!==R.id)),className:"rounded border-stone-300 text-accent focus:ring-accent"}),i.jsx("span",{className:"text-sm text-stone-700 dark:text-stone-200",children:R.title})]},R.id))})]}),i.jsxs("div",{children:[i.jsx(ie,{children:"Struggles"}),i.jsx("p",{className:"mb-1 text-xs text-stone-500 dark:text-stone-400",children:"One item per line"}),i.jsx(ms,{value:k,onChange:x,placeholder:`e.g. Time pressure
Lack of information`,rows:2})]}),i.jsxs("div",{children:[i.jsx(ie,{children:"Functional dimensions"}),i.jsx("p",{className:"mb-1 text-xs text-stone-500 dark:text-stone-400",children:"One item per line"}),i.jsx(ms,{value:m,onChange:g,placeholder:`e.g. Efficiency
Accuracy`,rows:2})]}),i.jsxs("div",{children:[i.jsx(ie,{children:"Social dimensions"}),i.jsx("p",{className:"mb-1 text-xs text-stone-500 dark:text-stone-400",children:"One item per line"}),i.jsx(ms,{value:S,onChange:I,placeholder:`e.g. Collaboration
Status`,rows:2})]}),i.jsxs("div",{children:[i.jsx(ie,{children:"Emotional dimensions"}),i.jsx("p",{className:"mb-1 text-xs text-stone-500 dark:text-stone-400",children:"One item per line"}),i.jsx(ms,{value:E,onChange:j,placeholder:`e.g. Confidence
Anxiety`,rows:2})]}),i.jsxs("div",{children:[i.jsx(ie,{htmlFor:"job-solutions",children:"Solutions and workarounds"}),i.jsx("textarea",{id:"job-solutions",value:A,onChange:R=>J(R.target.value),rows:3,className:"w-full rounded-xl border border-stone-300 px-4 py-2.5 focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100 dark:placeholder-stone-500",placeholder:"Describe solutions and workarounds"})]})]})}):null}const fg=400,pg="One item per line",Hd=["High","Medium","Low"],mg=["High","Medium","Low"];function hg(){var J;const e=L(w=>{const R=w.selectedPhaseId;return R?w.phases.find(U=>U.id===R)??null:null}),t=L(w=>e?w.journeys.find(R=>R.id===e.journeyId)??null:null),n=L(w=>t?w.projects.find(R=>R.id===t.projectId)??null:null),r=L(w=>w.jobs),o=L(w=>w.updateJob),s=n?r.filter(w=>w.clientId===n.clientId):[],l=L(w=>e?w.opportunities.filter(R=>R.phaseId===e.id).sort((R,U)=>R.stageOrder-U.stageOrder):[]),a=L(w=>w.updatePhase),c=L(w=>w.deletePhase),d=L(w=>w.setSelectedPhaseId),p=L(w=>w.createOpportunity),u=L(w=>w.updateOpportunity),f=L(w=>w.deleteOpportunity),[h,y]=v.useState(gg()),[b,k]=v.useState(!0),[x,m]=v.useState(!1),[g,S]=v.useState(null),I=v.useRef(null),E=v.useCallback(()=>{e&&(y({...e}),k(!0))},[e==null?void 0:e.id,e==null?void 0:e.updatedAt]);v.useEffect(()=>{E()},[e==null?void 0:e.id,E]);const j=v.useCallback(w=>{y(R=>({...R,...w})),k(!1),I.current&&clearTimeout(I.current),I.current=setTimeout(()=>{e&&(a(e.id,w),k(!0)),I.current=null},fg)},[e,a]),A=()=>{e&&(c(e.id),d(null),m(!1))};return e?i.jsxs(i.Fragment,{children:[i.jsx(jp,{isOpen:!!e,onClose:()=>d(null),title:h.title||"Phase details",children:i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"h-5",children:[!b&&i.jsx("p",{className:"text-sm text-amber-600",children:"Saving..."}),b&&!(e!=null&&e.title)&&i.jsx("p",{className:"text-sm text-stone-400 dark:text-stone-200",children:"Changes auto-save"}),b&&(e==null?void 0:e.title)&&i.jsx("p",{className:"text-sm text-emerald-600",children:" Saved"})]}),i.jsxs("section",{className:"rounded-2xl border border-stone-200 bg-warm-50/50 p-5 dark:border-stone-600 dark:bg-stone-800/50",children:[i.jsx("h3",{className:"mb-4 text-xs font-semibold uppercase tracking-wider text-stone-500 dark:text-stone-200",children:"Overview"}),i.jsxs("div",{className:"space-y-5",children:[i.jsxs("div",{children:[i.jsx("label",{className:"mb-2 block text-sm font-medium text-stone-700 dark:text-stone-300",children:"Title"}),i.jsx("input",{type:"text",value:h.title,onChange:w=>j({title:w.target.value}),className:"w-full rounded-xl border border-stone-300 px-4 py-3 focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"mb-2 block text-sm font-medium text-stone-700 dark:text-stone-300",children:"Description"}),i.jsx("textarea",{value:h.description,onChange:w=>j({description:w.target.value}),rows:3,className:"w-full rounded-xl border border-stone-300 px-4 py-3 focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"mb-2 block text-sm font-medium text-stone-700 dark:text-stone-300",children:"Image"}),i.jsx("input",{type:"url",value:h.imageUrl??"",onChange:w=>j({imageUrl:w.target.value}),placeholder:"https://example.com/image.jpg",className:"w-full rounded-xl border border-stone-300 px-4 py-3 focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100 dark:placeholder-stone-500"}),h.imageUrl&&i.jsx("img",{src:h.imageUrl,alt:"Preview",className:"mt-2 max-h-32 rounded-lg object-contain",onError:w=>{w.target.style.display="none"}})]})]})]}),i.jsxs("section",{className:"rounded-2xl border border-stone-200 bg-warm-50/50 p-5 dark:border-stone-600 dark:bg-stone-800/50",children:[i.jsx("h3",{className:"mb-4 text-xs font-semibold uppercase tracking-wider text-stone-500 dark:text-stone-200",children:"Customer"}),i.jsxs("div",{children:[i.jsx("label",{className:"mb-2 block text-sm font-medium text-stone-700 dark:text-stone-300",children:"Customer jobs & goals"}),i.jsx("p",{className:"mb-3 text-xs text-stone-500 dark:text-stone-200",children:"Select jobs from the Jobs tab to assign to this phase."}),i.jsxs("div",{className:"space-y-3",children:[(h.jobIds??[]).map(w=>{const R=s.find(U=>U.id===w);return R?i.jsxs("div",{className:"flex gap-2 rounded-xl border border-stone-200 bg-white p-3 dark:border-stone-600 dark:bg-stone-700/50",children:[i.jsxs("button",{type:"button",onClick:()=>S(R.id),className:"flex-1 rounded-lg border border-stone-300 px-3 py-2 text-left text-sm focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100",children:[i.jsx("span",{className:"block truncate",children:R.name||"Untitled job"}),i.jsx("span",{className:`mt-0.5 inline-flex rounded-md px-1.5 py-0.5 text-xs font-medium ${R.tag==="Functional"?"bg-blue-100 text-blue-800 dark:bg-blue-900/60 dark:text-blue-200":R.tag==="Social"?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/60 dark:text-emerald-200":"bg-amber-100 text-amber-800 dark:bg-amber-900/60 dark:text-amber-200"}`,children:R.tag})]}),i.jsx("button",{type:"button",onClick:()=>j({jobIds:(h.jobIds??[]).filter(U=>U!==R.id)}),className:"rounded-lg p-2 text-stone-400 hover:bg-red-50 hover:text-red-500 dark:hover:bg-red-900/30 dark:hover:text-red-400","aria-label":"Remove job from phase",children:i.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},R.id):null}),i.jsxs("select",{value:"",onChange:w=>{const R=w.target.value;R&&j({jobIds:[...h.jobIds??[],R]}),w.target.value=""},className:"w-full rounded-xl border border-stone-300 px-4 py-3 text-sm text-stone-500 focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-200",children:[i.jsx("option",{value:"",children:"+ Add job to phase"}),s.filter(w=>!(h.jobIds??[]).includes(w.id)).map(w=>i.jsx("option",{value:w.id,children:w.name},w.id))]})]})]})]}),i.jsxs("section",{className:"rounded-2xl border border-stone-200 bg-warm-50/50 p-5 dark:border-stone-600 dark:bg-stone-800/50",children:[i.jsx("h3",{className:"mb-4 text-xs font-semibold uppercase tracking-wider text-stone-500 dark:text-stone-200",children:"Experience"}),i.jsxs("div",{className:"space-y-5",children:[i.jsxs("div",{children:[i.jsx("label",{className:"mb-2 block text-sm font-medium text-stone-700 dark:text-stone-300",children:"Front stage actions"}),i.jsx("p",{className:"mb-1.5 text-xs text-stone-500 dark:text-stone-200",children:pg}),i.jsx("textarea",{value:h.frontStageActions,onChange:w=>j({frontStageActions:w.target.value}),rows:3,placeholder:"e.g. Visit website, Call support (one per line)",className:"w-full rounded-xl border border-stone-300 px-4 py-3 focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"mb-2 block text-sm font-medium text-stone-700 dark:text-stone-300",children:"Struggles"}),i.jsx("p",{className:"mb-3 text-xs text-stone-500 dark:text-stone-200",children:"Add struggles with text and priority (High, Medium, Low)"}),i.jsxs("div",{className:"space-y-3",children:[Tt(h.struggles).map((w,R)=>{const U=Tt(h.struggles),M=P=>j({struggles:ps(P)});return i.jsxs("div",{className:"flex gap-2 rounded-xl border border-stone-200 bg-white p-3 dark:border-stone-600 dark:bg-stone-700/50",children:[i.jsx("input",{type:"text",value:w.text,onChange:P=>{const $=[...U];$[R]={...$[R],text:P.target.value},M($)},placeholder:"Struggle description",className:"flex-1 rounded-lg border border-stone-300 px-3 py-2 text-sm focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100"}),i.jsx("select",{value:w.tag,onChange:P=>{const $=[...U];$[R]={...$[R],tag:P.target.value},M($)},className:"rounded-lg border border-stone-300 px-3 py-2 text-sm focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100",children:Hd.map(P=>i.jsx("option",{value:P,children:P},P))}),i.jsx("button",{type:"button",onClick:()=>M(U.filter((P,$)=>$!==R)),className:"rounded-lg p-2 text-stone-400 hover:bg-red-50 hover:text-red-500 dark:hover:bg-red-900/30 dark:hover:text-red-400","aria-label":"Remove struggle",children:i.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},R)}),i.jsx("button",{type:"button",onClick:()=>{const w=Tt(h.struggles);j({struggles:ps([...w,{text:"",tag:"Medium"}])})},className:"w-full rounded-xl border-2 border-dashed border-stone-300 px-4 py-3 text-sm text-stone-500 hover:border-accent hover:bg-accent-muted/30 hover:text-accent dark:border-stone-600 dark:text-stone-200 dark:hover:border-accent/50 dark:hover:bg-accent/10",children:"+ Add struggle"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"mb-2 block text-sm font-medium text-stone-700 dark:text-stone-300",children:"Internal struggles"}),i.jsx("p",{className:"mb-3 text-xs text-stone-500 dark:text-stone-200",children:"Internal team or process struggles with priority (High, Medium, Low)"}),i.jsxs("div",{className:"space-y-3",children:[Tt(h.internalStruggles??"").map((w,R)=>{const U=Tt(h.internalStruggles??""),M=P=>j({internalStruggles:ps(P)});return i.jsxs("div",{className:"flex gap-2 rounded-xl border border-stone-200 bg-warm-50/50 p-3 dark:border-stone-600 dark:bg-stone-700/50",children:[i.jsx("input",{type:"text",value:w.text,onChange:P=>{const $=[...U];$[R]={...$[R],text:P.target.value},M($)},placeholder:"Internal struggle description",className:"flex-1 rounded-lg border border-stone-300 px-3 py-2 text-sm focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100"}),i.jsx("select",{value:w.tag,onChange:P=>{const $=[...U];$[R]={...$[R],tag:P.target.value},M($)},className:"rounded-lg border border-stone-300 px-3 py-2 text-sm focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100",children:Hd.map(P=>i.jsx("option",{value:P,children:P},P))}),i.jsx("button",{type:"button",onClick:()=>M(U.filter((P,$)=>$!==R)),className:"rounded-lg p-2 text-stone-400 hover:bg-red-50 hover:text-red-500 dark:hover:bg-red-900/30 dark:hover:text-red-400","aria-label":"Remove",children:i.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},R)}),i.jsx("button",{type:"button",onClick:()=>{const w=Tt(h.internalStruggles??"");j({internalStruggles:ps([...w,{text:"",tag:"Medium"}])})},className:"w-full rounded-xl border-2 border-dashed border-stone-300 px-4 py-3 text-sm text-stone-500 hover:border-accent hover:bg-accent-muted/30 hover:text-accent dark:border-stone-600 dark:text-stone-200 dark:hover:border-accent/50 dark:hover:bg-accent/10",children:"+ Add internal struggle"})]})]})]})]}),i.jsxs("section",{className:"rounded-2xl border border-stone-200 bg-warm-50/50 p-5 dark:border-stone-600 dark:bg-stone-800/50",children:[i.jsx("h3",{className:"mb-4 text-xs font-semibold uppercase tracking-wider text-stone-500 dark:text-stone-200",children:"Operations"}),i.jsxs("div",{className:"space-y-5",children:[i.jsxs("div",{children:[i.jsx("label",{className:"mb-2 block text-sm font-medium text-stone-700 dark:text-stone-300",children:"Back stage actions"}),i.jsx("textarea",{value:h.backStageActions,onChange:w=>j({backStageActions:w.target.value}),rows:2,className:"w-full rounded-xl border border-stone-300 px-4 py-3 focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"mb-2 block text-sm font-medium text-stone-700 dark:text-stone-300",children:"Systems"}),i.jsx("textarea",{value:h.systems??"",onChange:w=>j({systems:w.target.value}),rows:2,placeholder:"Systems supporting this phase",className:"w-full rounded-xl border border-stone-300 px-4 py-3 focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100 dark:placeholder-stone-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"mb-2 block text-sm font-medium text-stone-700 dark:text-stone-300",children:"Related processes"}),i.jsx("textarea",{value:h.relatedProcesses,onChange:w=>j({relatedProcesses:w.target.value}),rows:2,className:"w-full rounded-xl border border-stone-300 px-4 py-3 focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100"})]})]})]}),i.jsxs("section",{className:"rounded-2xl border border-stone-200 bg-warm-50/50 p-5 dark:border-stone-600 dark:bg-stone-800/50",children:[i.jsx("h3",{className:"mb-4 text-xs font-semibold uppercase tracking-wider text-stone-500 dark:text-stone-200",children:"Opportunities"}),i.jsxs("div",{children:[i.jsx("label",{className:"mb-2 block text-sm font-medium text-stone-700 dark:text-stone-300",children:"Opportunities"}),i.jsx("p",{className:"mb-3 text-xs text-stone-500 dark:text-stone-200",children:"Add opportunities with name and priority (High, Medium, or Low). Click an opportunity in the table to add details."}),i.jsxs("div",{className:"space-y-3",children:[l.map(w=>i.jsxs("div",{className:"flex gap-2 rounded-xl border border-stone-200 bg-white p-3 dark:border-stone-600 dark:bg-stone-700/50",children:[i.jsx("input",{type:"text",value:w.name,onChange:R=>u(w.id,{name:R.target.value.trim()||w.name}),placeholder:"Opportunity name",className:"flex-1 rounded-lg border border-stone-300 px-3 py-2 text-sm focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100"}),i.jsx("select",{value:w.priority,onChange:R=>u(w.id,{priority:R.target.value}),className:"rounded-lg border border-stone-300 px-3 py-2 text-sm focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100",children:mg.map(R=>i.jsx("option",{value:R,children:R},R))}),i.jsx("button",{type:"button",onClick:()=>f(w.id),className:"rounded-lg p-2 text-stone-400 hover:bg-red-50 hover:text-red-500 dark:hover:bg-red-900/30 dark:hover:text-red-400","aria-label":"Remove opportunity",children:i.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},w.id)),i.jsx("button",{type:"button",onClick:()=>{e&&t&&n&&p({clientId:n.clientId,projectId:n.id,journeyId:t.id,phaseId:e.id,name:"New opportunity",priority:"Medium"})},disabled:!e||!t||!n,className:"w-full rounded-xl border-2 border-dashed border-stone-300 px-4 py-3 text-sm text-stone-500 hover:border-accent hover:bg-accent-muted/30 hover:text-accent dark:border-stone-600 dark:text-stone-200 dark:hover:border-accent/50 dark:hover:bg-accent/10 disabled:opacity-50 disabled:hover:bg-transparent",children:"+ Add opportunity"})]})]})]}),i.jsxs("section",{className:"rounded-2xl border border-stone-200 bg-warm-50/50 p-5 dark:border-stone-600 dark:bg-stone-800/50",children:[i.jsx("h3",{className:"mb-4 text-xs font-semibold uppercase tracking-wider text-stone-500 dark:text-stone-200",children:"Related documents"}),i.jsx("p",{className:"mb-3 text-xs text-stone-500 dark:text-stone-200",children:"Link to SharePoint, Jira, Confluence, or other documents"}),i.jsxs("div",{className:"space-y-3",children:[Ms(h.relatedDocuments??"").map(w=>{const R=Ms(h.relatedDocuments??""),U=M=>j({relatedDocuments:Fd(M)});return i.jsxs("div",{className:"flex gap-2 rounded-xl border border-stone-200 bg-warm-50/50 p-3 dark:border-stone-600 dark:bg-stone-700/50",children:[i.jsx("input",{type:"text",value:w.label,onChange:M=>{const P=R.map($=>$.id===w.id?{...$,label:M.target.value}:$);U(P)},placeholder:"Label (e.g. Jira ticket, Confluence page)",className:"flex-1 rounded-lg border border-stone-300 px-3 py-2 text-sm focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100"}),i.jsx("input",{type:"url",value:w.url,onChange:M=>{const P=R.map($=>$.id===w.id?{...$,url:M.target.value}:$);U(P)},placeholder:"https://...",className:"flex-1 rounded-lg border border-stone-300 px-3 py-2 text-sm focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100"}),i.jsx("button",{type:"button",onClick:()=>U(R.filter(M=>M.id!==w.id)),className:"rounded-lg p-2 text-stone-400 hover:bg-red-50 hover:text-red-500 dark:hover:bg-red-900/30 dark:hover:text-red-400","aria-label":"Remove document",children:i.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},w.id)}),i.jsx("button",{type:"button",onClick:()=>{const w=Ms(h.relatedDocuments??"");j({relatedDocuments:Fd([...w,{id:jt(),label:"",url:""}])})},className:"w-full rounded-xl border-2 border-dashed border-stone-300 px-4 py-3 text-sm text-stone-500 hover:border-accent hover:bg-accent-muted/30 hover:text-accent dark:border-stone-600 dark:text-stone-200 dark:hover:border-accent/50 dark:hover:bg-accent/10",children:"+ Add document link"})]})]}),t&&(((J=t.customRows)==null?void 0:J.length)??0)>0&&i.jsxs("section",{className:"rounded-2xl border border-stone-200 bg-warm-50/50 p-5 dark:border-stone-600 dark:bg-stone-800/50",children:[i.jsx("h3",{className:"mb-4 text-xs font-semibold uppercase tracking-wider text-stone-500 dark:text-stone-200",children:"Custom rows"}),i.jsx("div",{className:"space-y-5",children:(t.customRows??[]).map(w=>i.jsxs("div",{children:[i.jsx("label",{className:"mb-2 block text-sm font-medium text-stone-700 dark:text-stone-300",children:w.label}),i.jsx("textarea",{value:(h.customRowValues??{})[w.id]??"",onChange:R=>j({customRowValues:{...h.customRowValues??{},[w.id]:R.target.value}}),rows:2,className:"w-full rounded-xl border border-stone-300 px-4 py-3 focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100"})]},w.id))})]}),i.jsx("div",{className:"border-t border-stone-200 pt-6 dark:border-stone-600",children:i.jsx("button",{onClick:()=>m(!0),className:"rounded-xl border border-red-200 px-4 py-3 text-sm font-medium text-red-600 hover:bg-red-50 dark:border-red-900/50 dark:hover:bg-red-900/20",children:"Delete phase"})})]})}),g&&(()=>{const w=s.find(R=>R.id===g);return w?i.jsx(Ei,{isOpen:!0,onClose:()=>S(null),job:w,jobIndex:0,onSave:(R,U)=>{o(w.id,U),S(null)}}):null})(),i.jsx(Ro,{isOpen:x,onClose:()=>m(!1),onConfirm:A,title:"Delete phase",message:"Are you sure you want to delete this phase? This action cannot be undone."})]}):null}function gg(){return{id:"",journeyId:"",order:0,title:"",description:"",imageUrl:"",struggles:"",internalStruggles:"",relatedDocuments:"",opportunities:"",frontStageActions:"",backStageActions:"",systems:"",relatedProcesses:"",systemsTechnologiesChannels:"",jobIds:[],customRowValues:{},createdAt:"",updatedAt:""}}function xg(e){const t=e.selectedClientId?e.clients.find(s=>s.id===e.selectedClientId):null,n=e.selectedProjectId?e.projects.find(s=>s.id===e.selectedProjectId):null,r=e.selectedJourneyId?e.journeys.find(s=>s.id===e.selectedJourneyId):null,o=r?e.phases.filter(s=>s.journeyId===r.id).sort((s,l)=>s.order-l.order):[];return{client:t,project:n,journey:r,journeyPhases:o}}function vg(e,t){var a,c,d;const n=e.trim().toLowerCase(),{client:r,project:o,journey:s,journeyPhases:l}=xg(t);if(!n||/^(hi|hello|hey|help|what can you do|\\?)\s*$/.test(n))return`I can answer questions about your journey mapper data. Try asking:

 **What's the current context?**  client, project, journey
 **List the phases** in this journey
 **Summarise** a phase by name (e.g. "Summarise Registration")
 **What opportunities** are in this journey?
 **List clients** or **list projects**
 **What struggles** or **customer jobs** in the current journey

Select a journey in the sidebar first for phase-specific questions.`;if(/\b(context|where am i|what('s| is) selected|current (client|project|journey)|what (client|project|journey) (am i|is) (on|selected))\b/.test(n)){if(!r&&!o&&!s)return"No client, project, or journey is selected. Use the sidebar to select a client, then a project, then a journey.";const p=[];return r&&p.push(`**Client:** ${r.name}${r.description?`  ${r.description}`:""}`),o&&p.push(`**Project:** ${o.name}${o.description?`  ${o.description}`:""}`),s&&p.push(`**Journey:** ${s.name}${s.description?`  ${s.description}`:""}`),p.join(`
`)||"I couldn't determine the current context."}if(/\b(clients?|list clients?|show clients?|who are my clients?|all clients?)\b/.test(n))return t.clients.length===0?"You have no clients yet. Create one from the home view.":`**Clients:**
`+t.clients.map(p=>` ${p.name}${p.description?`  ${p.description}`:""}`).join(`
`);if(/\b(projects?|list projects?|show projects?)\b/.test(n)){const p=r?t.projects.filter(u=>u.clientId===r.id):t.projects;return p.length===0?r?`${r.name} has no projects yet.`:"You have no projects yet.":(r?`**Projects for ${r.name}:**
`:`**Projects:**
`)+p.map(u=>` ${u.name}${u.description?`  ${u.description}`:""}`).join(`
`)}if(/\b(journeys?|list journeys?|show journeys?)\b/.test(n)){const p=o?t.journeys.filter(u=>u.projectId===o.id):t.journeys;return p.length===0?o?`${o.name} has no journeys yet.`:"You have no journeys yet.":(o?`**Journeys in ${o.name}:**
`:`**Journeys:**
`)+p.map(u=>` ${u.name}${u.description?`  ${u.description}`:""}`).join(`
`)}if(/\b(phases?|stages?|steps?)\b.*(journey|this|current|list|in)/.test(n)||/\b(list|show|what|get)\s*(the\s+)?phases?\b/.test(n)||/how many phases?/.test(n))return s?l.length===0?`"${s.name}" has no phases yet. Add phases from the journey map view.`:`**Phases in "${s.name}":**
`+l.map((p,u)=>`${u+1}. ${p.title}${p.description?`  ${p.description.slice(0,80)}${p.description.length>80?"":""}`:""}`).join(`
`):"Select a journey in the sidebar first, then I can list its phases.";if(/\b(summarise|summarize|summaries|describe|tell me about|what (is|about)|details? (of|for))\b/.test(n)){if(!s||l.length===0)return"Select a journey with phases first, then ask about a phase by name (e.g. Summarise Registration).";const p=e.replace(/^(summarise|summarize|summaries|describe|tell me about|what (is|about)|details? (of|for))\s+(the\s+)?/i,"").replace(/\s+phase\s*$/i,"").trim().toLowerCase(),u=l.find(h=>{const y=h.title.toLowerCase(),b=p.split(/\s+/).filter(k=>k.length>2);return y.includes(p)||p.includes(y)||b.some(k=>y.includes(k))});if(!u)return`I couldn't find a phase matching "${p}". Current phases: ${l.map(h=>h.title).join(", ")}.`;const f=[`**${u.title}**
${u.description||"No description."}`];if((a=u.frontStageActions)!=null&&a.trim()&&f.push(`**Front stage:** ${u.frontStageActions.slice(0,200)}${u.frontStageActions.length>200?"":""}`),(c=u.opportunities)!=null&&c.trim())try{const h=Er(u.opportunities);h.length&&f.push(`**Opportunities:** ${h.map(y=>`${y.name} (${y.tag})`).join(", ")}`)}catch{}return f.join(`

`)}if(/\b(opportunities?|what opportunities?|list opportunities?)\b/.test(n)){if(!s)return"Select a journey first so I can list opportunities.";const p=[];for(const u of l)if((d=u.opportunities)!=null&&d.trim())try{const f=Er(u.opportunities);f.length&&p.push(`**${u.title}:** ${f.map(h=>`${h.name} (${h.tag})`).join(", ")}`)}catch{}return p.length===0?`No opportunities have been added to "${s.name}" yet. Add them in the phase panel.`:`**Opportunities in "${s.name}":**

`+p.join(`

`)}if(/\b(struggles?|what struggles?|list struggles?|customer struggles?)\b/.test(n)){if(!s)return"Select a journey first so I can list struggles.";const p=[];for(const u of l){const f=Tt(u.struggles);f.length&&p.push(`**${u.title}:** ${f.map(h=>`${h.text} (${h.tag})`).join("; ")}`)}return p.length===0?`No customer struggles have been added to "${s.name}" yet. Add them in the phase panel.`:`**Customer struggles in "${s.name}":**

`+p.join(`

`)}if(/\b(internal struggles?|staff struggles?|back.?(office|stage) struggles?)\b/.test(n)){if(!s)return"Select a journey first so I can list internal struggles.";const p=[];for(const u of l){const f=Tt(u.internalStruggles??"");f.length&&p.push(`**${u.title}:** ${f.map(h=>`${h.text} (${h.tag})`).join("; ")}`)}return p.length===0?`No internal struggles have been added to "${s.name}" yet.`:`**Internal struggles in "${s.name}":**

`+p.join(`

`)}if(/\b(customer jobs?|jobs? (and|&) goals?|list jobs?|what jobs?)\b/.test(n)){if(!s)return"Select a journey first so I can list customer jobs.";const p=[];for(const u of l){const h=(u.jobIds??[]).map(y=>t.jobs.find(b=>b.id===y)).filter(y=>!!y);h.length&&p.push(`**${u.title}:** ${h.map(y=>`${y.name}${y.tag?` (${y.tag})`:""}`).join("; ")}`)}return p.length===0?`No customer jobs have been added to "${s.name}" yet. Add jobs in the Jobs tab, then assign them to phases.`:`**Customer jobs in "${s.name}":**

`+p.join(`

`)}return/\b(health|phase health|how is health calculated)\b/.test(n)?`**Phase health** is calculated from:

 **Base:** 50
 **Customer struggles:** High 12, Medium 6, Low 2 each
 **Internal struggles:** High 10, Medium 5, Low 2 each
 **Opportunities:** High +10, Medium +5, Low +2 each
 **Job mix:** Social and Emotional jobs add up to +25 (differentiation potential)

The score is clamped between 0 and 100. Hover the info icon on the Phase health row for a quick reference.`:`I can only answer from your journey mapper data. Try:

 **"What's the current context?"**  see selected client, project, journey
 **"List the phases"**  requires a journey to be selected
 **"What opportunities in this journey?"**
 **"List clients"** or **"List projects"**
 **"What struggles?"** or **"Customer jobs?"**  for the selected journey

Make sure you've selected a client, project, and journey in the sidebar for journey-specific questions.`}function yg({isOpen:e,onClose:t}){const[n,r]=v.useState(()=>[{id:"welcome",role:"assistant",content:"Hi! I'm your journey mapper assistant. Ask me about your clients, projects, journeys, and phases. The map stays visible so you can keep context."}]),[o,s]=v.useState(""),[l,a]=v.useState(!1),c=v.useRef(null),d=L(m=>m.clients),p=L(m=>m.projects),u=L(m=>m.journeys),f=L(m=>m.phases),h=L(m=>m.jobs),y=L(m=>m.selectedClientId),b=L(m=>m.selectedProjectId),k=L(m=>m.selectedJourneyId);v.useEffect(()=>{var m;(m=c.current)==null||m.scrollTo({top:c.current.scrollHeight,behavior:"smooth"})},[n]);const x=()=>{const m=o.trim();if(!m||l)return;s("");const g={id:`user-${Date.now()}`,role:"user",content:m};r(S=>[...S,g]),a(!0),setTimeout(()=>{const I=vg(m,{clients:d,projects:p,journeys:u,phases:f,jobs:h,selectedClientId:y,selectedProjectId:b,selectedJourneyId:k}),E={id:`assistant-${Date.now()}`,role:"assistant",content:I};r(j=>[...j,E]),a(!1)},300)};return e?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"fixed inset-0 z-40 bg-black/20",onClick:t,"aria-hidden":"true"}),i.jsxs("div",{className:"fixed right-0 top-0 z-50 flex h-full w-full max-w-[420px] flex-col border-l border-stone-200 bg-white shadow-elevated animate-in dark:border-stone-600 dark:bg-stone-800 dark:shadow-elevated-dark sm:max-w-[420px]",role:"dialog","aria-modal":"true","aria-label":"Chat with journey data",children:[i.jsxs("div",{className:"flex flex-shrink-0 items-center justify-between border-b border-stone-200 px-4 py-3 dark:border-stone-600",children:[i.jsx("h2",{className:"text-base font-semibold text-stone-900 dark:text-stone-100",children:"Chat"}),i.jsx("button",{onClick:t,className:"rounded-lg p-2 text-stone-500 hover:bg-warm-100 hover:text-stone-700 dark:text-stone-400 dark:hover:bg-stone-700","aria-label":"Close chat",children:i.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),i.jsxs("div",{ref:c,className:"flex-1 overflow-y-auto p-4 space-y-4",children:[n.map(m=>i.jsx("div",{className:`flex ${m.role==="user"?"justify-end":"justify-start"}`,children:i.jsx("div",{className:`max-w-[90%] rounded-2xl px-4 py-2.5 text-sm ${m.role==="user"?"bg-accent text-white":"bg-warm-100 text-stone-800 dark:bg-stone-700 dark:text-stone-200"}`,children:i.jsx("div",{className:"whitespace-pre-wrap break-words [&_p]:mb-2 last:[&_p]:mb-0",children:m.role==="assistant"?m.content.split(/\n\n+/).map((g,S)=>i.jsx("p",{children:g.split(/(\*\*[^*]+\*\*)/).map((I,E)=>I.startsWith("**")&&I.endsWith("**")?i.jsx("strong",{children:I.slice(2,-2)},E):i.jsx("span",{children:I},E))},S)):i.jsx("p",{children:m.content})})})},m.id)),l&&i.jsx("div",{className:"flex justify-start",children:i.jsx("div",{className:"rounded-2xl bg-warm-100 px-4 py-2.5 text-sm text-stone-500 dark:bg-stone-700 dark:text-stone-400",children:"Thinking"})})]}),i.jsx("div",{className:"flex-shrink-0 border-t border-stone-200 p-3 dark:border-stone-600",children:i.jsxs("form",{onSubmit:m=>{m.preventDefault(),x()},className:"flex gap-2",children:[i.jsx("input",{type:"text",value:o,onChange:m=>s(m.target.value),placeholder:"Ask about your journey data",className:"min-w-0 flex-1 rounded-xl border border-stone-300 px-4 py-2.5 text-sm focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100 dark:placeholder-stone-500",disabled:l}),i.jsx("button",{type:"submit",disabled:!o.trim()||l,className:"rounded-xl bg-accent px-4 py-2.5 text-sm font-medium text-white hover:bg-accent-hover disabled:opacity-50 disabled:cursor-not-allowed",children:"Send"})]})})]})]}):null}function bg({title:e,description:t,action:n}){return i.jsx("div",{className:"flex flex-1 flex-col items-center justify-center rounded-2xl border-2 border-dashed border-stone-200 bg-warm-50/80 p-16 text-center dark:border-stone-600 dark:bg-stone-800/50",children:i.jsxs("div",{className:"mx-auto max-w-md",children:[i.jsx("h3",{className:"text-xl font-semibold text-stone-900 dark:text-stone-100",children:e}),t&&i.jsx("p",{className:"mt-3 text-sm text-stone-500 leading-relaxed dark:text-stone-300",children:t}),n!=null&&i.jsx("div",{className:"mt-8",children:n})]})})}function kg(){const e=L(a=>a.clients),t=L(a=>a.projects),n=L(a=>a.setCreateClientModalOpen),r=L(a=>a.setSelectedClientId),o=L(a=>a.deleteClient),[s,l]=v.useState(null);return i.jsxs("div",{className:"flex flex-1 flex-col overflow-auto p-10 md:p-14",children:[i.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[i.jsx("h2",{className:"text-2xl font-bold tracking-tight text-stone-900 dark:text-stone-100",children:"Clients"}),i.jsx("button",{onClick:()=>n(!0),className:"rounded-2xl bg-accent px-6 py-3 text-sm font-semibold text-white shadow-soft transition-all duration-200 hover:bg-accent-hover hover:shadow-glow hover:-translate-y-0.5 active:translate-y-0 dark:hover:shadow-glow-dark",children:"Add client"})]}),i.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:e.map(a=>{const c=t.filter(d=>d.clientId===a.id).length;return i.jsxs("div",{className:"group relative rounded-2xl border border-stone-200/80 bg-white/90 shadow-soft backdrop-blur-sm transition-all duration-200 hover:-translate-y-0.5 hover:border-accent/20 hover:shadow-elevated hover:shadow-accent/5 dark:border-stone-600/80 dark:bg-stone-800/90 dark:hover:border-violet-500/25 dark:hover:shadow-elevated-dark",children:[i.jsx("button",{onClick:()=>r(a.id),className:"w-full p-6 pr-12 text-left",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"flex h-12 w-12 flex-shrink-0 items-center justify-center overflow-hidden rounded-xl bg-accent/10 transition-colors group-hover:bg-accent/20 dark:bg-violet-500/15 dark:group-hover:bg-violet-500/25",children:a.logoUrl?i.jsxs(i.Fragment,{children:[i.jsx("img",{src:a.logoUrl,alt:"",className:"h-full w-full object-contain p-1",onError:d=>{var u;const p=d.target;p.style.display="none",(u=p.nextElementSibling)==null||u.classList.remove("hidden")}}),i.jsx("span",{className:"hidden text-lg font-semibold text-accent dark:text-accent-light","aria-hidden":"true",children:a.name.slice(0,2).toUpperCase()})]}):i.jsx("span",{className:"text-lg font-semibold text-accent dark:text-accent-light",children:a.name.slice(0,2).toUpperCase()})}),i.jsxs("div",{className:"min-w-0 flex-1",children:[i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsx("h3",{className:"font-semibold text-stone-900 transition-colors group-hover:text-accent dark:text-stone-100 dark:group-hover:text-accent-light",children:a.name}),c>0&&i.jsxs("span",{className:"rounded-full bg-accent/15 px-2.5 py-0.5 text-xs font-medium text-accent dark:bg-violet-500/15 dark:text-accent-light",children:[c," ",c===1?"Meta-Journey":"Meta-Journeys"]})]}),a.description&&i.jsx("p",{className:"mt-2 line-clamp-2 text-sm text-stone-500 dark:text-stone-300",children:a.description})]})]})}),i.jsx("button",{onClick:d=>{d.stopPropagation(),l({id:a.id,name:a.name})},className:"absolute right-3 top-3 rounded-lg p-2 text-stone-400 hover:bg-red-50 hover:text-red-500 dark:hover:bg-red-900/30 dark:hover:text-red-400","aria-label":"Delete client",children:i.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},a.id)})}),s&&i.jsx(Ro,{isOpen:!0,onClose:()=>l(null),onConfirm:()=>{o(s.id),l(null)},title:"Delete client",message:`Are you sure you want to delete "${s.name}"? All projects and journeys under this client will also be deleted.`})]})}function jg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return v.useMemo(()=>r=>{t.forEach(o=>o(r))},t)}const Pi=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Dr(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function gc(e){return"nodeType"in e}function st(e){var t,n;return e?Dr(e)?e:gc(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function xc(e){const{Document:t}=st(e);return e instanceof t}function Bo(e){return Dr(e)?!1:e instanceof st(e).HTMLElement}function wp(e){return e instanceof st(e).SVGElement}function Rr(e){return e?Dr(e)?e.document:gc(e)?xc(e)?e:Bo(e)||wp(e)?e.ownerDocument:document:document:document}const zt=Pi?v.useLayoutEffect:v.useEffect;function Oi(e){const t=v.useRef(e);return zt(()=>{t.current=e}),v.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.current==null?void 0:t.current(...r)},[])}function wg(){const e=v.useRef(null),t=v.useCallback((r,o)=>{e.current=setInterval(r,o)},[]),n=v.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function Ao(e,t){t===void 0&&(t=[e]);const n=v.useRef(e);return zt(()=>{n.current!==e&&(n.current=e)},t),n}function Uo(e,t){const n=v.useRef();return v.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function oi(e){const t=Oi(e),n=v.useRef(null),r=v.useCallback(o=>{o!==n.current&&(t==null||t(o,n.current)),n.current=o},[]);return[n,r]}function si(e){const t=v.useRef();return v.useEffect(()=>{t.current=e},[e]),t.current}let xl={};function Wo(e,t){return v.useMemo(()=>{if(t)return t;const n=xl[e]==null?0:xl[e]+1;return xl[e]=n,e+"-"+n},[e,t])}function Sp(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.reduce((s,l)=>{const a=Object.entries(l);for(const[c,d]of a){const p=s[c];p!=null&&(s[c]=p+e*d)}return s},{...t})}}const yr=Sp(1),Lo=Sp(-1);function Sg(e){return"clientX"in e&&"clientY"in e}function Mi(e){if(!e)return!1;const{KeyboardEvent:t}=st(e.target);return t&&e instanceof t}function Cg(e){if(!e)return!1;const{TouchEvent:t}=st(e.target);return t&&e instanceof t}function ii(e){if(Cg(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return Sg(e)?{x:e.clientX,y:e.clientY}:null}const Mt=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[Mt.Translate.toString(e),Mt.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),$d="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Ng(e){return e.matches($d)?e:e.querySelector($d)}const Ig={display:"none"};function Eg(e){let{id:t,value:n}=e;return ye.createElement("div",{id:t,style:Ig},n)}function Pg(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return ye.createElement("div",{id:t,style:o,role:"status","aria-live":r,"aria-atomic":!0},n)}function Og(){const[e,t]=v.useState("");return{announce:v.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const Cp=v.createContext(null);function Mg(e){const t=v.useContext(Cp);v.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function Dg(){const[e]=v.useState(()=>new Set),t=v.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[v.useCallback(r=>{let{type:o,event:s}=r;e.forEach(l=>{var a;return(a=l[o])==null?void 0:a.call(l,s)})},[e]),t]}const Rg={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Ag={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Lg(e){let{announcements:t=Ag,container:n,hiddenTextDescribedById:r,screenReaderInstructions:o=Rg}=e;const{announce:s,announcement:l}=Og(),a=Wo("DndLiveRegion"),[c,d]=v.useState(!1);if(v.useEffect(()=>{d(!0)},[]),Mg(v.useMemo(()=>({onDragStart(u){let{active:f}=u;s(t.onDragStart({active:f}))},onDragMove(u){let{active:f,over:h}=u;t.onDragMove&&s(t.onDragMove({active:f,over:h}))},onDragOver(u){let{active:f,over:h}=u;s(t.onDragOver({active:f,over:h}))},onDragEnd(u){let{active:f,over:h}=u;s(t.onDragEnd({active:f,over:h}))},onDragCancel(u){let{active:f,over:h}=u;s(t.onDragCancel({active:f,over:h}))}}),[s,t])),!c)return null;const p=ye.createElement(ye.Fragment,null,ye.createElement(Eg,{id:r,value:o.draggable}),ye.createElement(Pg,{id:a,announcement:l}));return n?fr.createPortal(p,n):p}var Fe;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Fe||(Fe={}));function li(){}function Mn(e,t){return v.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function Di(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return v.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const Ht=Object.freeze({x:0,y:0});function vc(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Tg(e,t){const n=ii(e);if(!n)return"0 0";const r={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return r.x+"% "+r.y+"%"}function yc(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function Jg(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function ga(e){let{left:t,top:n,height:r,width:o}=e;return[{x:t,y:n},{x:t+o,y:n},{x:t,y:n+r},{x:t+o,y:n+r}]}function Np(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function Bd(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const Fg=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=Bd(t,t.left,t.top),s=[];for(const l of r){const{id:a}=l,c=n.get(a);if(c){const d=vc(Bd(c),o);s.push({id:a,data:{droppableContainer:l,value:d}})}}return s.sort(yc)},_g=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=ga(t),s=[];for(const l of r){const{id:a}=l,c=n.get(a);if(c){const d=ga(c),p=o.reduce((f,h,y)=>f+vc(d[y],h),0),u=Number((p/4).toFixed(4));s.push({id:a,data:{droppableContainer:l,value:u}})}}return s.sort(yc)};function zg(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),o=Math.min(t.left+t.width,e.left+e.width),s=Math.min(t.top+t.height,e.top+e.height),l=o-r,a=s-n;if(r<o&&n<s){const c=t.width*t.height,d=e.width*e.height,p=l*a,u=p/(c+d-p);return Number(u.toFixed(4))}return 0}const Hg=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=[];for(const s of r){const{id:l}=s,a=n.get(l);if(a){const c=zg(a,t);c>0&&o.push({id:l,data:{droppableContainer:s,value:c}})}}return o.sort(Jg)};function $g(e,t){const{top:n,left:r,bottom:o,right:s}=t;return n<=e.y&&e.y<=o&&r<=e.x&&e.x<=s}const Bg=e=>{let{droppableContainers:t,droppableRects:n,pointerCoordinates:r}=e;if(!r)return[];const o=[];for(const s of t){const{id:l}=s,a=n.get(l);if(a&&$g(r,a)){const d=ga(a).reduce((u,f)=>u+vc(r,f),0),p=Number((d/4).toFixed(4));o.push({id:l,data:{droppableContainer:s,value:p}})}}return o.sort(yc)};function Ug(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function Ip(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Ht}function Wg(e){return function(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];return o.reduce((l,a)=>({...l,top:l.top+e*a.y,bottom:l.bottom+e*a.y,left:l.left+e*a.x,right:l.right+e*a.x}),{...n})}}const Vg=Wg(1);function Ep(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function Kg(e,t,n){const r=Ep(t);if(!r)return e;const{scaleX:o,scaleY:s,x:l,y:a}=r,c=e.left-l-(1-o)*parseFloat(n),d=e.top-a-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),p=o?e.width/o:e.width,u=s?e.height/s:e.height;return{width:p,height:u,top:d,right:c+p,bottom:d+u,left:c}}const Qg={ignoreTransform:!1};function Ar(e,t){t===void 0&&(t=Qg);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:d,transformOrigin:p}=st(e).getComputedStyle(e);d&&(n=Kg(n,d,p))}const{top:r,left:o,width:s,height:l,bottom:a,right:c}=n;return{top:r,left:o,width:s,height:l,bottom:a,right:c}}function Ud(e){return Ar(e,{ignoreTransform:!0})}function Yg(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function Gg(e,t){return t===void 0&&(t=st(e).getComputedStyle(e)),t.position==="fixed"}function Xg(e,t){t===void 0&&(t=st(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const s=t[o];return typeof s=="string"?n.test(s):!1})}function Ri(e,t){const n=[];function r(o){if(t!=null&&n.length>=t||!o)return n;if(xc(o)&&o.scrollingElement!=null&&!n.includes(o.scrollingElement))return n.push(o.scrollingElement),n;if(!Bo(o)||wp(o)||n.includes(o))return n;const s=st(e).getComputedStyle(o);return o!==e&&Xg(o,s)&&n.push(o),Gg(o,s)?n:r(o.parentNode)}return e?r(e):n}function Pp(e){const[t]=Ri(e,1);return t??null}function vl(e){return!Pi||!e?null:Dr(e)?e:gc(e)?xc(e)||e===Rr(e).scrollingElement?window:Bo(e)?e:null:null}function Op(e){return Dr(e)?e.scrollX:e.scrollLeft}function Mp(e){return Dr(e)?e.scrollY:e.scrollTop}function xa(e){return{x:Op(e),y:Mp(e)}}var $e;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})($e||($e={}));function Dp(e){return!Pi||!e?!1:e===document.scrollingElement}function Rp(e){const t={x:0,y:0},n=Dp(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},o=e.scrollTop<=t.y,s=e.scrollLeft<=t.x,l=e.scrollTop>=r.y,a=e.scrollLeft>=r.x;return{isTop:o,isLeft:s,isBottom:l,isRight:a,maxScroll:r,minScroll:t}}const qg={x:.2,y:.2};function Zg(e,t,n,r,o){let{top:s,left:l,right:a,bottom:c}=n;r===void 0&&(r=10),o===void 0&&(o=qg);const{isTop:d,isBottom:p,isLeft:u,isRight:f}=Rp(e),h={x:0,y:0},y={x:0,y:0},b={height:t.height*o.y,width:t.width*o.x};return!d&&s<=t.top+b.height?(h.y=$e.Backward,y.y=r*Math.abs((t.top+b.height-s)/b.height)):!p&&c>=t.bottom-b.height&&(h.y=$e.Forward,y.y=r*Math.abs((t.bottom-b.height-c)/b.height)),!f&&a>=t.right-b.width?(h.x=$e.Forward,y.x=r*Math.abs((t.right-b.width-a)/b.width)):!u&&l<=t.left+b.width&&(h.x=$e.Backward,y.x=r*Math.abs((t.left+b.width-l)/b.width)),{direction:h,speed:y}}function ex(e){if(e===document.scrollingElement){const{innerWidth:s,innerHeight:l}=window;return{top:0,left:0,right:s,bottom:l,width:s,height:l}}const{top:t,left:n,right:r,bottom:o}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:o,width:e.clientWidth,height:e.clientHeight}}function Ap(e){return e.reduce((t,n)=>yr(t,xa(n)),Ht)}function tx(e){return e.reduce((t,n)=>t+Op(n),0)}function nx(e){return e.reduce((t,n)=>t+Mp(n),0)}function Lp(e,t){if(t===void 0&&(t=Ar),!e)return;const{top:n,left:r,bottom:o,right:s}=t(e);Pp(e)&&(o<=0||s<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const rx=[["x",["left","right"],tx],["y",["top","bottom"],nx]];class bc{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Ri(n),o=Ap(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[s,l,a]of rx)for(const c of l)Object.defineProperty(this,c,{get:()=>{const d=a(r),p=o[s]-d;return this.rect[c]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class po{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var o;(o=this.target)==null||o.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function ox(e){const{EventTarget:t}=st(e);return e instanceof t?e:Rr(e)}function yl(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var wt;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(wt||(wt={}));function Wd(e){e.preventDefault()}function sx(e){e.stopPropagation()}var me;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(me||(me={}));const Tp={start:[me.Space,me.Enter],cancel:[me.Esc],end:[me.Space,me.Enter,me.Tab]},ix=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case me.Right:return{...n,x:n.x+25};case me.Left:return{...n,x:n.x-25};case me.Down:return{...n,y:n.y+25};case me.Up:return{...n,y:n.y-25}}};class Lr{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new po(Rr(n)),this.windowListeners=new po(st(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(wt.Resize,this.handleCancel),this.windowListeners.add(wt.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(wt.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&Lp(r),n(Ht)}handleKeyDown(t){if(Mi(t)){const{active:n,context:r,options:o}=this.props,{keyboardCodes:s=Tp,coordinateGetter:l=ix,scrollBehavior:a="smooth"}=o,{code:c}=t;if(s.end.includes(c)){this.handleEnd(t);return}if(s.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:d}=r.current,p=d?{x:d.left,y:d.top}:Ht;this.referenceCoordinates||(this.referenceCoordinates=p);const u=l(t,{active:n,context:r.current,currentCoordinates:p});if(u){const f=Lo(u,p),h={x:0,y:0},{scrollableAncestors:y}=r.current;for(const b of y){const k=t.code,{isTop:x,isRight:m,isLeft:g,isBottom:S,maxScroll:I,minScroll:E}=Rp(b),j=ex(b),A={x:Math.min(k===me.Right?j.right-j.width/2:j.right,Math.max(k===me.Right?j.left:j.left+j.width/2,u.x)),y:Math.min(k===me.Down?j.bottom-j.height/2:j.bottom,Math.max(k===me.Down?j.top:j.top+j.height/2,u.y))},J=k===me.Right&&!m||k===me.Left&&!g,w=k===me.Down&&!S||k===me.Up&&!x;if(J&&A.x!==u.x){const R=b.scrollLeft+f.x,U=k===me.Right&&R<=I.x||k===me.Left&&R>=E.x;if(U&&!f.y){b.scrollTo({left:R,behavior:a});return}U?h.x=b.scrollLeft-R:h.x=k===me.Right?b.scrollLeft-I.x:b.scrollLeft-E.x,h.x&&b.scrollBy({left:-h.x,behavior:a});break}else if(w&&A.y!==u.y){const R=b.scrollTop+f.y,U=k===me.Down&&R<=I.y||k===me.Up&&R>=E.y;if(U&&!f.x){b.scrollTo({top:R,behavior:a});return}U?h.y=b.scrollTop-R:h.y=k===me.Down?b.scrollTop-I.y:b.scrollTop-E.y,h.y&&b.scrollBy({top:-h.y,behavior:a});break}}this.handleMove(t,yr(Lo(u,this.referenceCoordinates),h))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Lr.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=Tp,onActivation:o}=t,{active:s}=n;const{code:l}=e.nativeEvent;if(r.start.includes(l)){const a=s.activatorNode.current;return a&&e.target!==a?!1:(e.preventDefault(),o==null||o({event:e.nativeEvent}),!0)}return!1}}];function Vd(e){return!!(e&&"distance"in e)}function Kd(e){return!!(e&&"delay"in e)}class kc{constructor(t,n,r){var o;r===void 0&&(r=ox(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:s}=t,{target:l}=s;this.props=t,this.events=n,this.document=Rr(l),this.documentListeners=new po(this.document),this.listeners=new po(r),this.windowListeners=new po(st(l)),this.initialCoordinates=(o=ii(s))!=null?o:Ht,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(wt.Resize,this.handleCancel),this.windowListeners.add(wt.DragStart,Wd),this.windowListeners.add(wt.VisibilityChange,this.handleCancel),this.windowListeners.add(wt.ContextMenu,Wd),this.documentListeners.add(wt.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Kd(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Vd(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:o}=this.props;o(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(wt.Click,sx,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(wt.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:o,props:s}=this,{onMove:l,options:{activationConstraint:a}}=s;if(!o)return;const c=(n=ii(t))!=null?n:Ht,d=Lo(o,c);if(!r&&a){if(Vd(a)){if(a.tolerance!=null&&yl(d,a.tolerance))return this.handleCancel();if(yl(d,a.distance))return this.handleStart()}if(Kd(a)&&yl(d,a.tolerance))return this.handleCancel();this.handlePending(a,d);return}t.cancelable&&t.preventDefault(),l(c)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===me.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const lx={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Tr extends kc{constructor(t){const{event:n}=t,r=Rr(n.target);super(t,lx,r)}}Tr.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const ax={move:{name:"mousemove"},end:{name:"mouseup"}};var va;(function(e){e[e.RightClick=2]="RightClick"})(va||(va={}));class cx extends kc{constructor(t){super(t,ax,Rr(t.event.target))}}cx.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===va.RightClick?!1:(r==null||r({event:n}),!0)}}];const bl={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class dx extends kc{constructor(t){super(t,bl)}static setup(){return window.addEventListener(bl.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(bl.move.name,t)};function t(){}}}dx.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:o}=n;return o.length>1?!1:(r==null||r({event:n}),!0)}}];var mo;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(mo||(mo={}));var ai;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(ai||(ai={}));function ux(e){let{acceleration:t,activator:n=mo.Pointer,canScroll:r,draggingRect:o,enabled:s,interval:l=5,order:a=ai.TreeOrder,pointerCoordinates:c,scrollableAncestors:d,scrollableAncestorRects:p,delta:u,threshold:f}=e;const h=px({delta:u,disabled:!s}),[y,b]=wg(),k=v.useRef({x:0,y:0}),x=v.useRef({x:0,y:0}),m=v.useMemo(()=>{switch(n){case mo.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case mo.DraggableRect:return o}},[n,o,c]),g=v.useRef(null),S=v.useCallback(()=>{const E=g.current;if(!E)return;const j=k.current.x*x.current.x,A=k.current.y*x.current.y;E.scrollBy(j,A)},[]),I=v.useMemo(()=>a===ai.TreeOrder?[...d].reverse():d,[a,d]);v.useEffect(()=>{if(!s||!d.length||!m){b();return}for(const E of I){if((r==null?void 0:r(E))===!1)continue;const j=d.indexOf(E),A=p[j];if(!A)continue;const{direction:J,speed:w}=Zg(E,A,m,t,f);for(const R of["x","y"])h[R][J[R]]||(w[R]=0,J[R]=0);if(w.x>0||w.y>0){b(),g.current=E,y(S,l),k.current=w,x.current=J;return}}k.current={x:0,y:0},x.current={x:0,y:0},b()},[t,S,r,b,s,l,JSON.stringify(m),JSON.stringify(h),y,d,I,p,JSON.stringify(f)])}const fx={x:{[$e.Backward]:!1,[$e.Forward]:!1},y:{[$e.Backward]:!1,[$e.Forward]:!1}};function px(e){let{delta:t,disabled:n}=e;const r=si(t);return Uo(o=>{if(n||!r||!o)return fx;const s={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[$e.Backward]:o.x[$e.Backward]||s.x===-1,[$e.Forward]:o.x[$e.Forward]||s.x===1},y:{[$e.Backward]:o.y[$e.Backward]||s.y===-1,[$e.Forward]:o.y[$e.Forward]||s.y===1}}},[n,t,r])}function mx(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return Uo(o=>{var s;return t==null?null:(s=r??o)!=null?s:null},[r,t])}function hx(e,t){return v.useMemo(()=>e.reduce((n,r)=>{const{sensor:o}=r,s=o.activators.map(l=>({eventName:l.eventName,handler:t(l.handler,r)}));return[...n,...s]},[]),[e,t])}var To;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(To||(To={}));var ya;(function(e){e.Optimized="optimized"})(ya||(ya={}));const Qd=new Map;function gx(e,t){let{dragging:n,dependencies:r,config:o}=t;const[s,l]=v.useState(null),{frequency:a,measure:c,strategy:d}=o,p=v.useRef(e),u=k(),f=Ao(u),h=v.useCallback(function(x){x===void 0&&(x=[]),!f.current&&l(m=>m===null?x:m.concat(x.filter(g=>!m.includes(g))))},[f]),y=v.useRef(null),b=Uo(x=>{if(u&&!n)return Qd;if(!x||x===Qd||p.current!==e||s!=null){const m=new Map;for(let g of e){if(!g)continue;if(s&&s.length>0&&!s.includes(g.id)&&g.rect.current){m.set(g.id,g.rect.current);continue}const S=g.node.current,I=S?new bc(c(S),S):null;g.rect.current=I,I&&m.set(g.id,I)}return m}return x},[e,s,n,u,c]);return v.useEffect(()=>{p.current=e},[e]),v.useEffect(()=>{u||h()},[n,u]),v.useEffect(()=>{s&&s.length>0&&l(null)},[JSON.stringify(s)]),v.useEffect(()=>{u||typeof a!="number"||y.current!==null||(y.current=setTimeout(()=>{h(),y.current=null},a))},[a,u,h,...r]),{droppableRects:b,measureDroppableContainers:h,measuringScheduled:s!=null};function k(){switch(d){case To.Always:return!1;case To.BeforeDragging:return n;default:return!n}}}function jc(e,t){return Uo(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function xx(e,t){return jc(e,t)}function vx(e){let{callback:t,disabled:n}=e;const r=Oi(t),o=v.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(r)},[r,n]);return v.useEffect(()=>()=>o==null?void 0:o.disconnect(),[o]),o}function Ai(e){let{callback:t,disabled:n}=e;const r=Oi(t),o=v.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(r)},[n]);return v.useEffect(()=>()=>o==null?void 0:o.disconnect(),[o]),o}function yx(e){return new bc(Ar(e),e)}function Yd(e,t,n){t===void 0&&(t=yx);const[r,o]=v.useState(null);function s(){o(c=>{if(!e)return null;if(e.isConnected===!1){var d;return(d=c??n)!=null?d:null}const p=t(e);return JSON.stringify(c)===JSON.stringify(p)?c:p})}const l=vx({callback(c){if(e)for(const d of c){const{type:p,target:u}=d;if(p==="childList"&&u instanceof HTMLElement&&u.contains(e)){s();break}}}}),a=Ai({callback:s});return zt(()=>{s(),e?(a==null||a.observe(e),l==null||l.observe(document.body,{childList:!0,subtree:!0})):(a==null||a.disconnect(),l==null||l.disconnect())},[e]),r}function bx(e){const t=jc(e);return Ip(e,t)}const Gd=[];function kx(e){const t=v.useRef(e),n=Uo(r=>e?r&&r!==Gd&&e&&t.current&&e.parentNode===t.current.parentNode?r:Ri(e):Gd,[e]);return v.useEffect(()=>{t.current=e},[e]),n}function jx(e){const[t,n]=v.useState(null),r=v.useRef(e),o=v.useCallback(s=>{const l=vl(s.target);l&&n(a=>a?(a.set(l,xa(l)),new Map(a)):null)},[]);return v.useEffect(()=>{const s=r.current;if(e!==s){l(s);const a=e.map(c=>{const d=vl(c);return d?(d.addEventListener("scroll",o,{passive:!0}),[d,xa(d)]):null}).filter(c=>c!=null);n(a.length?new Map(a):null),r.current=e}return()=>{l(e),l(s)};function l(a){a.forEach(c=>{const d=vl(c);d==null||d.removeEventListener("scroll",o)})}},[o,e]),v.useMemo(()=>e.length?t?Array.from(t.values()).reduce((s,l)=>yr(s,l),Ht):Ap(e):Ht,[e,t])}function Xd(e,t){t===void 0&&(t=[]);const n=v.useRef(null);return v.useEffect(()=>{n.current=null},t),v.useEffect(()=>{const r=e!==Ht;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?Lo(e,n.current):Ht}function wx(e){v.useEffect(()=>{if(!Pi)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function Sx(e,t){return v.useMemo(()=>e.reduce((n,r)=>{let{eventName:o,handler:s}=r;return n[o]=l=>{s(l,t)},n},{}),[e,t])}function Jp(e){return v.useMemo(()=>e?Yg(e):null,[e])}const qd=[];function Cx(e,t){t===void 0&&(t=Ar);const[n]=e,r=Jp(n?st(n):null),[o,s]=v.useState(qd);function l(){s(()=>e.length?e.map(c=>Dp(c)?r:new bc(t(c),c)):qd)}const a=Ai({callback:l});return zt(()=>{a==null||a.disconnect(),l(),e.forEach(c=>a==null?void 0:a.observe(c))},[e]),o}function Fp(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Bo(t)?t:e}function Nx(e){let{measure:t}=e;const[n,r]=v.useState(null),o=v.useCallback(d=>{for(const{target:p}of d)if(Bo(p)){r(u=>{const f=t(p);return u?{...u,width:f.width,height:f.height}:f});break}},[t]),s=Ai({callback:o}),l=v.useCallback(d=>{const p=Fp(d);s==null||s.disconnect(),p&&(s==null||s.observe(p)),r(p?t(p):null)},[t,s]),[a,c]=oi(l);return v.useMemo(()=>({nodeRef:a,rect:n,setRef:c}),[n,a,c])}const Ix=[{sensor:Tr,options:{}},{sensor:Lr,options:{}}],Ex={current:{}},Ds={draggable:{measure:Ud},droppable:{measure:Ud,strategy:To.WhileDragging,frequency:ya.Optimized},dragOverlay:{measure:Ar}};class ho extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const Px={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new ho,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:li},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Ds,measureDroppableContainers:li,windowRect:null,measuringScheduled:!1},_p={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:li,draggableNodes:new Map,over:null,measureDroppableContainers:li},Vo=v.createContext(_p),zp=v.createContext(Px);function Ox(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new ho}}}function Mx(e,t){switch(t.type){case Fe.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Fe.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Fe.DragEnd:case Fe.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Fe.RegisterDroppable:{const{element:n}=t,{id:r}=n,o=new ho(e.droppable.containers);return o.set(r,n),{...e,droppable:{...e.droppable,containers:o}}}case Fe.SetDroppableDisabled:{const{id:n,key:r,disabled:o}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const l=new ho(e.droppable.containers);return l.set(n,{...s,disabled:o}),{...e,droppable:{...e.droppable,containers:l}}}case Fe.UnregisterDroppable:{const{id:n,key:r}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const s=new ho(e.droppable.containers);return s.delete(n),{...e,droppable:{...e.droppable,containers:s}}}default:return e}}function Dx(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:o}=v.useContext(Vo),s=si(r),l=si(n==null?void 0:n.id);return v.useEffect(()=>{if(!t&&!r&&s&&l!=null){if(!Mi(s)||document.activeElement===s.target)return;const a=o.get(l);if(!a)return;const{activatorNode:c,node:d}=a;if(!c.current&&!d.current)return;requestAnimationFrame(()=>{for(const p of[c.current,d.current]){if(!p)continue;const u=Ng(p);if(u){u.focus();break}}})}},[r,t,o,l,s]),null}function Hp(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((o,s)=>s({transform:o,...r}),n):n}function Rx(e){return v.useMemo(()=>({draggable:{...Ds.draggable,...e==null?void 0:e.draggable},droppable:{...Ds.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Ds.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function Ax(e){let{activeNode:t,measure:n,initialRect:r,config:o=!0}=e;const s=v.useRef(!1),{x:l,y:a}=typeof o=="boolean"?{x:o,y:o}:o;zt(()=>{if(!l&&!a||!t){s.current=!1;return}if(s.current||!r)return;const d=t==null?void 0:t.node.current;if(!d||d.isConnected===!1)return;const p=n(d),u=Ip(p,r);if(l||(u.x=0),a||(u.y=0),s.current=!0,Math.abs(u.x)>0||Math.abs(u.y)>0){const f=Pp(d);f&&f.scrollBy({top:u.y,left:u.x})}},[t,l,a,r,n])}const Li=v.createContext({...Ht,scaleX:1,scaleY:1});var gn;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(gn||(gn={}));const Ti=v.memo(function(t){var n,r,o,s;let{id:l,accessibility:a,autoScroll:c=!0,children:d,sensors:p=Ix,collisionDetection:u=Hg,measuring:f,modifiers:h,...y}=t;const b=v.useReducer(Mx,void 0,Ox),[k,x]=b,[m,g]=Dg(),[S,I]=v.useState(gn.Uninitialized),E=S===gn.Initialized,{draggable:{active:j,nodes:A,translate:J},droppable:{containers:w}}=k,R=j!=null?A.get(j):null,U=v.useRef({initial:null,translated:null}),M=v.useMemo(()=>{var Ye;return j!=null?{id:j,data:(Ye=R==null?void 0:R.data)!=null?Ye:Ex,rect:U}:null},[j,R]),P=v.useRef(null),[$,z]=v.useState(null),[B,T]=v.useState(null),F=Ao(y,Object.values(y)),H=Wo("DndDescribedBy",l),Z=v.useMemo(()=>w.getEnabled(),[w]),G=Rx(f),{droppableRects:fe,measureDroppableContainers:ae,measuringScheduled:Pe}=gx(Z,{dragging:E,dependencies:[J.x,J.y],config:G.droppable}),ne=mx(A,j),Me=v.useMemo(()=>B?ii(B):null,[B]),ze=qp(),De=xx(ne,G.draggable.measure);Ax({activeNode:j!=null?A.get(j):null,config:ze.layoutShiftCompensation,initialRect:De,measure:G.draggable.measure});const le=Yd(ne,G.draggable.measure,De),et=Yd(ne?ne.parentElement:null),O=v.useRef({activatorEvent:null,active:null,activeNode:ne,collisionRect:null,collisions:null,droppableRects:fe,draggableNodes:A,draggingNode:null,draggingNodeRect:null,droppableContainers:w,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),K=w.getNodeFor((n=O.current.over)==null?void 0:n.id),ce=Nx({measure:G.dragOverlay.measure}),Ce=(r=ce.nodeRef.current)!=null?r:ne,Ae=E?(o=ce.rect)!=null?o:le:null,D=!!(ce.nodeRef.current&&ce.rect),ee=bx(D?null:le),de=Jp(Ce?st(Ce):null),N=kx(E?K??ne:null),W=Cx(N),q=Hp(h,{transform:{x:J.x-ee.x,y:J.y-ee.y,scaleX:1,scaleY:1},activatorEvent:B,active:M,activeNodeRect:le,containerNodeRect:et,draggingNodeRect:Ae,over:O.current.over,overlayNodeRect:ce.rect,scrollableAncestors:N,scrollableAncestorRects:W,windowRect:de}),X=Me?yr(Me,J):null,pe=jx(N),te=Xd(pe),C=Xd(pe,[le]),Q=yr(q,te),oe=Ae?Vg(Ae,q):null,ge=M&&oe?u({active:M,collisionRect:oe,droppableRects:fe,droppableContainers:Z,pointerCoordinates:X}):null,ke=Np(ge,"id"),[Le,an]=v.useState(null),Yt=D?q:yr(q,C),Gn=Ug(Yt,(s=Le==null?void 0:Le.rect)!=null?s:null,le),Xn=v.useRef(null),Jr=v.useCallback((Ye,ut)=>{let{sensor:ft,options:cn}=ut;if(P.current==null)return;const bt=A.get(P.current);if(!bt)return;const pt=Ye.nativeEvent,$t=new ft({active:P.current,activeNode:bt,event:pt,options:cn,context:O,onAbort(Ue){if(!A.get(Ue))return;const{onDragAbort:Bt}=F.current,Gt={id:Ue};Bt==null||Bt(Gt),m({type:"onDragAbort",event:Gt})},onPending(Ue,dn,Bt,Gt){if(!A.get(Ue))return;const{onDragPending:zr}=F.current,un={id:Ue,constraint:dn,initialCoordinates:Bt,offset:Gt};zr==null||zr(un),m({type:"onDragPending",event:un})},onStart(Ue){const dn=P.current;if(dn==null)return;const Bt=A.get(dn);if(!Bt)return;const{onDragStart:Gt}=F.current,_r={activatorEvent:pt,active:{id:dn,data:Bt.data,rect:U}};fr.unstable_batchedUpdates(()=>{Gt==null||Gt(_r),I(gn.Initializing),x({type:Fe.DragStart,initialCoordinates:Ue,active:dn}),m({type:"onDragStart",event:_r}),z(Xn.current),T(pt)})},onMove(Ue){x({type:Fe.DragMove,coordinates:Ue})},onEnd:qn(Fe.DragEnd),onCancel:qn(Fe.DragCancel)});Xn.current=$t;function qn(Ue){return async function(){const{active:Bt,collisions:Gt,over:_r,scrollAdjustedTranslate:zr}=O.current;let un=null;if(Bt&&zr){const{cancelDrop:Hr}=F.current;un={activatorEvent:pt,active:Bt,collisions:Gt,delta:zr,over:_r},Ue===Fe.DragEnd&&typeof Hr=="function"&&await Promise.resolve(Hr(un))&&(Ue=Fe.DragCancel)}P.current=null,fr.unstable_batchedUpdates(()=>{x({type:Ue}),I(gn.Uninitialized),an(null),z(null),T(null),Xn.current=null;const Hr=Ue===Fe.DragEnd?"onDragEnd":"onDragCancel";if(un){const Hi=F.current[Hr];Hi==null||Hi(un),m({type:Hr,event:un})}})}}},[A]),Qo=v.useCallback((Ye,ut)=>(ft,cn)=>{const bt=ft.nativeEvent,pt=A.get(cn);if(P.current!==null||!pt||bt.dndKit||bt.defaultPrevented)return;const $t={active:pt};Ye(ft,ut.options,$t)===!0&&(bt.dndKit={capturedBy:ut.sensor},P.current=cn,Jr(ft,ut))},[A,Jr]),Fr=hx(p,Qo);wx(p),zt(()=>{le&&S===gn.Initializing&&I(gn.Initialized)},[le,S]),v.useEffect(()=>{const{onDragMove:Ye}=F.current,{active:ut,activatorEvent:ft,collisions:cn,over:bt}=O.current;if(!ut||!ft)return;const pt={active:ut,activatorEvent:ft,collisions:cn,delta:{x:Q.x,y:Q.y},over:bt};fr.unstable_batchedUpdates(()=>{Ye==null||Ye(pt),m({type:"onDragMove",event:pt})})},[Q.x,Q.y]),v.useEffect(()=>{const{active:Ye,activatorEvent:ut,collisions:ft,droppableContainers:cn,scrollAdjustedTranslate:bt}=O.current;if(!Ye||P.current==null||!ut||!bt)return;const{onDragOver:pt}=F.current,$t=cn.get(ke),qn=$t&&$t.rect.current?{id:$t.id,rect:$t.rect.current,data:$t.data,disabled:$t.disabled}:null,Ue={active:Ye,activatorEvent:ut,collisions:ft,delta:{x:bt.x,y:bt.y},over:qn};fr.unstable_batchedUpdates(()=>{an(qn),pt==null||pt(Ue),m({type:"onDragOver",event:Ue})})},[ke]),zt(()=>{O.current={activatorEvent:B,active:M,activeNode:ne,collisionRect:oe,collisions:ge,droppableRects:fe,draggableNodes:A,draggingNode:Ce,draggingNodeRect:Ae,droppableContainers:w,over:Le,scrollableAncestors:N,scrollAdjustedTranslate:Q},U.current={initial:Ae,translated:oe}},[M,ne,ge,oe,A,Ce,Ae,fe,w,Le,N,Q]),ux({...ze,delta:J,draggingRect:oe,pointerCoordinates:X,scrollableAncestors:N,scrollableAncestorRects:W});const ve=v.useMemo(()=>({active:M,activeNode:ne,activeNodeRect:le,activatorEvent:B,collisions:ge,containerNodeRect:et,dragOverlay:ce,draggableNodes:A,droppableContainers:w,droppableRects:fe,over:Le,measureDroppableContainers:ae,scrollableAncestors:N,scrollableAncestorRects:W,measuringConfiguration:G,measuringScheduled:Pe,windowRect:de}),[M,ne,le,B,ge,et,ce,A,w,fe,Le,ae,N,W,G,Pe,de]),zi=v.useMemo(()=>({activatorEvent:B,activators:Fr,active:M,activeNodeRect:le,ariaDescribedById:{draggable:H},dispatch:x,draggableNodes:A,over:Le,measureDroppableContainers:ae}),[B,Fr,M,le,x,H,A,Le,ae]);return ye.createElement(Cp.Provider,{value:g},ye.createElement(Vo.Provider,{value:zi},ye.createElement(zp.Provider,{value:ve},ye.createElement(Li.Provider,{value:Gn},d)),ye.createElement(Dx,{disabled:(a==null?void 0:a.restoreFocus)===!1})),ye.createElement(Lg,{...a,hiddenTextDescribedById:H}));function qp(){const Ye=($==null?void 0:$.autoScrollEnabled)===!1,ut=typeof c=="object"?c.enabled===!1:c===!1,ft=E&&!Ye&&!ut;return typeof c=="object"?{...c,enabled:ft}:{enabled:ft}}}),Lx=v.createContext(null),Zd="button",Tx="Draggable";function Jx(e){let{id:t,data:n,disabled:r=!1,attributes:o}=e;const s=Wo(Tx),{activators:l,activatorEvent:a,active:c,activeNodeRect:d,ariaDescribedById:p,draggableNodes:u,over:f}=v.useContext(Vo),{role:h=Zd,roleDescription:y="draggable",tabIndex:b=0}=o??{},k=(c==null?void 0:c.id)===t,x=v.useContext(k?Li:Lx),[m,g]=oi(),[S,I]=oi(),E=Sx(l,t),j=Ao(n);zt(()=>(u.set(t,{id:t,key:s,node:m,activatorNode:S,data:j}),()=>{const J=u.get(t);J&&J.key===s&&u.delete(t)}),[u,t]);const A=v.useMemo(()=>({role:h,tabIndex:b,"aria-disabled":r,"aria-pressed":k&&h===Zd?!0:void 0,"aria-roledescription":y,"aria-describedby":p.draggable}),[r,h,b,k,y,p.draggable]);return{active:c,activatorEvent:a,activeNodeRect:d,attributes:A,isDragging:k,listeners:r?void 0:E,node:m,over:f,setNodeRef:g,setActivatorNodeRef:I,transform:x}}function $p(){return v.useContext(zp)}const Fx="Droppable",_x={timeout:25};function Bp(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:o}=e;const s=Wo(Fx),{active:l,dispatch:a,over:c,measureDroppableContainers:d}=v.useContext(Vo),p=v.useRef({disabled:n}),u=v.useRef(!1),f=v.useRef(null),h=v.useRef(null),{disabled:y,updateMeasurementsFor:b,timeout:k}={..._x,...o},x=Ao(b??r),m=v.useCallback(()=>{if(!u.current){u.current=!0;return}h.current!=null&&clearTimeout(h.current),h.current=setTimeout(()=>{d(Array.isArray(x.current)?x.current:[x.current]),h.current=null},k)},[k]),g=Ai({callback:m,disabled:y||!l}),S=v.useCallback((A,J)=>{g&&(J&&(g.unobserve(J),u.current=!1),A&&g.observe(A))},[g]),[I,E]=oi(S),j=Ao(t);return v.useEffect(()=>{!g||!I.current||(g.disconnect(),u.current=!1,g.observe(I.current))},[I,g]),v.useEffect(()=>(a({type:Fe.RegisterDroppable,element:{id:r,key:s,disabled:n,node:I,rect:f,data:j}}),()=>a({type:Fe.UnregisterDroppable,key:s,id:r})),[r]),v.useEffect(()=>{n!==p.current.disabled&&(a({type:Fe.SetDroppableDisabled,id:r,key:s,disabled:n}),p.current.disabled=n)},[r,s,n,a]),{active:l,rect:f,isOver:(c==null?void 0:c.id)===r,node:I,over:c,setNodeRef:E}}function zx(e){let{animation:t,children:n}=e;const[r,o]=v.useState(null),[s,l]=v.useState(null),a=si(n);return!n&&!r&&a&&o(a),zt(()=>{if(!s)return;const c=r==null?void 0:r.key,d=r==null?void 0:r.props.id;if(c==null||d==null){o(null);return}Promise.resolve(t(d,s)).then(()=>{o(null)})},[t,r,s]),ye.createElement(ye.Fragment,null,n,r?v.cloneElement(r,{ref:l}):null)}const Hx={x:0,y:0,scaleX:1,scaleY:1};function $x(e){let{children:t}=e;return ye.createElement(Vo.Provider,{value:_p},ye.createElement(Li.Provider,{value:Hx},t))}const Bx={position:"fixed",touchAction:"none"},Ux=e=>Mi(e)?"transform 250ms ease":void 0,Wx=v.forwardRef((e,t)=>{let{as:n,activatorEvent:r,adjustScale:o,children:s,className:l,rect:a,style:c,transform:d,transition:p=Ux}=e;if(!a)return null;const u=o?d:{...d,scaleX:1,scaleY:1},f={...Bx,width:a.width,height:a.height,top:a.top,left:a.left,transform:Mt.Transform.toString(u),transformOrigin:o&&r?Tg(r,a):void 0,transition:typeof p=="function"?p(r):p,...c};return ye.createElement(n,{className:l,style:f,ref:t},s)}),Vx=e=>t=>{let{active:n,dragOverlay:r}=t;const o={},{styles:s,className:l}=e;if(s!=null&&s.active)for(const[a,c]of Object.entries(s.active))c!==void 0&&(o[a]=n.node.style.getPropertyValue(a),n.node.style.setProperty(a,c));if(s!=null&&s.dragOverlay)for(const[a,c]of Object.entries(s.dragOverlay))c!==void 0&&r.node.style.setProperty(a,c);return l!=null&&l.active&&n.node.classList.add(l.active),l!=null&&l.dragOverlay&&r.node.classList.add(l.dragOverlay),function(){for(const[c,d]of Object.entries(o))n.node.style.setProperty(c,d);l!=null&&l.active&&n.node.classList.remove(l.active)}},Kx=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:Mt.Transform.toString(t)},{transform:Mt.Transform.toString(n)}]},Qx={duration:250,easing:"ease",keyframes:Kx,sideEffects:Vx({styles:{active:{opacity:"0"}}})};function Yx(e){let{config:t,draggableNodes:n,droppableContainers:r,measuringConfiguration:o}=e;return Oi((s,l)=>{if(t===null)return;const a=n.get(s);if(!a)return;const c=a.node.current;if(!c)return;const d=Fp(l);if(!d)return;const{transform:p}=st(l).getComputedStyle(l),u=Ep(p);if(!u)return;const f=typeof t=="function"?t:Gx(t);return Lp(c,o.draggable.measure),f({active:{id:s,data:a.data,node:c,rect:o.draggable.measure(c)},draggableNodes:n,dragOverlay:{node:l,rect:o.dragOverlay.measure(d)},droppableContainers:r,measuringConfiguration:o,transform:u})})}function Gx(e){const{duration:t,easing:n,sideEffects:r,keyframes:o}={...Qx,...e};return s=>{let{active:l,dragOverlay:a,transform:c,...d}=s;if(!t)return;const p={x:a.rect.left-l.rect.left,y:a.rect.top-l.rect.top},u={scaleX:c.scaleX!==1?l.rect.width*c.scaleX/a.rect.width:1,scaleY:c.scaleY!==1?l.rect.height*c.scaleY/a.rect.height:1},f={x:c.x-p.x,y:c.y-p.y,...u},h=o({...d,active:l,dragOverlay:a,transform:{initial:c,final:f}}),[y]=h,b=h[h.length-1];if(JSON.stringify(y)===JSON.stringify(b))return;const k=r==null?void 0:r({active:l,dragOverlay:a,...d}),x=a.node.animate(h,{duration:t,easing:n,fill:"forwards"});return new Promise(m=>{x.onfinish=()=>{k==null||k(),m()}})}}let eu=0;function Xx(e){return v.useMemo(()=>{if(e!=null)return eu++,eu},[e])}const qx=ye.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:r,style:o,transition:s,modifiers:l,wrapperElement:a="div",className:c,zIndex:d=999}=e;const{activatorEvent:p,active:u,activeNodeRect:f,containerNodeRect:h,draggableNodes:y,droppableContainers:b,dragOverlay:k,over:x,measuringConfiguration:m,scrollableAncestors:g,scrollableAncestorRects:S,windowRect:I}=$p(),E=v.useContext(Li),j=Xx(u==null?void 0:u.id),A=Hp(l,{activatorEvent:p,active:u,activeNodeRect:f,containerNodeRect:h,draggingNodeRect:k.rect,over:x,overlayNodeRect:k.rect,scrollableAncestors:g,scrollableAncestorRects:S,transform:E,windowRect:I}),J=jc(f),w=Yx({config:r,draggableNodes:y,droppableContainers:b,measuringConfiguration:m}),R=J?k.setRef:void 0;return ye.createElement($x,null,ye.createElement(zx,{animation:w},u&&j?ye.createElement(Wx,{key:j,id:u.id,ref:R,as:a,activatorEvent:p,adjustScale:t,className:c,transition:s,rect:J,style:{zIndex:d,...o},transform:A},n):null))});function ci(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function Zx(e,t){return e.reduce((n,r,o)=>{const s=t.get(r);return s&&(n[o]=s),n},Array(e.length))}function hs(e){return e!==null&&e>=0}function ev(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function tv(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const gs={scaleX:1,scaleY:1},nv=e=>{var t;let{rects:n,activeNodeRect:r,activeIndex:o,overIndex:s,index:l}=e;const a=(t=n[o])!=null?t:r;if(!a)return null;const c=rv(n,l,o);if(l===o){const d=n[s];return d?{x:o<s?d.left+d.width-(a.left+a.width):d.left-a.left,y:0,...gs}:null}return l>o&&l<=s?{x:-a.width-c,y:0,...gs}:l<o&&l>=s?{x:a.width+c,y:0,...gs}:{x:0,y:0,...gs}};function rv(e,t,n){const r=e[t],o=e[t-1],s=e[t+1];return!r||!o&&!s?0:n<t?o?r.left-(o.left+o.width):s.left-(r.left+r.width):s?s.left-(r.left+r.width):r.left-(o.left+o.width)}const Up=e=>{let{rects:t,activeIndex:n,overIndex:r,index:o}=e;const s=ci(t,r,n),l=t[o],a=s[o];return!a||!l?null:{x:a.left-l.left,y:a.top-l.top,scaleX:a.width/l.width,scaleY:a.height/l.height}},xs={scaleX:1,scaleY:1},Ji=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:o,rects:s,overIndex:l}=e;const a=(t=s[n])!=null?t:r;if(!a)return null;if(o===n){const d=s[l];return d?{x:0,y:n<l?d.top+d.height-(a.top+a.height):d.top-a.top,...xs}:null}const c=ov(s,o,n);return o>n&&o<=l?{x:0,y:-a.height-c,...xs}:o<n&&o>=l?{x:0,y:a.height+c,...xs}:{x:0,y:0,...xs}};function ov(e,t,n){const r=e[t],o=e[t-1],s=e[t+1];return r?n<t?o?r.top-(o.top+o.height):s?s.top-(r.top+r.height):0:s?s.top-(r.top+r.height):o?r.top-(o.top+o.height):0:0}const Wp="Sortable",Vp=ye.createContext({activeIndex:-1,containerId:Wp,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Up,disabled:{draggable:!1,droppable:!1}});function Jo(e){let{children:t,id:n,items:r,strategy:o=Up,disabled:s=!1}=e;const{active:l,dragOverlay:a,droppableRects:c,over:d,measureDroppableContainers:p}=$p(),u=Wo(Wp,n),f=a.rect!==null,h=v.useMemo(()=>r.map(E=>typeof E=="object"&&"id"in E?E.id:E),[r]),y=l!=null,b=l?h.indexOf(l.id):-1,k=d?h.indexOf(d.id):-1,x=v.useRef(h),m=!ev(h,x.current),g=k!==-1&&b===-1||m,S=tv(s);zt(()=>{m&&y&&p(h)},[m,h,y,p]),v.useEffect(()=>{x.current=h},[h]);const I=v.useMemo(()=>({activeIndex:b,containerId:u,disabled:S,disableTransforms:g,items:h,overIndex:k,useDragOverlay:f,sortedRects:Zx(h,c),strategy:o}),[b,u,S.draggable,S.droppable,g,h,k,c,f,o]);return ye.createElement(Vp.Provider,{value:I},t)}const sv=e=>{let{id:t,items:n,activeIndex:r,overIndex:o}=e;return ci(n,r,o).indexOf(t)},iv=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:o,items:s,newIndex:l,previousItems:a,previousContainerId:c,transition:d}=e;return!d||!r||a!==s&&o===l?!1:n?!0:l!==o&&t===c},lv={duration:200,easing:"ease"},Kp="transform",av=Mt.Transition.toString({property:Kp,duration:0,easing:"linear"}),cv={roleDescription:"sortable"};function dv(e){let{disabled:t,index:n,node:r,rect:o}=e;const[s,l]=v.useState(null),a=v.useRef(n);return zt(()=>{if(!t&&n!==a.current&&r.current){const c=o.current;if(c){const d=Ar(r.current,{ignoreTransform:!0}),p={x:c.left-d.left,y:c.top-d.top,scaleX:c.width/d.width,scaleY:c.height/d.height};(p.x||p.y)&&l(p)}}n!==a.current&&(a.current=n)},[t,n,r,o]),v.useEffect(()=>{s&&l(null)},[s]),s}function Ko(e){let{animateLayoutChanges:t=iv,attributes:n,disabled:r,data:o,getNewIndex:s=sv,id:l,strategy:a,resizeObserverConfig:c,transition:d=lv}=e;const{items:p,containerId:u,activeIndex:f,disabled:h,disableTransforms:y,sortedRects:b,overIndex:k,useDragOverlay:x,strategy:m}=v.useContext(Vp),g=uv(r,h),S=p.indexOf(l),I=v.useMemo(()=>({sortable:{containerId:u,index:S,items:p},...o}),[u,o,S,p]),E=v.useMemo(()=>p.slice(p.indexOf(l)),[p,l]),{rect:j,node:A,isOver:J,setNodeRef:w}=Bp({id:l,data:I,disabled:g.droppable,resizeObserverConfig:{updateMeasurementsFor:E,...c}}),{active:R,activatorEvent:U,activeNodeRect:M,attributes:P,setNodeRef:$,listeners:z,isDragging:B,over:T,setActivatorNodeRef:F,transform:H}=Jx({id:l,data:I,attributes:{...cv,...n},disabled:g.draggable}),Z=jg(w,$),G=!!R,fe=G&&!y&&hs(f)&&hs(k),ae=!x&&B,Pe=ae&&fe?H:null,Me=fe?Pe??(a??m)({rects:b,activeNodeRect:M,activeIndex:f,overIndex:k,index:S}):null,ze=hs(f)&&hs(k)?s({id:l,items:p,activeIndex:f,overIndex:k}):S,De=R==null?void 0:R.id,le=v.useRef({activeId:De,items:p,newIndex:ze,containerId:u}),et=p!==le.current.items,O=t({active:R,containerId:u,isDragging:B,isSorting:G,id:l,index:S,items:p,newIndex:le.current.newIndex,previousItems:le.current.items,previousContainerId:le.current.containerId,transition:d,wasDragging:le.current.activeId!=null}),K=dv({disabled:!O,index:S,node:A,rect:j});return v.useEffect(()=>{G&&le.current.newIndex!==ze&&(le.current.newIndex=ze),u!==le.current.containerId&&(le.current.containerId=u),p!==le.current.items&&(le.current.items=p)},[G,ze,u,p]),v.useEffect(()=>{if(De===le.current.activeId)return;if(De&&!le.current.activeId){le.current.activeId=De;return}const Ce=setTimeout(()=>{le.current.activeId=De},50);return()=>clearTimeout(Ce)},[De]),{active:R,activeIndex:f,attributes:P,data:I,rect:j,index:S,newIndex:ze,items:p,isOver:J,isSorting:G,isDragging:B,listeners:z,node:A,overIndex:k,over:T,setNodeRef:Z,setActivatorNodeRef:F,setDroppableNodeRef:w,setDraggableNodeRef:$,transform:K??Me,transition:ce()};function ce(){if(K||et&&le.current.newIndex===S)return av;if(!(ae&&!Mi(U)||!d)&&(G||O))return Mt.Transition.toString({...d,property:Kp})}}function uv(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}function di(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const fv=[me.Down,me.Right,me.Up,me.Left],Fi=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:o,droppableContainers:s,over:l,scrollableAncestors:a}}=t;if(fv.includes(e.code)){if(e.preventDefault(),!n||!r)return;const c=[];s.getEnabled().forEach(u=>{if(!u||u!=null&&u.disabled)return;const f=o.get(u.id);if(f)switch(e.code){case me.Down:r.top<f.top&&c.push(u);break;case me.Up:r.top>f.top&&c.push(u);break;case me.Left:r.left>f.left&&c.push(u);break;case me.Right:r.left<f.left&&c.push(u);break}});const d=_g({collisionRect:r,droppableRects:o,droppableContainers:c});let p=Np(d,"id");if(p===(l==null?void 0:l.id)&&d.length>1&&(p=d[1].id),p!=null){const u=s.get(n.id),f=s.get(p),h=f?o.get(f.id):null,y=f==null?void 0:f.node.current;if(y&&h&&u&&f){const k=Ri(y).some((E,j)=>a[j]!==E),x=Qp(u,f),m=pv(u,f),g=k||!x?{x:0,y:0}:{x:m?r.width-h.width:0,y:m?r.height-h.height:0},S={x:h.left,y:h.top};return g.x&&g.y?S:Lo(S,g)}}}};function Qp(e,t){return!di(e)||!di(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function pv(e,t){return!di(e)||!di(t)||!Qp(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}function mv(e){return e==="Functional"?"bg-blue-100 text-blue-800 dark:bg-blue-900/60 dark:text-blue-200":e==="Social"?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/60 dark:text-emerald-200":"bg-amber-100 text-amber-800 dark:bg-amber-900/60 dark:text-amber-200"}function pn({label:e,value:t}){return i.jsxs("div",{children:[i.jsx($n,{children:e}),i.jsx("div",{className:"text-sm text-stone-700 dark:text-stone-300",children:t??""})]})}function Yp({isOpen:e,onClose:t,job:n,onEdit:r,linkedOpportunities:o=[],linkedInsights:s=[],onOpportunityClick:l}){if(!n)return null;const a=n.name??n.text??"",c=n,d=c.priority??(c.isPriority?"High":"Medium");return i.jsx(Ot,{isOpen:e,onClose:t,title:"Job details",maxWidth:"max-w-2xl",footer:i.jsx("button",{type:"button",onClick:t,className:"w-full rounded-xl border border-stone-300 px-4 py-2.5 font-medium text-stone-700 hover:bg-stone-50 dark:border-stone-600 dark:text-stone-200 dark:hover:bg-stone-700",children:"Close"}),children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsxs("div",{className:"flex min-w-0 flex-1 flex-wrap items-center gap-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-stone-900 dark:text-stone-100",children:a}),i.jsx("span",{className:`rounded-full px-2 py-0.5 text-xs font-medium ${mv(n.tag)}`,children:n.tag}),i.jsx("span",{className:`rounded-full px-2 py-0.5 text-xs font-medium ${d==="High"?"bg-red-100 text-red-800 dark:bg-red-900/60 dark:text-red-200":d==="Medium"?"bg-amber-100 text-amber-800 dark:bg-amber-900/60 dark:text-amber-200":"bg-stone-100 text-stone-700 dark:bg-stone-600 dark:text-stone-200"}`,children:d})]}),r&&i.jsx("button",{type:"button",onClick:r,className:"shrink-0 rounded-lg p-2 text-stone-400 hover:bg-stone-100 hover:text-stone-600 dark:hover:bg-stone-700 dark:hover:text-stone-300",title:"Edit job","aria-label":"Edit job",children:i.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})})]}),i.jsx(pn,{label:"Location",value:[n.projectName,n.journeyName,n.phaseTitle].filter(Boolean).join("  ")||""}),i.jsx(pn,{label:"Description",value:n.description?i.jsx("span",{className:"whitespace-pre-wrap",children:n.description}):""}),i.jsx(pn,{label:"Primary type",value:n.tag}),i.jsx(pn,{label:"Struggles",value:n.struggles&&n.struggles.length>0?n.struggles.join(", "):""}),i.jsx(pn,{label:"Functional dimensions",value:n.functionalDimensions&&n.functionalDimensions.length>0?n.functionalDimensions.join(", "):""}),i.jsx(pn,{label:"Social dimensions",value:n.socialDimensions&&n.socialDimensions.length>0?n.socialDimensions.join(", "):""}),i.jsx(pn,{label:"Emotional dimensions",value:n.emotionalDimensions&&n.emotionalDimensions.length>0?n.emotionalDimensions.join(", "):""}),i.jsx(pn,{label:"Solutions and workarounds",value:n.solutionsAndWorkarounds?i.jsx("span",{className:"whitespace-pre-wrap",children:n.solutionsAndWorkarounds}):""}),s.length>0&&i.jsxs("div",{children:[i.jsx($n,{children:"Linked insights"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:s.map(p=>i.jsx("span",{className:"rounded-lg border border-stone-200 bg-stone-50 px-3 py-1.5 text-sm text-stone-700 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-300",children:p.title},p.id))})]}),o.length>0&&i.jsxs("div",{children:[i.jsx($n,{children:"Linked opportunities"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:o.map(p=>i.jsx("button",{type:"button",onClick:()=>l==null?void 0:l(p),className:"rounded-lg border border-accent/30 bg-accent/10 px-3 py-1.5 text-sm font-medium text-accent transition-colors hover:bg-accent/20 dark:border-violet-500/40 dark:bg-violet-500/15 dark:text-accent-light dark:hover:bg-violet-500/25",children:p.name},p.id))})]})]})})}const hv=["Functional","Social","Emotional"],gv=["High","Medium","Low"];function vs({value:e,onChange:t,placeholder:n,rows:r=3}){const o=e.join(`
`);return i.jsx("textarea",{value:o,onChange:s=>t(kp(s.target.value)),rows:r,placeholder:n,className:"w-full rounded-xl border border-stone-300 px-4 py-2.5 focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100 dark:placeholder-stone-500"})}function xv({isOpen:e,onClose:t,clientId:n,insights:r,onCreate:o}){const[s,l]=v.useState(""),[a,c]=v.useState(""),[d,p]=v.useState("Functional"),[u,f]=v.useState("Medium"),[h,y]=v.useState([]),[b,k]=v.useState([]),[x,m]=v.useState([]),[g,S]=v.useState([]),[I,E]=v.useState([]),[j,A]=v.useState(""),J=w=>{w.preventDefault(),o({name:s.trim()||"Untitled job",description:a.trim()||void 0,tag:d,priority:u,insightIds:h,struggles:b.filter(Boolean).length>0?b.filter(Boolean):void 0,functionalDimensions:x.filter(Boolean).length>0?x.filter(Boolean):void 0,socialDimensions:g.filter(Boolean).length>0?g.filter(Boolean):void 0,emotionalDimensions:I.filter(Boolean).length>0?I.filter(Boolean):void 0,solutionsAndWorkarounds:j.trim()||void 0}),t(),l(""),c(""),p("Functional"),f("Medium"),y([]),k([]),m([]),S([]),E([]),A("")};return i.jsx(Ot,{isOpen:e,onClose:t,title:"Create job",maxWidth:"max-w-2xl",footer:i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{type:"button",onClick:t,className:"flex-1 rounded-xl border border-stone-300 px-4 py-2.5 font-medium text-stone-700 hover:bg-stone-50 dark:border-stone-600 dark:text-stone-200 dark:hover:bg-stone-700",children:"Cancel"}),i.jsx("button",{type:"submit",form:"create-job-form",className:"flex-1 rounded-xl bg-accent px-4 py-2.5 font-medium text-white hover:bg-accent-hover",children:"Create"})]}),children:i.jsxs("form",{id:"create-job-form",onSubmit:J,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(ie,{htmlFor:"create-job-name",children:"Name"}),i.jsx("input",{id:"create-job-name",type:"text",value:s,onChange:w=>l(w.target.value),className:"w-full rounded-xl border border-stone-300 px-4 py-2.5 focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100",placeholder:"Job name"})]}),i.jsxs("div",{children:[i.jsx(ie,{htmlFor:"create-job-desc",children:"Description"}),i.jsx("textarea",{id:"create-job-desc",value:a,onChange:w=>c(w.target.value),rows:2,className:"w-full rounded-xl border border-stone-300 px-4 py-2.5 focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100",placeholder:"Job description"})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx(ie,{htmlFor:"create-job-tag",children:"Primary type"}),i.jsx("select",{id:"create-job-tag",value:d,onChange:w=>p(w.target.value),className:"w-full rounded-xl border border-stone-300 px-4 py-2.5 focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100",children:hv.map(w=>i.jsx("option",{value:w,children:w},w))})]}),i.jsxs("div",{className:"flex-1",children:[i.jsx(ie,{htmlFor:"create-job-priority",children:"Priority"}),i.jsx("select",{id:"create-job-priority",value:u,onChange:w=>f(w.target.value),className:"w-full rounded-xl border border-stone-300 px-4 py-2.5 focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100",children:gv.map(w=>i.jsx("option",{value:w,children:w},w))})]})]}),r.length>0&&i.jsxs("div",{children:[i.jsx(ie,{children:"Linked insights"}),i.jsx("p",{className:"mb-1 text-xs text-stone-500 dark:text-stone-400",children:"Select insights to link to this job"}),i.jsx("div",{className:"max-h-32 overflow-y-auto rounded-xl border border-stone-300 p-2 dark:border-stone-600 dark:bg-stone-800",children:r.map(w=>i.jsxs("label",{className:"flex cursor-pointer items-center gap-2 rounded-lg px-2 py-1.5 hover:bg-stone-100 dark:hover:bg-stone-700",children:[i.jsx("input",{type:"checkbox",checked:h.includes(w.id),onChange:R=>y(U=>R.target.checked?[...U,w.id]:U.filter(M=>M!==w.id)),className:"rounded border-stone-300 text-accent focus:ring-accent"}),i.jsx("span",{className:"text-sm text-stone-700 dark:text-stone-200",children:w.title})]},w.id))})]}),i.jsxs("div",{children:[i.jsx(ie,{children:"Struggles"}),i.jsx("p",{className:"mb-1 text-xs text-stone-500 dark:text-stone-400",children:"One item per line"}),i.jsx(vs,{value:b,onChange:k,placeholder:"e.g. Time pressure",rows:2})]}),i.jsxs("div",{children:[i.jsx(ie,{children:"Functional dimensions"}),i.jsx("p",{className:"mb-1 text-xs text-stone-500 dark:text-stone-400",children:"One item per line"}),i.jsx(vs,{value:x,onChange:m,placeholder:"e.g. Efficiency",rows:2})]}),i.jsxs("div",{children:[i.jsx(ie,{children:"Social dimensions"}),i.jsx("p",{className:"mb-1 text-xs text-stone-500 dark:text-stone-400",children:"One item per line"}),i.jsx(vs,{value:g,onChange:S,placeholder:"e.g. Collaboration",rows:2})]}),i.jsxs("div",{children:[i.jsx(ie,{children:"Emotional dimensions"}),i.jsx("p",{className:"mb-1 text-xs text-stone-500 dark:text-stone-400",children:"One item per line"}),i.jsx(vs,{value:I,onChange:E,placeholder:"e.g. Confidence",rows:2})]}),i.jsxs("div",{children:[i.jsx(ie,{htmlFor:"create-job-solutions",children:"Solutions and workarounds"}),i.jsx("textarea",{id:"create-job-solutions",value:j,onChange:w=>A(w.target.value),rows:3,className:"w-full rounded-xl border border-stone-300 px-4 py-2.5 focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100",placeholder:"Describe solutions and workarounds"})]})]})})}function tu(e){if(!e)return"";try{const t=new Date(e);return t.toLocaleDateString(void 0,{dateStyle:"medium"})+" "+t.toLocaleTimeString(void 0,{timeStyle:"short"})}catch{return e}}function kt({label:e,value:t,className:n=""}){return i.jsxs("div",{className:n,children:[i.jsx($n,{children:e}),i.jsx("div",{className:"text-sm text-stone-700 dark:text-stone-300",children:t??""})]})}function wc({isOpen:e,onClose:t,opportunity:n,clientName:r,projectName:o,journeyName:s,phaseTitle:l,linkedJobLabels:a=[],onEdit:c}){if(!n)return null;const d=h=>h==="High"?"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300":h==="Medium"?"bg-amber-100 text-amber-800 dark:bg-amber-900/40 dark:text-amber-300":"bg-stone-100 text-stone-600 dark:bg-stone-700 dark:text-stone-300",p=h=>h==="Horizon 1"||h==="Horizon 2"||h==="Horizon 3"?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/40 dark:text-emerald-300":h==="In discovery"?"bg-blue-100 text-blue-800 dark:bg-blue-900/40 dark:text-blue-300":"bg-stone-100 text-stone-600 dark:bg-stone-700 dark:text-stone-300",f=(n.linkedJobIds??[]).map(h=>{var y;return((y=a.find(b=>b.key===h))==null?void 0:y.label)??h}).filter(Boolean);return i.jsx(Ot,{isOpen:e,onClose:t,title:"Opportunity details",maxWidth:"max-w-2xl",footer:i.jsx("button",{type:"button",onClick:t,className:"w-full rounded-xl border border-stone-300 px-4 py-2.5 font-medium text-stone-700 hover:bg-stone-50 dark:border-stone-600 dark:text-stone-200 dark:hover:bg-stone-700",children:"Close"}),children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsxs("div",{className:"flex min-w-0 flex-1 flex-wrap items-center gap-2",children:[n.isPriority&&i.jsx("svg",{className:"h-5 w-5 text-amber-500 dark:text-amber-400",fill:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{d:"M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z"})}),i.jsx("h3",{className:"text-lg font-semibold text-stone-900 dark:text-stone-100",children:n.name}),i.jsx("span",{className:`rounded-full px-2 py-0.5 text-xs font-medium ${d(n.priority)}`,children:n.priority}),i.jsx("span",{className:`rounded-full px-2 py-0.5 text-xs font-medium ${p(n.stage)}`,children:n.stage})]}),c&&i.jsx("button",{type:"button",onClick:c,className:"shrink-0 rounded-lg p-2 text-stone-400 hover:bg-stone-100 hover:text-stone-600 dark:hover:bg-stone-700 dark:hover:text-stone-300",title:"Edit opportunity","aria-label":"Edit opportunity",children:i.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})})]}),r&&i.jsx(kt,{label:"Client",value:r}),i.jsx(kt,{label:"Location",value:[o,s,l].filter(Boolean).join("  ")||""}),i.jsx(kt,{label:"Stage",value:i.jsx("span",{className:`rounded-full px-2 py-0.5 text-xs font-medium ${p(n.stage)}`,children:n.stage})}),i.jsx(kt,{label:"Stage order",value:String(n.stageOrder)}),i.jsx(kt,{label:"Priority",value:n.priority}),i.jsx(kt,{label:"Is priority",value:n.isPriority?"Yes":"No"}),i.jsx(kt,{label:"Description",value:n.description?i.jsx("span",{className:"whitespace-pre-wrap",children:n.description}):""}),i.jsx(kt,{label:"Point of differentiation",value:n.pointOfDifferentiation?i.jsx("span",{className:"whitespace-pre-wrap",children:n.pointOfDifferentiation}):""}),i.jsx(kt,{label:"Critical assumptions",value:n.criticalAssumptions?i.jsx("span",{className:"whitespace-pre-wrap",children:n.criticalAssumptions}):""}),i.jsx(kt,{label:"Linked jobs",value:f.length>0?f.join(", "):""}),i.jsx(kt,{label:"Created at",value:tu(n.createdAt)}),i.jsx(kt,{label:"Updated at",value:tu(n.updatedAt)})]})})}const vv=["High","Medium","Low"],yv=["Backlog","In discovery","Horizon 1","Horizon 2","Horizon 3"];function _i({isOpen:e,onClose:t,opportunity:n,jobsInJourney:r,onSave:o}){const[s,l]=v.useState(""),[a,c]=v.useState(""),[d,p]=v.useState("Medium"),[u,f]=v.useState("Backlog"),[h,y]=v.useState(!1),[b,k]=v.useState(""),[x,m]=v.useState(""),[g,S]=v.useState([]);v.useEffect(()=>{n&&(l(n.name),c(n.description??""),p(n.priority),f(n.stage),y(n.isPriority??!1),k(n.pointOfDifferentiation??""),m(n.criticalAssumptions??""),S(n.linkedJobIds??[]))},[n==null?void 0:n.id,n==null?void 0:n.name,n==null?void 0:n.description,n==null?void 0:n.priority,n==null?void 0:n.stage,n==null?void 0:n.isPriority,n==null?void 0:n.pointOfDifferentiation,n==null?void 0:n.criticalAssumptions,n==null?void 0:n.linkedJobIds]);const I=j=>{S(A=>A.includes(j)?A.filter(J=>J!==j):[...A,j])},E=j=>{j.preventDefault(),n&&(o({id:n.id,name:s.trim()||n.name,description:a.trim()||void 0,priority:d,stage:u,isPriority:h,pointOfDifferentiation:b.trim()||void 0,criticalAssumptions:x.trim()||void 0,linkedJobIds:g}),t())};return n?i.jsx(Ot,{isOpen:e,onClose:t,title:"Opportunity details",maxWidth:"max-w-2xl",footer:i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{type:"button",onClick:t,className:"flex-1 rounded-xl border border-stone-300 px-4 py-2.5 font-medium text-stone-700 hover:bg-stone-50 dark:border-stone-600 dark:text-stone-200 dark:hover:bg-stone-700",children:"Cancel"}),i.jsx("button",{type:"submit",form:"edit-opportunity-form",className:"flex-1 rounded-xl bg-accent px-4 py-2.5 font-medium text-white hover:bg-accent-hover",children:"Save"})]}),children:i.jsxs("form",{id:"edit-opportunity-form",onSubmit:E,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(ie,{htmlFor:"opp-name",children:"Name"}),i.jsx("input",{id:"opp-name",type:"text",value:s,onChange:j=>l(j.target.value),className:"w-full rounded-xl border border-stone-300 px-4 py-2.5 focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100 dark:placeholder-stone-500",placeholder:"Opportunity name"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(ie,{htmlFor:"opp-priority",children:"Priority"}),i.jsx("select",{id:"opp-priority",value:d,onChange:j=>p(j.target.value),className:"w-full rounded-xl border border-stone-300 px-4 py-2.5 focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100",children:vv.map(j=>i.jsx("option",{value:j,children:j},j))})]}),i.jsxs("div",{children:[i.jsx(ie,{htmlFor:"opp-stage",children:"Stage"}),i.jsx("select",{id:"opp-stage",value:u,onChange:j=>f(j.target.value),className:"w-full rounded-xl border border-stone-300 px-4 py-2.5 focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100",children:yv.map(j=>i.jsx("option",{value:j,children:j},j))})]})]}),i.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[i.jsx("button",{type:"button",onClick:()=>y(!h),className:`shrink-0 rounded p-1.5 transition-colors ${h?"text-amber-500 hover:text-amber-600 dark:text-amber-400":"text-stone-300 hover:text-amber-500 dark:text-stone-500 dark:hover:text-amber-400"}`,title:h?"Remove priority star":"Mark as priority","aria-label":h?"Remove priority star":"Mark as priority",children:i.jsx("svg",{className:"h-6 w-6",fill:h?"currentColor":"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z"})})}),i.jsx("span",{className:"text-sm text-stone-500 dark:text-stone-400",children:"Priority"})]}),i.jsxs("div",{children:[i.jsx(ie,{htmlFor:"opp-desc",children:"Description"}),i.jsx("textarea",{id:"opp-desc",value:a,onChange:j=>c(j.target.value),rows:3,className:"w-full rounded-xl border border-stone-300 px-4 py-2.5 focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100 dark:placeholder-stone-500",placeholder:"Optional description"})]}),i.jsxs("div",{children:[i.jsx(ie,{htmlFor:"opp-pod",children:"Point of differentiation"}),i.jsx("textarea",{id:"opp-pod",value:b,onChange:j=>k(j.target.value),rows:2,className:"w-full rounded-xl border border-stone-300 px-4 py-2.5 focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100 dark:placeholder-stone-500",placeholder:"What makes this opportunity distinct"})]}),i.jsxs("div",{children:[i.jsx(ie,{htmlFor:"opp-assumptions",children:"Critical assumptions"}),i.jsx("textarea",{id:"opp-assumptions",value:x,onChange:j=>m(j.target.value),rows:2,className:"w-full rounded-xl border border-stone-300 px-4 py-2.5 focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100 dark:placeholder-stone-500",placeholder:"Key assumptions"})]}),r.length>0&&i.jsxs("div",{children:[i.jsx(ie,{children:"Linked jobs"}),i.jsx("div",{className:"max-h-40 overflow-y-auto rounded-xl border border-stone-300 p-2 dark:border-stone-600 dark:bg-stone-800/50",children:r.map(j=>i.jsxs("label",{className:"flex cursor-pointer items-center gap-2 rounded-lg px-2 py-1.5 hover:bg-stone-100 dark:hover:bg-stone-700/50",children:[i.jsx("input",{type:"checkbox",checked:g.includes(j.key),onChange:()=>I(j.key),className:"h-4 w-4 rounded border-stone-300 text-accent focus:ring-accent/20 dark:border-stone-500"}),i.jsx("span",{className:"text-sm text-stone-700 dark:text-stone-200",children:j.label})]},j.key))})]})]})}):null}const bv=["High","Medium","Low"];function kv(e,t){return e?e.length<=t?e:e.slice(0,t)+"":""}const jv=["Functional","Social","Emotional"];function wv(e){return e==="Functional"?"bg-blue-100 text-blue-800 dark:bg-blue-900/60 dark:text-blue-200":e==="Social"?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/60 dark:text-emerald-200":"bg-amber-100 text-amber-800 dark:bg-amber-900/60 dark:text-amber-200"}function Sv({job:e,linked:t,tagStyle:n,onRowClick:r,onOpportunityClick:o}){const{attributes:s,listeners:l,setNodeRef:a,transform:c,transition:d,isDragging:p}=Ko({id:e.key}),u={transform:Mt.Transform.toString(c),transition:d};return i.jsxs("tr",{ref:a,style:u,onClick:r,className:`cursor-pointer border-b border-stone-100 transition-colors hover:bg-stone-50 dark:border-stone-700 dark:hover:bg-stone-800/60 ${p?"bg-stone-100 dark:bg-stone-800 opacity-90":""}`,children:[i.jsx("td",{className:"w-10 px-2 py-3",children:i.jsx("div",{className:"flex items-center gap-1",children:i.jsx("div",{...s,...l,onClick:f=>f.stopPropagation(),className:"cursor-grab touch-none rounded p-1 text-stone-400 hover:bg-stone-200 hover:text-stone-600 active:cursor-grabbing dark:hover:bg-stone-600 dark:hover:text-stone-300","aria-label":"Drag to reorder",children:i.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h16M4 16h16"})})})})}),i.jsx("td",{className:"px-4 py-3",children:i.jsx("span",{className:"font-medium text-stone-900 dark:text-stone-100",children:e.name??""})}),i.jsx("td",{className:"max-w-[200px] px-4 py-3",children:i.jsx("span",{className:"text-stone-600 dark:text-stone-300",title:e.description,children:kv(e.description,80)})}),i.jsx("td",{className:"px-4 py-3",children:i.jsx("span",{className:`inline-flex rounded-full px-2 py-0.5 text-xs font-medium ${n}`,children:e.tag})}),i.jsx("td",{className:"px-4 py-3",children:i.jsx("span",{className:`inline-flex rounded-full px-2 py-0.5 text-xs font-medium ${e.priority==="High"?"bg-red-100 text-red-800 dark:bg-red-900/60 dark:text-red-200":e.priority==="Medium"?"bg-amber-100 text-amber-800 dark:bg-amber-900/60 dark:text-amber-200":"bg-stone-100 text-stone-700 dark:bg-stone-600 dark:text-stone-200"}`,children:e.priority??"Medium"})}),i.jsx("td",{className:"px-4 py-3 text-stone-600 dark:text-stone-300",children:e.projectName??""}),i.jsx("td",{className:"px-4 py-3 text-stone-600 dark:text-stone-300",children:e.journeyName??""}),i.jsx("td",{className:"px-4 py-3 text-stone-600 dark:text-stone-300",children:e.phaseTitle??""}),i.jsx("td",{className:"max-w-[160px] px-4 py-3",children:i.jsx("span",{className:"line-clamp-2 text-stone-600 dark:text-stone-300",children:e.struggles&&e.struggles.length>0?e.struggles.join(", "):""})}),i.jsx("td",{className:"px-4 py-3",onClick:f=>f.stopPropagation(),children:t.length>0?i.jsx("div",{className:"flex flex-wrap gap-1",children:t.map(f=>i.jsx("button",{onClick:h=>{h.stopPropagation(),o(f)},className:"rounded-md bg-accent/15 px-2 py-0.5 text-xs font-medium text-accent hover:bg-accent/25 dark:bg-violet-500/20 dark:text-accent-light dark:hover:bg-violet-500/30",children:f.name},f.id))}):i.jsx("span",{className:"text-stone-400 dark:text-stone-500",children:""})})]})}function Cv({clientId:e}){var K,ce,Ce,Ae;const t=L(D=>D.clients),n=L(D=>D.projects),r=L(D=>D.journeys),o=L(D=>D.phases),s=L(D=>D.jobs),l=L(D=>D.insights),a=L(D=>D.opportunities),c=L(D=>D.createJob),d=L(D=>D.updateJob),p=L(D=>D.updateOpportunity),[u,f]=v.useState(null),[h,y]=v.useState(null),[b,k]=v.useState(!1),[x,m]=v.useState(null),[g,S]=v.useState(null),[I,E]=v.useState(""),[j,A]=v.useState(""),[J,w]=v.useState(""),[R,U]=v.useState(""),[M,P]=v.useState(""),[$,z]=v.useState(null),[B,T]=v.useState(!0),[F,H]=v.useState([]),Z=t.find(D=>D.id===e),G=n.filter(D=>D.clientId===e),fe=r.filter(D=>G.some(ee=>ee.id===D.projectId)),ae=v.useMemo(()=>s.filter(ee=>ee.clientId===e).map(ee=>{const de=o.filter(pe=>(pe.jobIds??[]).includes(ee.id)),N=de[0],W=N?r.find(pe=>pe.id===N.journeyId):null,q=W?n.find(pe=>pe.id===W.projectId):null,X=de.map(pe=>pe.title??"Phase").join(", ");return{...ee,key:ee.id,projectName:(q==null?void 0:q.name)??"",journeyName:(W==null?void 0:W.name)??"",phaseTitle:X||"",projectId:q==null?void 0:q.id,journeyId:W==null?void 0:W.id}}),[s,e,o,r,n]),Pe=v.useMemo(()=>ae.filter(D=>{if(I&&D.projectId!==I||j&&D.journeyId!==j||J&&D.tag!==J||R&&(D.priority??"Medium")!==R)return!1;if(M.trim()){const ee=M.toLowerCase().trim(),de=(D.name??"").toLowerCase(),N=(D.description??"").toLowerCase(),W=(D.projectName??"").toLowerCase(),q=(D.journeyName??"").toLowerCase(),X=(D.phaseTitle??"").toLowerCase(),pe=(D.struggles??[]).join(" ").toLowerCase(),te=D.tag.toLowerCase();if(!de.includes(ee)&&!N.includes(ee)&&!W.includes(ee)&&!q.includes(ee)&&!X.includes(ee)&&!pe.includes(ee)&&!te.includes(ee))return!1}return!0}),[ae,I,j,J,R,M]),ne=v.useMemo(()=>{const D=[...Pe],ee=de=>de==="High"?0:de==="Medium"?1:2;return D.sort((de,N)=>{const W=ee(de.priority??"Medium"),q=ee(N.priority??"Medium");if(W!==q)return W-q;if(!$){if(F.length>0){const te=F.indexOf(de.key),C=F.indexOf(N.key);if(te>=0&&C>=0)return te-C;if(te>=0)return-1;if(C>=0)return 1}return 0}const X=(te,C)=>te===C?0:te<C?-1:1,pe=te=>{switch($){case"title":return(te.name??"").toLowerCase();case"description":return(te.description??"").toLowerCase();case"type":return te.tag;case"priority":return te.priority??"Medium";case"metaJourney":return(te.projectName??"").toLowerCase();case"journey":return(te.journeyName??"").toLowerCase();case"phase":return(te.phaseTitle??"").toLowerCase();case"struggles":return(te.struggles??[]).join(" ").toLowerCase();default:return""}};return B?X(pe(de),pe(N)):X(pe(N),pe(de))}),D},[Pe,$,B,F]),Me=v.useCallback(D=>{z(ee=>ee===D?(T(de=>!de),D):(T(!0),D))},[]),ze=Di(Mn(Tr,{activationConstraint:{distance:5}}),Mn(Lr,{coordinateGetter:Fi})),De=v.useCallback(D=>{const{active:ee,over:de}=D;if(!de||ee.id===de.id)return;const N=ne.map(te=>te.key),W=N.indexOf(ee.id),q=N.indexOf(de.id);if(W===-1||q===-1)return;const X=[...N],[pe]=X.splice(W,1);X.splice(q,0,pe),H(X)},[ne]),le=v.useMemo(()=>a.filter(D=>D.clientId===e),[a,e]),et=D=>le.filter(ee=>(ee.linkedJobIds??[]).includes(D)),O=({column:D,label:ee})=>i.jsx("th",{className:"cursor-pointer select-none px-4 py-3 font-semibold text-stone-700 dark:text-stone-200 hover:bg-stone-100 dark:hover:bg-stone-700/80",onClick:()=>D&&Me(D),children:i.jsxs("div",{className:"flex items-center gap-1",children:[ee,$===D&&i.jsx("span",{className:"text-accent",children:B?"":""})]})});return Z?i.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[i.jsxs("div",{className:"flex flex-shrink-0 flex-wrap items-end gap-4 border-b border-stone-200/80 bg-white px-6 py-4 dark:border-stone-600/80 dark:bg-stone-900",children:[i.jsx("input",{type:"search",value:M,onChange:D=>P(D.target.value),placeholder:"Search jobs...",className:"rounded-lg border border-stone-300 bg-white px-3 py-2 text-sm text-stone-700 placeholder-stone-400 focus:border-accent focus:outline-none focus:ring-1 focus:ring-accent dark:border-stone-600 dark:bg-stone-800 dark:text-stone-200 dark:placeholder-stone-500"}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"filter-meta-journey",className:"mb-1 block text-xs font-medium text-stone-500 dark:text-stone-400",children:"Meta-Journey"}),i.jsxs("select",{id:"filter-meta-journey",value:I,onChange:D=>E(D.target.value),className:"rounded-lg border border-stone-300 bg-white px-3 py-2 text-sm text-stone-700 focus:border-accent focus:outline-none focus:ring-1 focus:ring-accent dark:border-stone-600 dark:bg-stone-800 dark:text-stone-200",children:[i.jsx("option",{value:"",children:"Select"}),G.map(D=>i.jsx("option",{value:D.id,children:D.name},D.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"filter-journey",className:"mb-1 block text-xs font-medium text-stone-500 dark:text-stone-400",children:"Journey"}),i.jsxs("select",{id:"filter-journey",value:j,onChange:D=>A(D.target.value),className:"rounded-lg border border-stone-300 bg-white px-3 py-2 text-sm text-stone-700 focus:border-accent focus:outline-none focus:ring-1 focus:ring-accent dark:border-stone-600 dark:bg-stone-800 dark:text-stone-200",children:[i.jsx("option",{value:"",children:"Select"}),fe.map(D=>i.jsx("option",{value:D.id,children:D.name},D.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"filter-type",className:"mb-1 block text-xs font-medium text-stone-500 dark:text-stone-400",children:"Type"}),i.jsxs("select",{id:"filter-type",value:J,onChange:D=>w(D.target.value),className:"rounded-lg border border-stone-300 bg-white px-3 py-2 text-sm text-stone-700 focus:border-accent focus:outline-none focus:ring-1 focus:ring-accent dark:border-stone-600 dark:bg-stone-800 dark:text-stone-200",children:[i.jsx("option",{value:"",children:"Select"}),jv.map(D=>i.jsx("option",{value:D,children:D},D))]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"filter-priority",className:"mb-1 block text-xs font-medium text-stone-500 dark:text-stone-400",children:"Priority"}),i.jsxs("select",{id:"filter-priority",value:R,onChange:D=>U(D.target.value),className:"rounded-lg border border-stone-300 bg-white px-3 py-2 text-sm text-stone-700 focus:border-accent focus:outline-none focus:ring-1 focus:ring-accent dark:border-stone-600 dark:bg-stone-800 dark:text-stone-200",children:[i.jsx("option",{value:"",children:"Select"}),bv.map(D=>i.jsx("option",{value:D,children:D},D))]})]}),i.jsx("button",{onClick:()=>k(!0),className:"rounded-2xl bg-accent px-6 py-2.5 text-sm font-semibold text-white shadow-soft hover:bg-accent-hover dark:hover:shadow-glow-dark",children:"Add job"})]}),i.jsx("div",{className:"flex-1 overflow-auto p-6",children:ne.length===0?i.jsx("p",{className:"text-stone-500 dark:text-stone-400",children:"No jobs yet. Create jobs here, then assign them to phases in the Meta-Journeys tab."}):i.jsx("div",{className:"overflow-x-auto rounded-xl border border-stone-200 bg-white dark:border-stone-600 dark:bg-stone-800",children:i.jsx(Ti,{sensors:ze,onDragEnd:De,children:i.jsxs("table",{className:"w-full min-w-[900px] text-left text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-stone-200 bg-stone-50 dark:border-stone-600 dark:bg-stone-800/80",children:[i.jsx("th",{className:"w-10 px-2 py-3","aria-label":"Reorder"}),i.jsx(O,{column:"title",label:"Title"}),i.jsx(O,{column:"description",label:"Description"}),i.jsx(O,{column:"type",label:"Primary Type"}),i.jsx(O,{column:"priority",label:"Priority"}),i.jsx(O,{column:"metaJourney",label:"Meta-Journey"}),i.jsx(O,{column:"journey",label:"Journey"}),i.jsx(O,{column:"phase",label:"Phase"}),i.jsx(O,{column:"struggles",label:"Struggles"}),i.jsx("th",{className:"px-4 py-3 font-semibold text-stone-700 dark:text-stone-200",children:"Linked Opportunities"})]})}),i.jsx("tbody",{children:i.jsx(Jo,{items:ne.map(D=>D.key),strategy:Ji,children:ne.map(D=>i.jsx(Sv,{job:D,linked:et(D.id),tagStyle:wv(D.tag),onRowClick:()=>f(D),onOpportunityClick:ee=>{f(null),m(ee)}},D.key))})})]})})})}),u&&i.jsx(Yp,{isOpen:!!u,onClose:()=>f(null),job:{...u,projectName:u.projectName??"",journeyName:u.journeyName??"",phaseTitle:u.phaseTitle??""},linkedInsights:(u.insightIds??[]).map(D=>l.find(ee=>ee.id===D)).filter(Boolean).map(D=>({id:D.id,title:D.title})),linkedOpportunities:et(u.id).map(D=>({id:D.id,name:D.name})),onOpportunityClick:D=>{const ee=le.find(de=>de.id===D.id);ee&&(f(null),m(ee))},onEdit:()=>{y(u),f(null)}}),h&&i.jsx(Ei,{isOpen:!0,onClose:()=>y(null),job:h,jobIndex:0,insights:l.filter(D=>D.clientId===e),onSave:(D,ee)=>{d(h.id,ee),y(null)}}),i.jsx(xv,{isOpen:b,onClose:()=>k(!1),clientId:e,insights:l.filter(D=>D.clientId===e),onCreate:D=>{c(e,D),k(!1)}}),x&&i.jsx(wc,{isOpen:!!x,onClose:()=>m(null),opportunity:x,clientName:(K=t.find(D=>D.id===x.clientId))==null?void 0:K.name,projectName:(ce=n.find(D=>D.id===x.projectId))==null?void 0:ce.name,journeyName:(Ce=r.find(D=>D.id===x.journeyId))==null?void 0:Ce.name,phaseTitle:(Ae=o.find(D=>D.id===x.phaseId))==null?void 0:Ae.title,linkedJobLabels:s.filter(D=>(x.linkedJobIds??[]).includes(D.id)).map(D=>({key:D.id,label:D.name})),onEdit:()=>{S(x),m(null)}}),g&&i.jsx(_i,{isOpen:!!g,onClose:()=>S(null),opportunity:g,jobsInJourney:s.filter(D=>D.clientId===e).map(D=>({key:D.id,label:D.name})),onSave:D=>{p(D.id,{name:D.name,description:D.description,priority:D.priority,stage:D.stage,isPriority:D.isPriority,pointOfDifferentiation:D.pointOfDifferentiation,criticalAssumptions:D.criticalAssumptions,linkedJobIds:D.linkedJobIds}),S(null)}})]}):null}const Nv=["High","Medium","Low"];function Iv({isOpen:e,onClose:t,clientId:n,onCreate:r}){const[o,s]=v.useState(""),[l,a]=v.useState(""),[c,d]=v.useState("Medium"),p=u=>{u.preventDefault(),r({title:o.trim()||"Untitled insight",description:l.trim()||void 0,priority:c}),t(),s(""),a(""),d("Medium")};return i.jsx(Ot,{isOpen:e,onClose:t,title:"Create insight",maxWidth:"max-w-2xl",footer:i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{type:"button",onClick:t,className:"flex-1 rounded-xl border border-stone-300 px-4 py-2.5 font-medium text-stone-700 hover:bg-stone-50 dark:border-stone-600 dark:text-stone-200 dark:hover:bg-stone-700",children:"Cancel"}),i.jsx("button",{type:"submit",form:"create-insight-form",className:"flex-1 rounded-xl bg-accent px-4 py-2.5 font-medium text-white hover:bg-accent-hover",children:"Create"})]}),children:i.jsxs("form",{id:"create-insight-form",onSubmit:p,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(ie,{htmlFor:"create-insight-title",children:"Title"}),i.jsx("input",{id:"create-insight-title",type:"text",value:o,onChange:u=>s(u.target.value),className:"w-full rounded-xl border border-stone-300 px-4 py-2.5 focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100",placeholder:"Insight title"})]}),i.jsxs("div",{children:[i.jsx(ie,{htmlFor:"create-insight-desc",children:"Description"}),i.jsx("textarea",{id:"create-insight-desc",value:l,onChange:u=>a(u.target.value),rows:4,className:"w-full rounded-xl border border-stone-300 px-4 py-2.5 focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100",placeholder:"Insight description"})]}),i.jsxs("div",{children:[i.jsx(ie,{htmlFor:"create-insight-priority",children:"Priority"}),i.jsx("select",{id:"create-insight-priority",value:c,onChange:u=>d(u.target.value),className:"w-full rounded-xl border border-stone-300 px-4 py-2.5 focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100",children:Nv.map(u=>i.jsx("option",{value:u,children:u},u))})]})]})})}const Gp=["High","Medium","Low"];function Ev(e,t){return e?e.length<=t?e:e.slice(0,t)+"":""}function Pv({insight:e,getLinkedJobs:t,onRowClick:n,onLinkedJobClick:r}){const{attributes:o,listeners:s,setNodeRef:l,transform:a,transition:c,isDragging:d}=Ko({id:e.id}),p={transform:Mt.Transform.toString(a),transition:c},u=t(e.id);return i.jsxs("tr",{ref:l,style:p,onClick:n,className:`cursor-pointer border-b border-stone-100 transition-colors hover:bg-stone-50 dark:border-stone-700 dark:hover:bg-stone-800/60 ${d?"bg-stone-100 dark:bg-stone-800 opacity-90":""}`,children:[i.jsx("td",{className:"w-10 px-2 py-3",children:i.jsx("div",{...o,...s,onClick:f=>f.stopPropagation(),className:"cursor-grab touch-none rounded p-1 text-stone-400 hover:bg-stone-200 hover:text-stone-600 active:cursor-grabbing dark:hover:bg-stone-600 dark:hover:text-stone-300","aria-label":"Drag to reorder",children:i.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h16M4 16h16"})})})}),i.jsx("td",{className:"px-4 py-3",children:i.jsx("span",{className:"font-medium text-stone-900 dark:text-stone-100",children:e.title??""})}),i.jsx("td",{className:"max-w-[280px] px-4 py-3",children:i.jsx("span",{className:"text-stone-600 dark:text-stone-300",title:e.description,children:Ev(e.description,80)})}),i.jsx("td",{className:"px-4 py-3",children:i.jsx("span",{className:`inline-flex rounded-full px-2 py-0.5 text-xs font-medium ${e.priority==="High"?"bg-red-100 text-red-800 dark:bg-red-900/60 dark:text-red-200":e.priority==="Medium"?"bg-amber-100 text-amber-800 dark:bg-amber-900/60 dark:text-amber-200":"bg-stone-100 text-stone-700 dark:bg-stone-600 dark:text-stone-200"}`,children:e.priority??"Medium"})}),i.jsx("td",{className:"px-4 py-3",onClick:f=>f.stopPropagation(),children:u.length>0?i.jsx("div",{className:"flex flex-wrap gap-1.5",children:u.map(f=>r?i.jsx("button",{type:"button",onClick:()=>r(f.id),className:"rounded-md bg-accent/15 px-2 py-0.5 text-xs font-medium text-accent hover:bg-accent/25 dark:bg-violet-500/20 dark:text-accent-light dark:hover:bg-violet-500/30",children:f.name},f.id):i.jsx("span",{className:"text-stone-600 dark:text-stone-300",children:f.name},f.id))}):i.jsx("span",{className:"text-stone-400 dark:text-stone-500",children:""})})]})}function Ov({clientId:e,onLinkedJobClick:t}){const n=L(M=>M.insights),r=L(M=>M.jobs),o=L(M=>M.createInsight),s=L(M=>M.updateInsight),l=L(M=>M.reorderInsights),[a,c]=v.useState(!1),[d,p]=v.useState(null),[u,f]=v.useState(null),[h,y]=v.useState(""),[b,k]=v.useState(""),[x,m]=v.useState(null),[g,S]=v.useState(!0),I=v.useMemo(()=>n.filter(M=>M.clientId===e),[n,e]),E=v.useMemo(()=>I.filter(M=>{if(b&&(M.priority??"Medium")!==b)return!1;if(h.trim()){const P=h.toLowerCase().trim(),$=(M.title??"").toLowerCase(),z=(M.description??"").toLowerCase();if(!$.includes(P)&&!z.includes(P))return!1}return!0}),[I,b,h]),j=v.useCallback(M=>r.filter(P=>(P.insightIds??[]).includes(M)).map(P=>({id:P.id,name:P.name})),[r]),A=v.useMemo(()=>{const M=[...E],P=($,z)=>$===z?0:$<z?-1:1;return M.sort(($,z)=>{if(x){const B=T=>{switch(x){case"title":return(T.title??"").toLowerCase();case"description":return(T.description??"").toLowerCase();case"priority":return T.priority??"Medium";case"linkedJobs":{const F=j(T.id).length;return String(F).padStart(4,"0")}default:return""}};return g?P(B($),B(z)):P(B(z),B($))}return($.order??0)-(z.order??0)}),M},[E,x,g,j]),J=v.useCallback(M=>{m(P=>P===M?(S($=>!$),M):(S(!0),M))},[]),w=Di(Mn(Tr,{activationConstraint:{distance:5}}),Mn(Lr,{coordinateGetter:Fi})),R=v.useCallback(M=>{const{active:P,over:$}=M;if(!$||P.id===$.id)return;const z=A.map(Z=>Z.id),B=z.indexOf(P.id),T=z.indexOf($.id);if(B===-1||T===-1)return;const F=[...z],[H]=F.splice(B,1);F.splice(T,0,H),l(e,F)},[A,e,l]),U=({column:M,label:P})=>i.jsx("th",{className:"cursor-pointer select-none px-4 py-3 font-semibold text-stone-700 dark:text-stone-200 hover:bg-stone-100 dark:hover:bg-stone-700/80",onClick:()=>M&&J(M),children:i.jsxs("div",{className:"flex items-center gap-1",children:[P,x===M&&i.jsx("span",{className:"text-accent",children:g?"":""})]})});return i.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[i.jsxs("div",{className:"flex flex-shrink-0 flex-wrap items-end gap-4 border-b border-stone-200/80 bg-white px-6 py-4 dark:border-stone-600/80 dark:bg-stone-900",children:[i.jsx("input",{type:"search",value:h,onChange:M=>y(M.target.value),placeholder:"Search insights...",className:"rounded-lg border border-stone-300 bg-white px-3 py-2 text-sm text-stone-700 placeholder-stone-400 focus:border-accent focus:outline-none focus:ring-1 focus:ring-accent dark:border-stone-600 dark:bg-stone-800 dark:text-stone-200 dark:placeholder-stone-500"}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"filter-priority",className:"mb-1 block text-xs font-medium text-stone-500 dark:text-stone-400",children:"Priority"}),i.jsxs("select",{id:"filter-priority",value:b,onChange:M=>k(M.target.value),className:"rounded-lg border border-stone-300 bg-white px-3 py-2 text-sm text-stone-700 focus:border-accent focus:outline-none focus:ring-1 focus:ring-accent dark:border-stone-600 dark:bg-stone-800 dark:text-stone-200",children:[i.jsx("option",{value:"",children:"Select"}),Gp.map(M=>i.jsx("option",{value:M,children:M},M))]})]}),i.jsx("button",{onClick:()=>c(!0),className:"rounded-2xl bg-accent px-6 py-2.5 text-sm font-semibold text-white shadow-soft hover:bg-accent-hover dark:hover:shadow-glow-dark",children:"Add insight"})]}),i.jsx("div",{className:"flex-1 overflow-auto p-6",children:A.length===0?i.jsx("p",{className:"text-stone-500 dark:text-stone-400",children:"No insights yet. Create research insights here, then link them to jobs when creating or editing jobs."}):i.jsx("div",{className:"overflow-x-auto rounded-xl border border-stone-200 bg-white dark:border-stone-600 dark:bg-stone-800",children:i.jsx(Ti,{sensors:w,onDragEnd:R,children:i.jsxs("table",{className:"w-full min-w-[720px] text-left text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-stone-200 bg-stone-50 dark:border-stone-600 dark:bg-stone-800/80",children:[i.jsx("th",{className:"w-10 px-2 py-3","aria-label":"Reorder"}),i.jsx(U,{column:"title",label:"Title"}),i.jsx(U,{column:"description",label:"Description"}),i.jsx(U,{column:"priority",label:"Priority"}),i.jsx(U,{column:"linkedJobs",label:"Linked Jobs"})]})}),i.jsx("tbody",{children:i.jsx(Jo,{items:A.map(M=>M.id),strategy:Ji,children:A.map(M=>i.jsx(Pv,{insight:M,getLinkedJobs:j,onRowClick:()=>f(M),onLinkedJobClick:t},M.id))})})]})})})}),i.jsx(Iv,{isOpen:a,onClose:()=>c(!1),clientId:e,onCreate:M=>{o(e,M),c(!1)}}),u&&i.jsx(Ot,{isOpen:!0,onClose:()=>f(null),title:u.title,maxWidth:"max-w-2xl",footer:i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{type:"button",onClick:()=>{p(u),f(null)},className:"flex-1 rounded-xl border border-stone-300 px-4 py-2.5 font-medium text-stone-700 hover:bg-stone-50 dark:border-stone-600 dark:text-stone-200 dark:hover:bg-stone-700",children:"Edit"}),i.jsx("button",{type:"button",onClick:()=>f(null),className:"flex-1 rounded-xl bg-accent px-4 py-2.5 font-medium text-white hover:bg-accent-hover",children:"Close"})]}),children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx($n,{children:"Description"}),i.jsx("p",{className:"text-sm text-stone-700 dark:text-stone-300 whitespace-pre-wrap",children:u.description||""})]}),i.jsxs("div",{children:[i.jsx($n,{children:"Priority"}),i.jsx("span",{className:`inline-flex rounded-full px-2 py-0.5 text-xs font-medium ${u.priority==="High"?"bg-red-100 text-red-800 dark:bg-red-900/60 dark:text-red-200":u.priority==="Medium"?"bg-amber-100 text-amber-800 dark:bg-amber-900/60 dark:text-amber-200":"bg-stone-100 text-stone-700 dark:bg-stone-600 dark:text-stone-200"}`,children:u.priority??"Medium"})]}),j(u.id).length>0&&i.jsxs("div",{children:[i.jsx($n,{children:"Linked jobs"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:j(u.id).map(M=>t?i.jsx("button",{type:"button",onClick:()=>{t(M.id),f(null)},className:"rounded-lg border border-accent/30 bg-accent/10 px-3 py-1.5 text-sm font-medium text-accent transition-colors hover:bg-accent/20 dark:border-violet-500/40 dark:bg-violet-500/15 dark:text-accent-light dark:hover:bg-violet-500/25",children:M.name},M.id):i.jsx("span",{className:"rounded-lg border border-stone-200 bg-stone-50 px-3 py-1.5 text-sm text-stone-700 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-300",children:M.name},M.id))})]})]})}),d&&i.jsx(Ot,{isOpen:!0,onClose:()=>p(null),title:"Edit insight",maxWidth:"max-w-2xl",footer:i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{type:"button",onClick:()=>p(null),className:"flex-1 rounded-xl border border-stone-300 px-4 py-2.5 font-medium text-stone-700 hover:bg-stone-50 dark:border-stone-600 dark:text-stone-200 dark:hover:bg-stone-700",children:"Cancel"}),i.jsx("button",{type:"submit",form:"edit-insight-form",className:"flex-1 rounded-xl bg-accent px-4 py-2.5 font-medium text-white hover:bg-accent-hover",children:"Save"})]}),children:i.jsx(Mv,{insight:d,onSave:M=>{s(d.id,M),p(null)}})})]})}function Mv({insight:e,onSave:t}){const[n,r]=v.useState(e.title??""),[o,s]=v.useState(e.description??""),[l,a]=v.useState(e.priority??"Medium");return i.jsxs("form",{id:"edit-insight-form",onSubmit:c=>{c.preventDefault(),t({title:n.trim()||"Untitled",description:o.trim()||void 0,priority:l})},className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(ie,{htmlFor:"edit-insight-title",children:"Title"}),i.jsx("input",{id:"edit-insight-title",type:"text",value:n,onChange:c=>r(c.target.value),className:"w-full rounded-xl border border-stone-300 px-4 py-2.5 focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100"})]}),i.jsxs("div",{children:[i.jsx(ie,{htmlFor:"edit-insight-desc",children:"Description"}),i.jsx("textarea",{id:"edit-insight-desc",value:o,onChange:c=>s(c.target.value),rows:4,className:"w-full rounded-xl border border-stone-300 px-4 py-2.5 focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100"})]}),i.jsxs("div",{children:[i.jsx(ie,{htmlFor:"edit-insight-priority",children:"Priority"}),i.jsx("select",{id:"edit-insight-priority",value:l,onChange:c=>a(c.target.value),className:"w-full rounded-xl border border-stone-300 px-4 py-2.5 focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100",children:Gp.map(c=>i.jsx("option",{value:c,children:c},c))})]})]})}const Xr=["Backlog","In discovery","Horizon 1","Horizon 2","Horizon 3"],Dv=["High","Medium","Low"];function Rv(e){return e==="High"?"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300":e==="Medium"?"bg-amber-100 text-amber-800 dark:bg-amber-900/40 dark:text-amber-300":"bg-stone-100 text-stone-600 dark:bg-stone-700 dark:text-stone-300"}function Xp({opp:e,projectName:t,journeyName:n,phaseTitle:r,isDragging:o,dragHandleProps:s,onCardClick:l}){return i.jsx("div",{role:l?"button":void 0,tabIndex:l?0:void 0,onClick:l?()=>l(e):void 0,onKeyDown:l?a=>{(a.key==="Enter"||a.key===" ")&&(a.preventDefault(),l(e))}:void 0,className:`
        w-full rounded-lg border border-stone-200 bg-white p-3 text-left text-sm transition-all
        hover:border-accent/30 dark:border-stone-600 dark:bg-stone-800 dark:hover:border-accent/40
        ${l?"cursor-pointer":""}
        ${o?"opacity-90 shadow-elevated ring-2 ring-accent/50":"shadow-soft"}
      `,children:i.jsxs("div",{className:"flex items-start gap-2",children:[s&&i.jsx("div",{...s,className:"shrink-0 cursor-grab touch-none rounded p-0.5 text-stone-400 hover:bg-stone-100 hover:text-stone-600 active:cursor-grabbing dark:hover:bg-stone-700 dark:hover:text-stone-300","aria-label":"Drag to reorder",children:i.jsx("svg",{className:"h-3.5 w-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h16M4 16h16"})})}),i.jsxs("div",{className:"min-w-0 flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[e.isPriority&&i.jsx("svg",{className:"h-3.5 w-3.5 shrink-0 text-amber-500 dark:text-amber-400",fill:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{d:"M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z"})}),i.jsx("span",{className:"font-medium text-stone-900 dark:text-stone-100 truncate",children:e.name}),i.jsx("span",{className:`shrink-0 rounded-full px-1.5 py-0.5 text-xs font-medium ${Rv(e.priority)}`,children:e.priority})]}),i.jsxs("div",{className:"mt-1 flex flex-wrap gap-x-1.5 gap-y-0.5 text-xs text-stone-500 dark:text-stone-400",children:[i.jsx("span",{children:t}),i.jsx("span",{children:""}),i.jsx("span",{children:n}),r&&i.jsxs(i.Fragment,{children:[i.jsx("span",{children:""}),i.jsx("span",{children:r})]})]}),e.description&&i.jsx("p",{className:"mt-1 line-clamp-2 text-xs text-stone-600 dark:text-stone-300",children:e.description})]})]})})}function Av({opp:e,projectName:t,journeyName:n,phaseTitle:r,disabled:o,onCardClick:s}){const{attributes:l,listeners:a,setNodeRef:c,transform:d,transition:p,isDragging:u}=Ko({id:e.id,data:{opportunity:e},disabled:o}),f={transform:Mt.Transform.toString(d),transition:p};return i.jsx("div",{ref:c,style:f,children:i.jsx(Xp,{opp:e,projectName:t,journeyName:n,phaseTitle:r,isDragging:u,dragHandleProps:o?void 0:{...l,...a},onCardClick:s})})}function Lv({stage:e,opportunities:t,projects:n,journeys:r,phases:o,canEdit:s,onOpportunityClick:l}){const{setNodeRef:a,isOver:c}=Bp({id:e}),d=h=>{var y;return((y=n.find(b=>b.id===h))==null?void 0:y.name)??""},p=h=>{var y;return((y=r.find(b=>b.id===h))==null?void 0:y.name)??""},u=h=>{var y;return((y=o.find(b=>b.id===h))==null?void 0:y.title)??""},f=t.map(h=>h.id);return i.jsx("div",{ref:a,className:`flex min-h-[280px] flex-1 min-w-[220px] max-w-[280px] flex-col border-b border-r border-stone-200 bg-white last:border-r-0 dark:border-stone-600 dark:bg-stone-800 transition-colors ${c?"bg-accent/5 dark:bg-accent/10":""}`,children:i.jsx(Jo,{items:f,strategy:Ji,children:i.jsx("div",{className:"flex flex-1 flex-col gap-2 overflow-y-auto p-3",children:t.map(h=>i.jsx(Av,{opp:h,projectName:d(h.projectId),journeyName:p(h.journeyId),phaseTitle:u(h.phaseId),disabled:!s,onCardClick:l},h.id))})})})}function Tv({clientId:e}){var ze,De,le,et;const t=L(O=>O.clients),n=L(O=>O.projects),r=L(O=>O.journeys),o=L(O=>O.phases),s=L(O=>O.jobs),l=L(O=>O.opportunities),a=L(O=>O.moveOpportunityToStage),c=L(O=>O.reorderOpportunitiesInStage),d=L(O=>O.updateOpportunity),[p,u]=v.useState(null),[f,h]=v.useState(null),[y,b]=v.useState(null),[k,x]=v.useState(""),[m,g]=v.useState(""),[S,I]=v.useState(""),[E,j]=v.useState(""),[A,J]=v.useState(""),[w,R]=v.useState(!1),[U,M]=v.useState(""),P=t.find(O=>O.id===e),$=!0,z=v.useMemo(()=>{let O=l.filter(K=>K.clientId===e);if(k.trim()){const K=k.toLowerCase();O=O.filter(ce=>{var Ce;return ce.name.toLowerCase().includes(K)||((Ce=ce.description)==null?void 0:Ce.toLowerCase().includes(K))})}return w&&(O=O.filter(K=>K.isPriority)),m&&(O=O.filter(K=>K.projectId===m)),S&&(O=O.filter(K=>K.journeyId===S)),E&&(O=O.filter(K=>K.phaseId===E)),A&&(O=O.filter(K=>K.priority===A)),U&&(O=O.filter(K=>K.stage===U)),O},[l,e,k,w,m,S,E,A,U]),B=v.useMemo(()=>{const O={Backlog:[],"In discovery":[],"Horizon 1":[],"Horizon 2":[],"Horizon 3":[]};return Xr.forEach(K=>{O[K]=z.filter(ce=>ce.stage===K).sort((ce,Ce)=>ce.stageOrder-Ce.stageOrder)}),O},[z]),T=n.filter(O=>O.clientId===e),F=r.filter(O=>T.some(K=>K.id===O.projectId)),H=o.filter(O=>F.some(K=>K.id===O.journeyId)),Z=Di(Mn(Tr,{activationConstraint:{distance:8}}),Mn(Lr,{coordinateGetter:Fi})),G=O=>u(String(O.active.id)),fe=O=>{u(null);const{active:K,over:ce}=O;if(!ce)return;const Ce=String(K.id),Ae=l.find(W=>W.id===Ce);if(!Ae||Ae.clientId!==e)return;const D=String(ce.id),ee=Xr.includes(D);let de,N;if(ee)de=D,N=0;else{const W=l.find(X=>X.id===D);if(!W)return;de=W.stage,N=z.filter(X=>X.stage===de).sort((X,pe)=>X.stageOrder-pe.stageOrder).findIndex(X=>X.id===D),N<0&&(N=0)}if(Ae.stage===de){const W=B[de],q=W.findIndex(te=>te.id===Ce);if(q===N)return;const X=[...W],[pe]=X.splice(q,1);X.splice(N,0,pe),c(Ae.clientId,de,X.map(te=>te.id))}else a(Ce,de,N)},ae=p?l.find(O=>O.id===p):null,Pe=O=>{var K;return((K=n.find(ce=>ce.id===O))==null?void 0:K.name)??""},ne=O=>{var K;return((K=r.find(ce=>ce.id===O))==null?void 0:K.name)??""},Me=O=>{var K;return((K=o.find(ce=>ce.id===O))==null?void 0:K.title)??""};return P?i.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[i.jsxs("div",{className:"flex flex-shrink-0 flex-wrap items-end gap-3 border-b border-stone-200/80 bg-white px-6 py-4 dark:border-stone-600/80 dark:bg-stone-900",children:[i.jsx("input",{type:"search",placeholder:"Search by name or description...",value:k,onChange:O=>x(O.target.value),className:"rounded-xl border border-stone-200 bg-white px-3 py-2 text-sm focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100"}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"filter-project",className:"mb-1 block text-xs font-medium text-stone-500 dark:text-stone-400",children:"Meta-Journey"}),i.jsxs("select",{id:"filter-project",value:m,onChange:O=>g(O.target.value),className:"rounded-xl border border-stone-200 bg-white px-3 py-2 text-sm dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100",children:[i.jsx("option",{value:"",children:"Select"}),T.map(O=>i.jsx("option",{value:O.id,children:O.name},O.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"filter-journey",className:"mb-1 block text-xs font-medium text-stone-500 dark:text-stone-400",children:"Journey"}),i.jsxs("select",{id:"filter-journey",value:S,onChange:O=>I(O.target.value),className:"rounded-xl border border-stone-200 bg-white px-3 py-2 text-sm dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100",children:[i.jsx("option",{value:"",children:"Select"}),F.map(O=>i.jsx("option",{value:O.id,children:O.name},O.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"filter-phase",className:"mb-1 block text-xs font-medium text-stone-500 dark:text-stone-400",children:"Phase"}),i.jsxs("select",{id:"filter-phase",value:E,onChange:O=>j(O.target.value),className:"rounded-xl border border-stone-200 bg-white px-3 py-2 text-sm dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100",children:[i.jsx("option",{value:"",children:"Select"}),H.map(O=>i.jsx("option",{value:O.id,children:O.title||"Untitled"},O.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"filter-stage",className:"mb-1 block text-xs font-medium text-stone-500 dark:text-stone-400",children:"Stage"}),i.jsxs("select",{id:"filter-stage",value:U,onChange:O=>M(O.target.value),className:"rounded-xl border border-stone-200 bg-white px-3 py-2 text-sm dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100",children:[i.jsx("option",{value:"",children:"Select"}),Xr.map(O=>i.jsx("option",{value:O,children:O},O))]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"filter-priority",className:"mb-1 block text-xs font-medium text-stone-500 dark:text-stone-400",children:"Priority"}),i.jsxs("select",{id:"filter-priority",value:A,onChange:O=>J(O.target.value),className:"rounded-xl border border-stone-200 bg-white px-3 py-2 text-sm dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100",children:[i.jsx("option",{value:"",children:"Select"}),Dv.map(O=>i.jsx("option",{value:O,children:O},O))]})]}),i.jsxs("label",{className:"flex cursor-pointer items-center gap-2",children:[i.jsx("input",{type:"checkbox",checked:w,onChange:O=>R(O.target.checked),className:"h-4 w-4 rounded border-stone-300 text-amber-500 focus:ring-amber-500/20 dark:border-stone-500"}),i.jsx("span",{className:"text-sm text-stone-600 dark:text-stone-300",children:"Priority only"})]})]}),i.jsx("div",{className:"flex-1 overflow-x-auto overflow-y-auto p-6",children:i.jsx("div",{className:"min-h-0 flex-1 overflow-auto rounded-2xl border border-stone-200 bg-warm-50/50 dark:border-stone-600 dark:bg-stone-900/50",children:i.jsxs(Ti,{sensors:Z,collisionDetection:Bg,onDragStart:G,onDragEnd:fe,children:[i.jsx("div",{className:"flex border-b border-stone-200 bg-stone-50 dark:border-stone-500 dark:bg-stone-700",children:Xr.map(O=>i.jsx("div",{className:"flex min-h-[4.5rem] min-w-[220px] max-w-[280px] flex-1 items-center border-r border-stone-200 px-4 py-4 last:border-r-0 dark:border-stone-500",children:i.jsx("span",{className:"text-xs font-semibold text-stone-700 dark:text-stone-200",children:O})},O))}),i.jsx("div",{className:"flex bg-white dark:bg-stone-800",children:Xr.map(O=>i.jsx(Lv,{stage:O,opportunities:B[O],projects:T,journeys:F,phases:H,canEdit:$,onOpportunityClick:K=>h(K)},O))}),i.jsx(qx,{children:ae?i.jsx("div",{className:"w-[260px]",children:i.jsx(Xp,{opp:ae,projectName:Pe(ae.projectId),journeyName:ne(ae.journeyId),phaseTitle:Me(ae.phaseId),isDragging:!0})}):null})]})})}),f&&i.jsx(wc,{isOpen:!!f,onClose:()=>h(null),opportunity:f,clientName:(ze=t.find(O=>O.id===f.clientId))==null?void 0:ze.name,projectName:(De=n.find(O=>O.id===f.projectId))==null?void 0:De.name,journeyName:(le=r.find(O=>O.id===f.journeyId))==null?void 0:le.name,phaseTitle:(et=o.find(O=>O.id===f.phaseId))==null?void 0:et.title,linkedJobLabels:(f.linkedJobIds??[]).map(O=>{const K=s.find(ce=>ce.id===O);return K?{key:K.id,label:K.name??""}:{key:O,label:""}}),onEdit:()=>{b(f),h(null)}}),y&&i.jsx(_i,{isOpen:!!y,onClose:()=>b(null),opportunity:y,jobsInJourney:(()=>{const O=o.find(K=>K.id===y.phaseId);return O?(O.jobIds??[]).map(K=>s.find(ce=>ce.id===K)).filter(Boolean).map(K=>({key:K.id,label:K.name??""})):[]})(),onSave:O=>{O.stage!=null&&O.stage!==y.stage&&a(O.id,O.stage,0),d(O.id,{name:O.name,description:O.description,priority:O.priority,stage:O.stage,isPriority:O.isPriority,pointOfDifferentiation:O.pointOfDifferentiation,criticalAssumptions:O.criticalAssumptions,linkedJobIds:O.linkedJobIds}),b(null)}})]}):null}const Jv={description:"Description",customerJobs:"Customer jobs & goals",frontStageActions:"Front stage actions",systemsTechnologiesChannels:"Channels",struggles:"Struggles",backStageActions:"Back stage actions",systems:"Systems",relatedProcesses:"Related processes",opportunities:"Opportunities"},Fv=v.forwardRef(function({isOpen:t,onClose:n,activeCell:r,onSetActiveCell:o,scrollToCommentKey:s,onScrollDone:l},a){const c=L(z=>z.selectedJourneyId),d=L(z=>c?z.journeys.find(B=>B.id===c)??null:null),p=L(z=>c?z.phases.filter(B=>B.journeyId===c).sort((B,T)=>B.order-T.order):[]),u=L(z=>z.cellComments),f=L(z=>z.setCellComment),h=L(z=>z.addCellCommentReply),y=L(z=>z.deleteCellComment),[b,k]=v.useState(null),[x,m]=v.useState(null),[g,S]=v.useState(""),[I,E]=v.useState(""),[j,A]=v.useState(""),J=v.useRef({});v.useImperativeHandle(a,()=>({scrollToComment:z=>{const B=J.current[z];B&&B.scrollIntoView({behavior:"smooth",block:"nearest"})}})),v.useEffect(()=>{if(!s)return;const z=setTimeout(()=>{const B=J.current[s];B&&B.scrollIntoView({behavior:"smooth",block:"nearest"}),l()},350);return()=>clearTimeout(z)},[s,l]);const w=Object.entries(u).filter(([z])=>{const B=_d(z);return!B||B.rowKey==="opportunities"?!1:p.some(T=>T.id===B.phaseId)}),R=z=>{var B;return((B=p.find(T=>T.id===z))==null?void 0:B.title)??"Unknown"},U=z=>{var B,T;return Jv[z]??((T=(B=d==null?void 0:d.customRows)==null?void 0:B.find(F=>F.id===z))==null?void 0:T.label)??z},M=()=>{if(!r||!j.trim())return;const z=hc(r.phaseId,r.rowKey);f(z,j.trim()),A(""),o(null)},P=z=>{g.trim()&&(h(z,g.trim()),S(""),m(null))},$=z=>{I.trim()&&f(z,I.trim()),k(null),E("")};return i.jsx(jp,{isOpen:t,onClose:n,title:"Comments",children:i.jsxs("div",{className:"space-y-6",children:[r&&i.jsxs("section",{children:[i.jsx("h3",{className:"mb-3 text-xs font-semibold uppercase tracking-wider text-stone-500 dark:text-stone-400",children:"Add comment"}),i.jsxs("div",{className:"rounded-xl border border-accent/30 bg-accent-muted/30 p-4 dark:border-violet-500/30 dark:bg-violet-500/10",children:[i.jsxs("p",{className:"text-xs font-medium text-stone-600 dark:text-stone-300",children:[i.jsx("span",{className:"font-semibold",children:R(r.phaseId)}),i.jsx("span",{className:"mx-1",children:""}),i.jsx("span",{children:U(r.rowKey)})]}),i.jsx("textarea",{value:j,onChange:z=>A(z.target.value),placeholder:"Write a comment...",rows:3,className:"mt-2 w-full rounded-lg border border-stone-300 px-3 py-2 text-sm focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100 dark:placeholder-stone-500"}),i.jsxs("div",{className:"mt-2 flex gap-2",children:[i.jsx("button",{onClick:M,disabled:!j.trim(),className:"rounded-lg bg-accent px-3 py-1.5 text-sm font-medium text-white hover:bg-accent-hover disabled:opacity-50 dark:bg-violet-600 dark:hover:bg-violet-500",children:"Add comment"}),i.jsx("button",{onClick:()=>{o(null),A("")},className:"rounded-lg px-3 py-1.5 text-sm text-stone-600 hover:bg-warm-100 dark:text-stone-300 dark:hover:bg-stone-700",children:"Cancel"})]})]})]}),w.length===0&&!r&&i.jsx("p",{className:"text-sm text-stone-400 dark:text-stone-500",children:"No comments yet. Click a cell to add one."}),w.length>0&&i.jsxs("section",{children:[i.jsx("h3",{className:"mb-3 text-xs font-semibold uppercase tracking-wider text-stone-500 dark:text-stone-400",children:"Comments"}),i.jsx("div",{className:"space-y-3",children:w.map(([z,B])=>{const T=_d(z);if(!T)return null;const{phaseId:F,rowKey:H}=T,Z=typeof B=="string"?{text:B,replies:[]}:{text:B.text,replies:B.replies??[]},G=Z.text,fe=Z.replies??[],ae=b===z,Pe=x===z;return i.jsxs("div",{ref:ne=>{J.current[z]=ne},className:"rounded-xl border border-stone-200 bg-warm-50/50 p-3 dark:border-stone-600 dark:bg-stone-700/50",children:[i.jsxs("p",{className:"text-xs font-medium text-stone-600 dark:text-stone-300",children:[i.jsx("span",{className:"font-semibold",children:R(F)}),i.jsx("span",{className:"mx-1",children:""}),i.jsx("span",{children:U(H)})]}),ae?i.jsxs(i.Fragment,{children:[i.jsx("textarea",{value:I,onChange:ne=>E(ne.target.value),rows:2,className:"mt-2 w-full rounded-lg border border-stone-300 px-3 py-2 text-sm focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100"}),i.jsxs("div",{className:"mt-2 flex gap-2",children:[i.jsx("button",{onClick:()=>$(z),className:"rounded-lg bg-accent px-2 py-1 text-xs font-medium text-white hover:bg-accent-hover dark:bg-violet-600 dark:hover:bg-violet-500",children:"Save"}),i.jsx("button",{onClick:()=>{k(null),E("")},className:"rounded-lg px-2 py-1 text-xs text-stone-600 hover:bg-warm-100 dark:text-stone-300 dark:hover:bg-stone-700",children:"Cancel"}),i.jsx("button",{onClick:()=>{y(z),k(null)},className:"rounded-lg px-2 py-1 text-xs text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/30",children:"Delete"})]})]}):i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"mt-1.5 text-sm text-stone-700 dark:text-stone-200",children:G}),fe.length>0&&i.jsx("div",{className:"mt-2 ml-4 space-y-2 border-l-2 border-stone-200 pl-3 dark:border-stone-600",children:fe.map((ne,Me)=>i.jsx("p",{className:"text-sm text-stone-600 dark:text-stone-300",children:ne},Me))}),Pe?i.jsxs("div",{className:"mt-3",children:[i.jsx("textarea",{value:g,onChange:ne=>S(ne.target.value),placeholder:"Write a reply...",rows:2,className:"w-full rounded-lg border border-stone-300 px-3 py-2 text-sm focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100 dark:placeholder-stone-500"}),i.jsxs("div",{className:"mt-2 flex gap-2",children:[i.jsx("button",{onClick:()=>P(z),disabled:!g.trim(),className:"rounded-lg bg-accent px-2 py-1 text-xs font-medium text-white hover:bg-accent-hover disabled:opacity-50 dark:bg-violet-600 dark:hover:bg-violet-500",children:"Reply"}),i.jsx("button",{onClick:()=>{m(null),S("")},className:"rounded-lg px-2 py-1 text-xs text-stone-600 hover:bg-warm-100 dark:text-stone-300 dark:hover:bg-stone-700",children:"Cancel"})]})]}):null,i.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[i.jsx("button",{onClick:()=>{k(z),E(G)},className:"text-xs text-accent hover:underline dark:text-accent-light",children:"Edit"}),i.jsx("button",{onClick:()=>{m(z),S("")},className:"text-xs text-accent hover:underline dark:text-accent-light",children:"Reply"}),i.jsx("button",{onClick:()=>y(z),className:"text-xs text-red-600 hover:underline dark:text-red-400",children:"Delete"})]})]})]},z)})})]})]})})}),Rs=[{key:"description",label:"Description",asList:!0,asDescription:!0},{key:"phaseHealth",label:"Phase health",asPhaseHealth:!0},{key:"customerJobs",label:"Customer jobs & goals",asJobs:!0},{key:"frontStageActions",label:"Front stage actions",asList:!0},{key:"systemsTechnologiesChannels",label:"Channels",asList:!0},{key:"struggles",label:"Struggles",asStruggles:!0},{key:"internalStruggles",label:"Internal struggles",asInternalStruggles:!0},{key:"backStageActions",label:"Back stage actions",asList:!0},{key:"systems",label:"Systems",asList:!0},{key:"relatedProcesses",label:"Related processes",asList:!0},{key:"opportunities",label:"Opportunities",asOpportunities:!0},{key:"relatedDocuments",label:"Related documents",asDocuments:!0}];function _v(e){if(!e)return Rs.map(r=>({...r,id:r.key,isCustom:!1,thickTopBorder:r.key==="internalStruggles"}));const t=e.rowOrder??Rs.map(r=>r.key),n=new Map((e.customRows??[]).map(r=>[r.id,r.label]));return t.map(r=>{const o=Rs.find(s=>s.key===r);return o?{...o,id:o.key,isCustom:!1,thickTopBorder:o.key==="internalStruggles"}:{id:r,key:r,label:n.get(r)??"Row",isCustom:!0}})}function zv(e){return!e||!e.trim()?[]:e.split(/\n|;|/).map(t=>t.trim()).filter(Boolean)}function Hv({phase:e,onDelete:t,isSelected:n,onTitleClick:r}){var f;const{attributes:o,listeners:s,setNodeRef:l,transform:a,transition:c,isDragging:d}=Ko({id:e.id}),p={transform:Mt.Transform.toString(a),transition:c},u=(f=e.imageUrl)==null?void 0:f.trim();return i.jsx("th",{ref:l,style:p,className:`
        relative min-w-[240px] max-w-[300px] border-b border-r border-stone-200 px-0 align-top
        dark:border-stone-500
        ${n?"bg-blue-50 dark:bg-blue-900/30":"bg-stone-50 dark:bg-stone-700"}
        ${d?"opacity-90 shadow-elevated dark:shadow-elevated-dark":""}
      `,children:i.jsxs("div",{className:"flex flex-col",children:[u&&i.jsx("div",{className:"mb-3 px-2 pt-3",children:i.jsx("img",{src:e.imageUrl,alt:"",className:"max-h-20 w-full rounded-lg object-contain",onError:h=>{h.target.style.display="none"}})}),i.jsxs("div",{className:"flex items-center gap-2 px-4 py-4",children:[i.jsx("div",{...o,...s,className:"cursor-grab touch-none rounded p-1 text-stone-400 hover:bg-warm-100 hover:text-stone-600 active:cursor-grabbing dark:text-stone-400 dark:hover:bg-stone-700 dark:hover:text-stone-300","aria-label":"Drag to reorder",children:i.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h16M4 16h16"})})}),i.jsx("button",{type:"button",onClick:h=>{h.preventDefault(),h.stopPropagation(),r()},className:"flex-1 cursor-pointer border-0 bg-transparent p-0 text-left font-semibold text-stone-900 hover:text-accent hover:underline dark:text-stone-100 dark:hover:text-accent",title:"Click to edit phase",children:e.title||"Untitled phase"}),i.jsx("button",{onClick:h=>{h.stopPropagation(),t()},className:"rounded-xl p-2 text-stone-400 hover:bg-red-50 hover:text-red-500 dark:hover:bg-red-900/30 dark:hover:text-red-400","aria-label":"Delete phase",children:i.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})})}function $v({row:e,children:t,thickTopBorder:n}){const{attributes:r,listeners:o,setNodeRef:s,transform:l,transition:a,isDragging:c}=Ko({id:e.id}),d={transform:Mt.Transform.toString(l),transition:a},p=ye.Children.toArray(t),u=p[0],f=p.slice(1);return i.jsxs("tr",{ref:s,style:d,className:`${c?"opacity-90 shadow-elevated bg-white dark:bg-stone-800 dark:shadow-elevated-dark":""} ${n?"border-t-2 border-t-stone-400 dark:border-t-stone-500":""}`,children:[ye.isValidElement(u)&&u.type==="td"?i.jsx("td",{...u.props,children:i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("span",{...r,...o,className:"flex flex-shrink-0 cursor-grab touch-none rounded p-1 text-stone-400 hover:bg-warm-100 hover:text-stone-600 active:cursor-grabbing dark:text-stone-400 dark:hover:bg-stone-700 dark:hover:text-stone-300","aria-label":"Drag to reorder row",children:i.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h16M4 16h16"})})}),u.props.children]})}):u,f]})}function Bv({value:e,hasComment:t,isOverlayVisible:n,onCellClick:r,onAddComment:o,onCopy:s,onCloseOverlay:l,asList:a=!1,asDescription:c=!1,asJobs:d=!1,asStruggles:p=!1,asInternalStruggles:u=!1,asOpportunities:f=!1,asDocuments:h=!1,asPhaseHealth:y=!1,onOpportunityClick:b,phaseJobs:k,onJobClick:x}){const m=v.useRef(null),g=!e||!e.trim(),S=a?zv(e):[],I=d&&k?k:[],E=p||u?Tt(e):[],j=f?Er(e):[],A=h?Ms(e):[],J=M=>M==="Functional"?"bg-blue-100 text-blue-800 dark:bg-blue-900/60 dark:text-blue-200":M==="Social"?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/60 dark:text-emerald-200":M==="Emotional"?"bg-amber-100 text-amber-800 dark:bg-amber-900/60 dark:text-amber-200":"bg-stone-100 text-stone-800 dark:bg-stone-700 dark:text-stone-200",w=M=>M==="High"?"bg-red-100 text-red-800 dark:bg-red-900/60 dark:text-red-200":M==="Medium"?"bg-amber-100 text-amber-800 dark:bg-amber-900/60 dark:text-amber-200":M==="Low"?"bg-stone-100 text-stone-600 dark:bg-stone-700 dark:text-stone-300":"bg-stone-100 text-stone-800 dark:bg-stone-700 dark:text-stone-200",R=M=>M==="High"?"bg-red-100 text-red-800 dark:bg-red-900/60 dark:text-red-200":M==="Medium"?"bg-amber-100 text-amber-800 dark:bg-amber-900/60 dark:text-amber-200":M==="Low"?"bg-stone-100 text-stone-600 dark:bg-stone-700 dark:text-stone-300":"bg-stone-100 text-stone-800 dark:bg-stone-700 dark:text-stone-200",U=n&&!f&&!h&&!y;return i.jsxs("td",{ref:m,onClick:f||h||y?void 0:r,className:`
        group relative min-w-[240px] max-w-[300px] min-h-[4.5rem] select-text border-b border-r border-stone-200 px-4 py-6 align-top
        transition-colors hover:bg-warm-50/50 dark:border-stone-600 dark:hover:bg-stone-800/50
        ${U?"bg-blue-50 dark:bg-blue-900/30":"bg-white dark:bg-stone-800"}
        ${t&&!f&&!h&&!y?"border-r-2 border-r-green-400":""}
      `,children:[U&&i.jsx("div",{className:"absolute inset-0 z-20 flex items-center justify-center rounded bg-stone-800/95 p-2",onClick:M=>M.stopPropagation(),children:i.jsxs("div",{className:"flex flex-row items-center justify-center gap-3",children:[i.jsx("button",{type:"button",onClick:o,className:"flex h-10 w-10 items-center justify-center rounded-full bg-white/90 text-stone-800 shadow-sm hover:bg-white hover:shadow",title:"Add comment",children:i.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})})}),i.jsx("button",{type:"button",onClick:s,className:"flex h-10 w-10 items-center justify-center rounded-full bg-white/90 text-stone-800 shadow-sm hover:bg-white hover:shadow",title:"Copy",children:i.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),i.jsx("button",{type:"button",onClick:l,className:"absolute right-1 top-1 rounded p-1.5 text-stone-400 hover:bg-white/20 hover:text-white","aria-label":"Close",children:i.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),d?I.length>0?i.jsx("ul",{className:"space-y-1.5 text-sm text-stone-700 dark:text-stone-100",children:I.map(M=>i.jsxs("li",{className:"flex flex-wrap items-center gap-1.5",children:[x?i.jsx("button",{type:"button",onClick:P=>{P.stopPropagation(),x(M.id)},className:"line-clamp-1 flex-1 text-left font-medium text-accent hover:underline",children:M.name??""}):i.jsx("span",{className:"line-clamp-1 flex-1",children:M.name??""}),i.jsx("span",{className:`inline-flex rounded-md px-1.5 py-0.5 text-xs font-medium ${J(M.tag??"")}`,children:M.tag})]},M.id))}):i.jsx("span",{className:"text-sm text-stone-400 dark:text-stone-400",children:""}):p||u?E.length>0?i.jsx("ul",{className:"space-y-1.5 text-sm text-stone-700 dark:text-stone-100",children:E.map((M,P)=>i.jsxs("li",{className:"flex flex-wrap items-center gap-1.5",children:[i.jsx("span",{className:"line-clamp-1 flex-1",children:M.text||""}),i.jsx("span",{className:`inline-flex rounded-md px-1.5 py-0.5 text-xs font-medium ${w(M.tag)}`,children:M.tag})]},P))}):i.jsx("span",{className:"text-sm text-stone-400 dark:text-stone-400",children:""}):y?(()=>{const M=Math.min(100,Math.max(0,parseInt(e,10)||0)),P=M>=60,$=M>=40&&M<60;return i.jsxs("div",{className:"rounded-xl border border-stone-200 bg-stone-100/80 px-4 py-3 dark:border-stone-600 dark:bg-stone-700/80",children:[i.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[i.jsx("span",{className:"text-xs font-medium text-stone-500 dark:text-stone-200",children:"Health"}),i.jsxs("span",{className:"flex items-center gap-1.5 text-sm font-medium text-stone-700 dark:text-stone-200",children:[i.jsx("span",{className:`inline-block h-2 w-2 shrink-0 rounded-full ${P?"bg-emerald-500":$?"bg-amber-500":"bg-red-500"}`}),M,"%"]})]}),i.jsxs("div",{className:"relative h-2 w-full overflow-hidden rounded-full bg-stone-200 dark:bg-stone-600",children:[i.jsx("div",{className:"absolute inset-0 rounded-full",style:{background:"linear-gradient(to right, rgb(239 68 68), rgb(234 179 8), rgb(34 197 94))"}}),i.jsx("div",{className:"absolute top-0 bottom-0 w-1 -translate-x-1/2 rounded-sm border border-stone-700 bg-stone-900 shadow-md dark:border-stone-300 dark:bg-white",style:{left:`${M}%`}})]}),i.jsxs("div",{className:"mt-1 flex justify-between text-[10px] text-stone-400 dark:text-stone-300",children:[i.jsx("span",{children:"Bad"}),i.jsx("span",{children:"Good"})]})]})})():h?A.length>0?i.jsx("ul",{className:"space-y-2 text-sm",children:A.map(M=>i.jsx("li",{className:"flex items-center gap-2",children:i.jsxs("a",{href:M.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1.5 truncate font-medium text-accent hover:underline dark:text-accent",children:[i.jsx("svg",{className:"h-4 w-4 flex-shrink-0 text-current opacity-70",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),i.jsx("span",{className:"truncate",children:M.label})]})},M.id))}):i.jsx("span",{className:"text-sm text-stone-400 dark:text-stone-400",children:""}):f?j.length>0?i.jsx("ul",{className:"space-y-1.5 text-sm text-stone-700 dark:text-stone-100",children:j.map(M=>i.jsxs("li",{className:"flex flex-wrap items-center gap-1.5",children:[i.jsx("button",{type:"button",onClick:P=>{P.stopPropagation(),b==null||b(M.id)},className:"line-clamp-1 flex-1 text-left font-medium text-accent hover:underline",children:M.name||""}),i.jsx("span",{className:`inline-flex rounded-md px-1.5 py-0.5 text-xs font-medium ${R(M.tag)}`,children:M.tag})]},M.id))}):i.jsx("span",{className:"text-sm text-stone-400 dark:text-stone-400",children:""}):g?i.jsx("span",{className:"text-sm text-stone-400 dark:text-stone-400",children:""}):c&&S.length>0?i.jsx("p",{className:"text-sm font-semibold text-stone-800 line-clamp-6 dark:text-stone-100",children:S.join(" ")}):a&&S.length>0?i.jsx("ul",{className:"space-y-1.5 text-sm text-stone-700 dark:text-stone-100",children:S.map((M,P)=>i.jsxs("li",{className:"flex gap-2",children:[i.jsx("span",{className:"mt-1.5 h-1.5 w-1.5 flex-shrink-0 rounded-full bg-stone-400 dark:bg-stone-500"}),i.jsx("span",{className:"line-clamp-2",children:M})]},P))}):i.jsx("p",{className:"text-sm text-stone-700 line-clamp-6 dark:text-stone-100",children:e})]})}function Uv(){const e=L(N=>{const W=N.selectedJourneyId;return W?N.phases.filter(q=>q.journeyId===W).sort((q,X)=>q.order-X.order):[]}),t=L(N=>N.selectedPhaseId),n=L(N=>N.setSelectedPhaseId),r=L(N=>N.deletePhase),o=L(N=>N.reorderPhases),s=L(N=>N.selectedJourneyId),l=L(N=>N.journeys),[a,c]=v.useState(null),[d,p]=v.useState(null),[u,f]=v.useState(null),[h,y]=v.useState(null),[b,k]=v.useState(!1),[x,m]=v.useState(null),g=v.useRef(null),[S,I]=v.useState(!1),[E,j]=v.useState(""),[A,J]=v.useState(null),[w,R]=v.useState(""),[U,M]=v.useState(null),[P,$]=v.useState(null),z=Di(Mn(Tr,{activationConstraint:{distance:8}}),Mn(Lr,{coordinateGetter:Fi})),B=l.find(N=>N.id===s)??null,T=_v(B),F=L(N=>N.addJourneyRow),H=L(N=>N.updateJourneyRow),Z=L(N=>N.deleteJourneyRow),G=L(N=>N.reorderJourneyRows),fe=L(N=>N.opportunities),ae=L(N=>N.jobs),Pe=L(N=>N.phases),ne=L(N=>N.updateOpportunity),Me=L(N=>N.updateJob),ze=N=>{const{active:W,over:q}=N;if(!q||W.id===q.id)return;const X=e.map(te=>te.id),pe=T.map(te=>te.id);if(X.includes(W.id)){if(!s)return;const te=X.indexOf(W.id),C=X.indexOf(q.id);if(te===-1||C===-1)return;o(s,ci(X,te,C));return}if(pe.includes(W.id)&&s){const te=pe.indexOf(W.id),C=pe.indexOf(q.id);if(te===-1||C===-1)return;const Q=(B==null?void 0:B.rowOrder)??Rs.map(oe=>oe.key);G(s,ci(Q,te,C))}},De=N=>{c({phaseId:N})},le=()=>{a&&(r(a.phaseId),c(null))},et=()=>{d&&(Z(d.journeyId,d.rowId),p(null))},O=N=>{$(null),n(N),k(!1)},K=(N,W)=>{W!=="opportunities"&&f(q=>(q==null?void 0:q.phaseId)===N&&(q==null?void 0:q.rowKey)===W?null:{phaseId:N,rowKey:W})},ce=(N,W,q)=>{q.stopPropagation(),y({phaseId:N,rowKey:W}),k(!0),n(null),f(null)},Ce=(N,W)=>{W.stopPropagation(),navigator.clipboard.writeText(N||"").catch(()=>{}),f(null)},Ae=N=>{N.stopPropagation(),f(null)},D=()=>{const N=E.trim();s&&N&&(F(s,N),j(""),I(!1))},ee=N=>{s&&w.trim()&&H(s,N,w.trim()),J(null),R("")},de=L(N=>N.cellComments);return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"flex flex-1 flex-col overflow-hidden",children:i.jsx("div",{className:"flex min-h-0 flex-1 flex-col p-8",style:{direction:"ltr"},children:i.jsx("div",{className:"min-h-0 flex-1 overflow-auto rounded-2xl border border-stone-200 bg-warm-50/50 dark:border-stone-600 dark:bg-stone-900/50",children:i.jsx("table",{className:"min-w-max border-collapse bg-white dark:bg-stone-800",style:{width:"max-content"},children:i.jsxs(Ti,{sensors:z,collisionDetection:Fg,onDragEnd:ze,children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{className:"sticky left-0 z-30 w-[200px] min-w-[200px] min-h-[4.5rem] border-b border-r border-stone-200 bg-stone-50 px-5 py-6 text-left text-xs font-semibold text-stone-700 shadow-[8px_0_12px_-4px_rgba(0,0,0,0.15),4px_0_20px_0_rgba(0,0,0,0.03)] dark:border-stone-500 dark:bg-stone-700 dark:text-stone-200 dark:shadow-[8px_0_12px_-4px_rgba(0,0,0,0.5),4px_0_24px_0_rgba(139,92,246,0.12)]",children:"Phase"}),i.jsx(Jo,{items:e.map(N=>N.id),strategy:nv,children:e.map(N=>i.jsx(Hv,{phase:N,onDelete:()=>De(N.id),isSelected:t===N.id,onTitleClick:()=>O(N.id)},N.id))})]})}),i.jsxs("tbody",{children:[i.jsx(Jo,{items:T.map(N=>N.id),strategy:Ji,children:T.map(N=>i.jsxs($v,{row:N,thickTopBorder:N.thickTopBorder,children:[i.jsx("td",{className:`sticky left-0 z-30 min-h-[4.5rem] border-b border-r border-stone-200 bg-stone-50 px-3 py-2 text-sm font-medium text-stone-600 shadow-[8px_0_12px_-4px_rgba(0,0,0,0.15),4px_0_20px_0_rgba(0,0,0,0.03)] dark:border-stone-500 dark:bg-stone-700 dark:text-stone-200 dark:shadow-[8px_0_12px_-4px_rgba(0,0,0,0.5),4px_0_24px_0_rgba(139,92,246,0.12)] ${N.thickTopBorder?"border-t-2 border-t-stone-400 dark:border-t-stone-500":""}`,children:i.jsxs("div",{className:"flex items-center gap-1",children:[N.isCustom&&A===N.id?i.jsx("input",{value:w,onChange:W=>R(W.target.value),onBlur:()=>ee(N.id),onKeyDown:W=>{W.key==="Enter"&&ee(N.id),W.key==="Escape"&&(J(null),R(""))},autoFocus:!0,className:"min-w-0 flex-1 rounded border border-stone-300 px-2 py-1 text-stone-700 focus:border-accent focus:outline-none focus:ring-1 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100"}):i.jsxs("span",{onDoubleClick:()=>{N.isCustom&&(J(N.id),R(N.label))},className:`flex flex-1 items-center gap-1.5 py-2 ${N.isCustom?"cursor-text":""}`,children:[N.label,N.key==="phaseHealth"&&i.jsxs("span",{className:"group/health relative flex cursor-help",title:"Phase health is calculated from: customer struggles (reduce score), internal struggles (reduce), opportunities (boost), and job mix (Social/Emotional jobs add health as differentiation potential).",children:[i.jsx("svg",{className:"h-4 w-4 text-stone-400 hover:text-stone-600 dark:text-stone-400 dark:hover:text-stone-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.jsx("span",{className:"pointer-events-none absolute bottom-full left-1/2 z-50 mb-1 w-64 -translate-x-1/2 rounded-lg bg-stone-800 px-3 py-2 text-xs text-white opacity-0 shadow-lg transition-opacity group-hover/health:opacity-100 dark:bg-stone-700",children:"Base 50. Struggles reduce (High/Med/Low). Opportunities boost. Social & Emotional jobs add up to +25."})]})]}),N.isCustom&&B&&s&&i.jsx("button",{type:"button",onClick:()=>p({journeyId:s,rowId:N.id}),className:"rounded p-1 text-stone-400 hover:bg-red-50 hover:text-red-600 dark:text-stone-400 dark:hover:bg-red-900/30 dark:hover:text-red-400","aria-label":"Delete row",children:i.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})}),e.map(W=>{var Jr,Qo,Fr;const q=fe.filter(ve=>ve.phaseId===W.id),pe=(W.jobIds??[]).map(ve=>ae.find(zi=>zi.id===ve)).filter(Boolean),te=N.isCustom?((Jr=W.customRowValues)==null?void 0:Jr[N.id])??"":N.key==="phaseHealth"?String(fo(W,q,pe)):N.key==="opportunities"?ig(q.map(ve=>({id:ve.id,name:ve.name,tag:ve.priority,description:ve.description,pointOfDifferentiation:ve.pointOfDifferentiation,criticalAssumptions:ve.criticalAssumptions,isPriority:ve.isPriority}))):N.key==="customerJobs"?pe.map(ve=>ve.name).join(`
`):(()=>{const ve=W[N.key];return typeof ve=="string"?ve:ve!=null?String(ve):""})(),C=hc(W.id,N.id),Q=!!((Fr=(Qo=de[C])==null?void 0:Qo.text)!=null&&Fr.trim()),oe=(u==null?void 0:u.phaseId)===W.id&&(u==null?void 0:u.rowKey)===N.id,ge=!N.isCustom&&"asList"in N&&N.asList&&!("asDescription"in N&&N.asDescription),ke=!N.isCustom&&"asJobs"in N&&N.asJobs,Le=!N.isCustom&&"asStruggles"in N&&N.asStruggles,an=!N.isCustom&&"asInternalStruggles"in N&&N.asInternalStruggles,Yt=!N.isCustom&&"asOpportunities"in N&&N.asOpportunities,Gn=!N.isCustom&&"asDocuments"in N&&N.asDocuments,Xn=!N.isCustom&&"asPhaseHealth"in N&&N.asPhaseHealth;return i.jsx(Bv,{value:te,hasComment:Yt||Gn||Xn?!1:Q,isOverlayVisible:oe,onCellClick:()=>K(W.id,N.id),onAddComment:ve=>ce(W.id,N.id,ve),onCopy:ve=>Ce(te,ve),onCloseOverlay:Ae,asList:ge,asDescription:!N.isCustom&&"asDescription"in N&&N.asDescription,asJobs:ke,asStruggles:Le,asInternalStruggles:an,asOpportunities:Yt,asDocuments:Gn,asPhaseHealth:Xn,onOpportunityClick:Yt?ve=>M({phaseId:W.id,opportunityId:ve}):void 0,phaseJobs:ke?pe:void 0,onJobClick:ke?ve=>$({jobId:ve}):void 0},W.id)})]},N.id))}),B&&i.jsxs("tr",{children:[i.jsx("td",{className:"sticky left-0 z-30 border-b border-r border-stone-200 bg-stone-50 px-3 py-2 shadow-[8px_0_12px_-4px_rgba(0,0,0,0.15),4px_0_20px_0_rgba(0,0,0,0.03)] dark:border-stone-500 dark:bg-stone-700 dark:shadow-[8px_0_12px_-4px_rgba(0,0,0,0.5),4px_0_24px_0_rgba(139,92,246,0.12)]",children:S?i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{value:E,onChange:N=>j(N.target.value),onKeyDown:N=>{N.key==="Enter"&&D(),N.key==="Escape"&&(I(!1),j(""))},placeholder:"Row name",autoFocus:!0,className:"flex-1 rounded border border-stone-300 px-2 py-1.5 text-sm focus:border-accent focus:outline-none focus:ring-1 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100"}),i.jsx("button",{type:"button",onClick:D,className:"rounded bg-accent px-2 py-1.5 text-sm font-medium text-white hover:bg-accent-hover",children:"Add"}),i.jsx("button",{type:"button",onClick:()=>{I(!1),j("")},className:"rounded px-2 py-1.5 text-sm text-stone-600 hover:bg-warm-100 dark:text-stone-300 dark:hover:bg-stone-700",children:"Cancel"})]}):i.jsxs("button",{type:"button",onClick:()=>I(!0),className:"flex items-center gap-2 rounded-lg border-2 border-dashed border-stone-300 px-3 py-2 text-sm text-stone-500 hover:border-accent hover:bg-accent-muted/30 hover:text-accent dark:border-stone-600 dark:text-stone-300 dark:hover:border-accent/50 dark:hover:bg-accent/10",children:[i.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add row"]})}),e.map(N=>i.jsx("td",{className:"min-w-[240px] max-w-[300px] border-b border-r border-stone-200 bg-warm-50/50 dark:border-stone-600 dark:bg-stone-800/50"},N.id))]})]})]})})})})}),i.jsx(Fv,{ref:g,isOpen:b,onClose:()=>k(!1),activeCell:h,onSetActiveCell:y,scrollToCommentKey:x,onScrollDone:()=>m(null)}),a&&i.jsx(Ro,{isOpen:!!a,onClose:()=>c(null),onConfirm:le,title:"Delete phase",message:"Are you sure you want to delete this phase? This cannot be undone."}),d&&i.jsx(Ro,{isOpen:!!d,onClose:()=>p(null),onConfirm:et,title:"Delete row",message:"Are you sure you want to delete this row? This cannot be undone."}),U&&(()=>{const N=fe.find(X=>X.id===U.opportunityId)??null,W=Pe.filter(X=>X.journeyId===(N==null?void 0:N.journeyId)),q=[];for(const X of W)for(const pe of X.jobIds??[]){const te=ae.find(C=>C.id===pe);te&&q.push({key:te.id,label:`${te.name} (${X.title||"Phase"})`})}return i.jsx(_i,{isOpen:!!N,onClose:()=>M(null),opportunity:N,jobsInJourney:q,onSave:X=>{ne(X.id,{name:X.name,description:X.description,priority:X.priority,stage:X.stage,isPriority:X.isPriority,pointOfDifferentiation:X.pointOfDifferentiation,criticalAssumptions:X.criticalAssumptions,linkedJobIds:X.linkedJobIds}),M(null)}})})(),P&&(()=>{const N=ae.find(W=>W.id===P.jobId);return N?i.jsx(Ei,{isOpen:!0,onClose:()=>$(null),job:N,jobIndex:0,onSave:(W,q)=>{Me(N.id,q),$(null)}}):null})()]})}function Wv({children:e}){const t=L(l=>l.selectedJourneyId),n=L(l=>l.createPhase),[r,o]=v.useState(!1),s=v.useRef(null);return v.useEffect(()=>{const l=a=>{s.current&&!s.current.contains(a.target)&&o(!1)};return r&&document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[r]),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>t&&n(t),className:"rounded-2xl bg-accent px-5 py-3 text-sm font-semibold text-white shadow-soft transition-all duration-200 hover:bg-accent-hover hover:shadow-glow hover:-translate-y-0.5 active:translate-y-0 dark:hover:shadow-glow-dark",children:"Add phase"}),e,i.jsxs("div",{ref:s,className:"relative",children:[i.jsx("button",{type:"button",onClick:()=>o(l=>!l),className:"flex h-11 w-11 items-center justify-center rounded-2xl border border-stone-200 bg-white text-stone-600 shadow-soft transition-all duration-200 hover:border-accent/30 hover:bg-accent/5 hover:text-accent dark:border-stone-600 dark:bg-stone-800 dark:text-stone-200 dark:hover:border-accent/40 dark:hover:bg-accent/10 dark:hover:text-accent-light","aria-label":"More options",children:i.jsxs("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 24 24",children:[i.jsx("circle",{cx:"12",cy:"6",r:"1.5"}),i.jsx("circle",{cx:"12",cy:"12",r:"1.5"}),i.jsx("circle",{cx:"12",cy:"18",r:"1.5"})]})}),r&&i.jsxs("div",{className:"absolute right-0 top-full z-50 mt-2 min-w-[180px] rounded-xl border border-stone-200 bg-white py-1 shadow-elevated dark:border-stone-600 dark:bg-stone-800 dark:shadow-elevated-dark",children:[i.jsxs("button",{type:"button",className:"flex w-full items-center gap-3 px-4 py-2.5 text-left text-sm text-stone-700 hover:bg-stone-100 dark:text-stone-100 dark:hover:bg-stone-700",onClick:()=>o(!1),children:[i.jsx("svg",{className:"h-4 w-4 text-stone-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.5M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2"})}),"Export to PDF"]}),i.jsxs("button",{type:"button",className:"flex w-full items-center gap-3 px-4 py-2.5 text-left text-sm text-stone-700 hover:bg-stone-100 dark:text-stone-100 dark:hover:bg-stone-700",onClick:()=>o(!1),children:[i.jsx("svg",{className:"h-4 w-4 text-stone-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Export to PNG"]}),i.jsxs("button",{type:"button",className:"flex w-full items-center gap-3 px-4 py-2.5 text-left text-sm text-stone-700 hover:bg-stone-100 dark:text-stone-100 dark:hover:bg-stone-700",onClick:()=>o(!1),children:[i.jsx("svg",{className:"h-4 w-4 text-stone-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})}),"Share"]})]})]})]})}function Vv({pct:e}){const t=Math.min(100,Math.max(0,e)),n=t>=60,r=t>=40&&t<60;return i.jsxs("div",{className:"rounded-xl border border-stone-200 bg-stone-100/80 px-4 py-3 dark:border-stone-600 dark:bg-stone-700/80",children:[i.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[i.jsx("span",{className:"text-xs font-medium text-stone-500 dark:text-stone-200",children:"Health"}),i.jsxs("span",{className:"flex items-center gap-1.5 text-sm font-medium text-stone-700 dark:text-stone-200",children:[i.jsx("span",{className:`inline-block h-2 w-2 shrink-0 rounded-full ${n?"bg-emerald-500":r?"bg-amber-500":"bg-red-500"}`}),Math.round(t),"%"]})]}),i.jsxs("div",{className:"relative h-2 w-full overflow-hidden rounded-full bg-stone-200 dark:bg-stone-600",children:[i.jsx("div",{className:"absolute inset-0 rounded-full",style:{background:"linear-gradient(to right, rgb(239 68 68), rgb(234 179 8), rgb(34 197 94))"}}),i.jsx("div",{className:"absolute top-0 bottom-0 w-1 -translate-x-1/2 rounded-sm border border-stone-700 bg-stone-900 shadow-md dark:border-stone-300 dark:bg-white",style:{left:`${t}%`}})]}),i.jsxs("div",{className:"mt-1 flex justify-between text-[10px] text-stone-400 dark:text-stone-300",children:[i.jsx("span",{children:"Bad"}),i.jsx("span",{children:"Good"})]})]})}function Kv(){const e=L(P=>P.clients),t=L(P=>P.projects),n=L(P=>P.journeys),r=L(P=>P.phases),o=L(P=>P.jobs),s=L(P=>P.opportunities),l=L(P=>P.selectedClientId),a=L(P=>P.selectedProjectId),c=L(P=>P.selectedJourneyId),d=L(P=>P.setCreateProjectModalOpen),p=L(P=>P.setCreateJourneyModalOpen),u=L(P=>P.setSelection),f=L(P=>P.createPhase),h=L(P=>P.deleteProject),y=L(P=>P.deleteClient),b=L(P=>P.deleteJourney),[k,x]=v.useState("projects"),[m,g]=v.useState(null),S=L(P=>P.setClientPageActiveTab),I=L(P=>P.goHome);v.useEffect(()=>(S(k),()=>S(null)),[k,S]);const E=e.find(P=>P.id===l),j=t.filter(P=>P.clientId===l),A=a?t.find(P=>P.id===a):null,J=c?n.find(P=>P.id===c):null,w=A?n.filter(P=>P.projectId===A.id):[],R=J?r.filter(P=>P.journeyId===J.id):[];if(!E)return null;const U=[{id:"projects",label:"Journeys"},{id:"insights",label:"Insights"},{id:"jobs",label:"Jobs"},{id:"opportunities",label:"Opportunities"}],M=k==="projects"&&!!c;return i.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[i.jsxs("div",{className:"flex flex-shrink-0 flex-wrap items-center justify-between gap-3 border-b border-stone-200/80 bg-white px-6 py-3 dark:border-stone-600/80 dark:bg-stone-900",children:[i.jsxs("div",{className:"flex min-w-0 flex-1 items-center gap-4",children:[i.jsx("button",{onClick:I,className:"shrink-0 font-brand text-lg font-bold leading-none tracking-tight text-stone-900 transition-opacity hover:opacity-80 dark:text-stone-100",title:"Home",children:"jrny"}),i.jsx("span",{className:"shrink-0 text-stone-300 dark:text-stone-500",children:"|"}),i.jsx("h2",{className:"truncate text-lg font-bold tracking-tight text-stone-900 dark:text-stone-100",children:E.name}),i.jsx("nav",{className:"flex shrink-0 gap-1","aria-label":"Tabs",children:U.map(P=>i.jsx("button",{onClick:()=>x(P.id),className:`rounded-xl px-3.5 py-2 text-sm font-medium transition-colors ${k===P.id?"bg-accent/15 text-accent dark:bg-violet-500/20 dark:text-accent-light":"text-stone-600 hover:bg-stone-100 hover:text-stone-900 dark:text-stone-400 dark:hover:bg-stone-800 dark:hover:text-stone-200"}`,children:P.label},P.id))})]}),i.jsxs("div",{className:"flex shrink-0 items-center gap-2",children:[k==="projects"&&i.jsx("button",{onClick:()=>d(!0),className:"rounded-2xl bg-accent px-5 py-2.5 text-sm font-semibold text-white shadow-soft transition-all duration-200 hover:bg-accent-hover hover:shadow-glow hover:-translate-y-0.5 active:translate-y-0 dark:hover:shadow-glow-dark",children:"Add Meta-Journey"}),M?i.jsx(Wv,{children:i.jsx(ha,{})}):i.jsx(ha,{})]})]}),i.jsxs("div",{className:"flex-1 overflow-auto flex flex-col min-h-0",children:[k==="projects"&&i.jsxs(i.Fragment,{children:[(a||c)&&i.jsx("div",{className:"flex-shrink-0 border-b border-stone-200 bg-white px-6 py-3 dark:border-stone-600 dark:bg-stone-900",children:i.jsxs("nav",{className:"flex items-center gap-2 text-sm","aria-label":"Breadcrumb",children:[i.jsx("button",{onClick:()=>u(E.id,null,null),className:"rounded p-1 text-stone-500 hover:bg-stone-100 hover:text-accent dark:text-stone-400 dark:hover:bg-stone-800 dark:hover:text-accent-light","aria-label":"Back to Meta-Journeys",children:i.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),A&&i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"text-stone-300 dark:text-stone-500",children:""}),i.jsx("button",{onClick:()=>u(E.id,A.id,null),className:`font-medium ${c?"text-stone-600 hover:text-accent dark:text-stone-400 dark:hover:text-accent-light":"text-accent dark:text-accent-light"}`,children:A.name}),J&&i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"text-stone-300 dark:text-stone-500",children:""}),i.jsx("span",{className:"font-medium text-accent dark:text-accent-light",children:J.name})]})]})]})}),a?c?R.length===0?i.jsx("div",{className:"flex-1 flex flex-col items-center justify-center p-10 md:p-14",children:i.jsxs("div",{className:"rounded-2xl border border-stone-200 bg-white p-12 text-center dark:border-stone-600 dark:bg-stone-800",children:[i.jsx("p",{className:"text-stone-500 dark:text-stone-400",children:"No phases yet. Add your first phase to begin building the journey map."}),i.jsx("button",{onClick:()=>c&&f(c),className:"mt-4 rounded-xl bg-accent px-6 py-2.5 text-sm font-medium text-white hover:bg-accent-hover",children:"Add first phase"})]})}):i.jsx("div",{className:"flex-1 min-h-0 flex flex-col",children:i.jsx(Uv,{})}):i.jsx("div",{className:"flex-1 overflow-auto p-10 md:p-14",children:A&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[i.jsx("h2",{className:"text-xl font-bold tracking-tight text-stone-900 dark:text-stone-100",children:A.name}),i.jsx("button",{onClick:()=>p(!0),className:"rounded-2xl bg-accent px-6 py-3 text-sm font-semibold text-white shadow-soft transition-all duration-200 hover:bg-accent-hover hover:shadow-glow hover:-translate-y-0.5 active:translate-y-0 dark:hover:shadow-glow-dark",children:"Add journey"})]}),w.length===0?i.jsxs("div",{className:"rounded-2xl border border-stone-200 bg-white p-12 text-center dark:border-stone-600 dark:bg-stone-800",children:[i.jsx("p",{className:"text-stone-500 dark:text-stone-400",children:"No journeys yet. Create a journey to start mapping customer phases."}),i.jsx("button",{onClick:()=>p(!0),className:"mt-4 rounded-xl bg-accent px-6 py-2.5 text-sm font-medium text-white hover:bg-accent-hover",children:"Add journey"})]}):i.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:w.map(P=>{const $=r.filter(F=>F.journeyId===P.id),z=$.length>0?Math.round($.reduce((F,H)=>{const Z=(H.jobIds??[]).map(G=>o.find(fe=>fe.id===G)).filter(Boolean);return F+fo(H,s.filter(G=>G.phaseId===H.id),Z)},0)/$.length):null,B=z!==null&&z>=60,T=z!==null&&z>=40&&z<60;return i.jsxs("div",{className:"group relative rounded-2xl border border-stone-200/80 bg-white shadow-soft transition-all duration-200 hover:-translate-y-0.5 hover:border-accent/20 hover:shadow-elevated dark:border-stone-600/80 dark:bg-stone-800 dark:hover:border-violet-500/25 dark:hover:shadow-elevated-dark",children:[i.jsxs("button",{onClick:()=>u(E.id,A.id,P.id),className:"w-full p-6 pr-12 text-left",children:[i.jsx("h3",{className:"font-semibold text-stone-900 transition-colors group-hover:text-accent dark:text-stone-100 dark:group-hover:text-accent-light",children:P.name}),P.description&&i.jsx("p",{className:"mt-2 line-clamp-2 text-sm text-stone-500 dark:text-stone-300",children:P.description}),i.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[$.length>0&&i.jsxs("span",{className:"rounded-full bg-accent/15 px-2.5 py-0.5 text-xs font-medium text-accent dark:bg-violet-500/15 dark:text-accent-light",children:[$.length," ",$.length===1?"phase":"phases"]}),z!==null&&i.jsxs("span",{className:`inline-flex items-center gap-1.5 rounded-full px-2.5 py-0.5 text-xs font-medium ${B?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/40 dark:text-emerald-400":T?"bg-amber-100 text-amber-800 dark:bg-amber-900/40 dark:text-amber-400":"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-400"}`,title:"Average phase health",children:[i.jsx("span",{className:`h-1.5 w-1.5 shrink-0 rounded-full ${B?"bg-emerald-500":T?"bg-amber-500":"bg-red-500"}`}),z,"% health"]})]})]}),i.jsx("button",{onClick:F=>{F.stopPropagation(),g({type:"journey",id:P.id,name:P.name})},className:"absolute right-3 top-3 rounded-lg p-2 text-stone-400 hover:bg-red-50 hover:text-red-500 dark:hover:bg-red-900/30 dark:hover:text-red-400","aria-label":"Delete journey",children:i.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},P.id)})})]})}):i.jsx("div",{className:"flex-1 overflow-auto p-10 md:p-14",children:j.length===0?i.jsxs("div",{className:"rounded-2xl border border-stone-200 bg-white p-12 text-center dark:border-stone-600 dark:bg-stone-800",children:[i.jsx("p",{className:"text-stone-500 dark:text-stone-400",children:"No Meta-Journeys yet. Add one to organize your journeys."}),i.jsx("button",{onClick:()=>d(!0),className:"mt-4 rounded-xl bg-accent px-6 py-2.5 text-sm font-medium text-white hover:bg-accent-hover",children:"Add Meta-Journey"})]}):i.jsx("div",{className:"space-y-6",children:j.map(P=>{const $=n.filter(T=>T.projectId===P.id),z=$.map(T=>{const F=r.filter(H=>H.journeyId===T.id);return F.length===0?null:F.reduce((H,Z)=>{const G=(Z.jobIds??[]).map(fe=>o.find(ae=>ae.id===fe)).filter(Boolean);return H+fo(Z,s.filter(fe=>fe.phaseId===Z.id),G)},0)/F.length}).filter(T=>T!==null),B=z.length>0?Math.round(z.reduce((T,F)=>T+F,0)/z.length):null;return i.jsx("div",{className:"rounded-2xl border border-stone-200 bg-white shadow-soft dark:border-stone-600 dark:bg-stone-800",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-start justify-between gap-4",children:[i.jsxs("button",{onClick:()=>u(E.id,P.id,null),className:"min-w-0 flex-1 text-left",children:[i.jsx("h3",{className:"font-semibold text-stone-900 transition-colors hover:text-accent dark:text-stone-100 dark:hover:text-accent-light",children:P.name}),P.description&&i.jsx("p",{className:"mt-1 text-sm text-stone-500 dark:text-stone-300",children:P.description})]}),i.jsx("button",{onClick:T=>{T.stopPropagation(),g({type:"project",id:P.id,name:P.name})},className:"shrink-0 rounded-lg p-2 text-stone-400 hover:bg-red-50 hover:text-red-500 dark:hover:bg-red-900/30 dark:hover:text-red-400","aria-label":"Delete Meta-Journey",children:i.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),B!==null&&i.jsx("div",{className:"mt-4 max-w-xs",title:"Average health of journeys in this Meta-Journey",children:i.jsx(Vv,{pct:B})}),i.jsx("div",{className:"mt-4",children:$.length===0?i.jsx("button",{onClick:()=>u(E.id,P.id,null),className:"w-full rounded-xl border border-dashed border-stone-200 bg-stone-50/50 py-8 text-center text-sm text-stone-500 transition-colors hover:border-accent/30 hover:bg-accent/5 dark:border-stone-600 dark:bg-stone-800/50 dark:text-stone-400 dark:hover:border-violet-500/30 dark:hover:bg-violet-500/5",children:"No journeys. Click to add journeys."}):i.jsx("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:$.map(T=>{const F=r.filter(fe=>fe.journeyId===T.id),H=F.length>0?Math.round(F.reduce((fe,ae)=>fe+fo(ae,s.filter(Pe=>Pe.phaseId===ae.id)),0)/F.length):null,Z=H!==null&&H>=60,G=H!==null&&H>=40&&H<60;return i.jsxs("button",{onClick:()=>u(E.id,P.id,T.id),className:"rounded-xl border border-stone-200 bg-white p-4 text-left shadow-soft transition-all hover:border-accent/20 hover:shadow-elevated dark:border-stone-600 dark:bg-stone-800 dark:hover:border-violet-500/25 dark:hover:shadow-elevated-dark",children:[i.jsx("h4",{className:"font-medium text-stone-900 dark:text-stone-100",children:T.name}),T.description&&i.jsx("p",{className:"mt-1 line-clamp-2 text-sm text-stone-500 dark:text-stone-300",children:T.description}),i.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[F.length>0&&i.jsxs("span",{className:"rounded-full bg-accent/15 px-2.5 py-0.5 text-xs font-medium text-accent dark:bg-violet-500/15 dark:text-accent-light",children:[F.length," ",F.length===1?"phase":"phases"]}),H!==null&&i.jsxs("span",{className:`inline-flex items-center gap-1.5 rounded-full px-2.5 py-0.5 text-xs font-medium ${Z?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/40 dark:text-emerald-400":G?"bg-amber-100 text-amber-800 dark:bg-amber-900/40 dark:text-amber-400":"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-400"}`,title:"Average phase health",children:[i.jsx("span",{className:`h-1.5 w-1.5 shrink-0 rounded-full ${Z?"bg-emerald-500":G?"bg-amber-500":"bg-red-500"}`}),H,"% health"]})]})]},T.id)})})})]})},P.id)})})})]}),k==="insights"&&i.jsx(Ov,{clientId:E.id,onLinkedJobClick:()=>x("jobs")}),k==="jobs"&&i.jsx(Cv,{clientId:E.id}),k==="opportunities"&&i.jsx(Tv,{clientId:E.id})]}),m&&i.jsx(Ro,{isOpen:!0,onClose:()=>g(null),onConfirm:()=>{m.type==="client"?y(m.id):m.type==="project"?h(m.id):b(m.id),g(null)},title:m.type==="client"?"Delete client":m.type==="project"?"Delete Meta-Journey":"Delete journey",message:m.type==="client"?`Are you sure you want to delete "${m.name}"? All Meta-Journeys and journeys under this client will also be deleted.`:m.type==="project"?`Are you sure you want to delete "${m.name}"? All journeys and phases under this Meta-Journey will also be deleted.`:`Are you sure you want to delete "${m.name}"? All phases under this journey will also be deleted.`})]})}const Qv=["Functional","Social","Emotional"],Yv=["High","Medium","Low"];function Gv({pct:e}){const t=Math.min(100,Math.max(0,e)),n=t>=60,r=t>=40&&t<60;return i.jsxs("div",{className:"rounded-xl border border-stone-200 bg-stone-100/80 px-4 py-3 dark:border-stone-600 dark:bg-stone-700/80",children:[i.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[i.jsx("span",{className:"text-xs font-medium text-stone-500 dark:text-stone-200",children:"Health"}),i.jsxs("span",{className:"flex items-center gap-1.5 text-sm font-medium text-stone-700 dark:text-stone-200",children:[i.jsx("span",{className:`inline-block h-2 w-2 shrink-0 rounded-full ${n?"bg-emerald-500":r?"bg-amber-500":"bg-red-500"}`}),Math.round(t),"%"]})]}),i.jsxs("div",{className:"relative h-2 w-full overflow-hidden rounded-full bg-stone-200 dark:bg-stone-600",children:[i.jsx("div",{className:"absolute inset-0 rounded-full",style:{background:"linear-gradient(to right, rgb(239 68 68), rgb(234 179 8), rgb(34 197 94))"}}),i.jsx("div",{className:"absolute top-0 bottom-0 w-1 -translate-x-1/2 rounded-sm border border-stone-700 bg-stone-900 shadow-md dark:border-stone-300 dark:bg-white",style:{left:`${t}%`}})]}),i.jsxs("div",{className:"mt-1 flex justify-between text-[10px] text-stone-400 dark:text-stone-300",children:[i.jsx("span",{children:"Bad"}),i.jsx("span",{children:"Good"})]})]})}function Xv(e){return e==="Functional"?"bg-blue-100 text-blue-800 dark:bg-blue-900/60 dark:text-blue-200":e==="Social"?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/60 dark:text-emerald-200":"bg-amber-100 text-amber-800 dark:bg-amber-900/60 dark:text-amber-200"}function qv(){var q,X,pe,te;const e=L(C=>C.altDashboardClientId),t=L(C=>C.clients),n=L(C=>C.projects),r=L(C=>C.journeys),o=L(C=>C.phases),s=L(C=>C.jobs),l=L(C=>C.opportunities),a=L(C=>C.updateJob),c=L(C=>C.setSelection),d=L(C=>C.setSelectedClientId),p=L(C=>C.setJobsClientId),u=L(C=>C.setOpportunitiesClientId),f=L(C=>C.goHome),h=L(C=>C.updateOpportunity),[y,b]=v.useState(!1),[k,x]=v.useState(null),[m,g]=v.useState(null),[S,I]=v.useState(null),[E,j]=v.useState(null),[A,J]=v.useState(""),[w,R]=v.useState(""),[U,M]=v.useState(""),[P,$]=v.useState(""),[z,B]=v.useState(""),[T,F]=v.useState(""),[H,Z]=v.useState(!0),[G,fe]=v.useState(!0),[ae,Pe]=v.useState(66.67),ne=v.useRef(null),Me=v.useRef(null),ze=v.useCallback(C=>{C.preventDefault(),ne.current={x:C.clientX,widthPct:ae}},[ae]),De=v.useCallback(C=>{if(!ne.current||!Me.current)return;const Q=Me.current.getBoundingClientRect(),ge=(C.clientX-ne.current.x)/Q.width*100,ke=Math.min(80,Math.max(20,ne.current.widthPct+ge));Pe(ke)},[]),le=v.useCallback(()=>{ne.current=null,window.removeEventListener("mousemove",De),window.removeEventListener("mouseup",le)},[De]),et=v.useCallback(C=>{ze(C),window.addEventListener("mousemove",De),window.addEventListener("mouseup",le)},[ze,De,le]),O=t.find(C=>C.id===e),K=n.filter(C=>C.clientId===e),ce=r.filter(C=>K.some(Q=>Q.id===C.projectId)),Ce=o.filter(C=>ce.some(Q=>Q.id===C.journeyId)),Ae=l.filter(C=>C.clientId===e),D=v.useMemo(()=>{const C=[];for(const Q of Ce){const oe=r.find(ke=>ke.id===Q.journeyId),ge=oe?n.find(ke=>ke.id===oe.projectId):null;for(const ke of Q.jobIds??[]){const Le=s.find(an=>an.id===ke);Le&&C.push({...Le,journeyName:(oe==null?void 0:oe.name)??"",journeyId:Q.journeyId,phaseId:Q.id,phaseTitle:Q.title??"",projectId:(ge==null?void 0:ge.id)??"",projectName:(ge==null?void 0:ge.name)??"",key:`${Q.id}-${ke}`,jobId:Le.id})}}return C},[Ce,r,n,s]),ee=v.useMemo(()=>{let C=D;return G&&(C=C.filter(Q=>Q.isPriority)),A&&(C=C.filter(Q=>Q.tag===A)),w&&(C=C.filter(Q=>Q.projectId===w)),U&&(C=C.filter(Q=>Q.journeyId===U)),C},[D,G,A,w,U]),de=v.useMemo(()=>{const C={High:0,Medium:1,Low:2};let Q=[...Ae];return H&&(Q=Q.filter(oe=>oe.isPriority)),P&&(Q=Q.filter(oe=>oe.projectId===P)),z&&(Q=Q.filter(oe=>oe.journeyId===z)),T&&(Q=Q.filter(oe=>oe.priority===T)),Q.sort((oe,ge)=>(C[oe.priority]??99)-(C[ge.priority]??99))},[Ae,H,P,z,T]),N=v.useCallback(C=>{const Q=s.find(oe=>oe.id===C);Q&&a(C,{isPriority:!Q.isPriority})},[s,a]),W=v.useCallback(C=>{h(C.id,{isPriority:!C.isPriority})},[h]);return!e||!O?null:i.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[i.jsx("div",{className:"flex flex-shrink-0 flex-wrap items-center justify-between gap-4 border-b border-stone-200/80 bg-white/80 px-6 py-4 backdrop-blur-sm dark:border-stone-600/80 dark:bg-stone-900/80",children:i.jsxs("div",{className:"flex w-full flex-wrap items-center gap-4",children:[i.jsxs("button",{onClick:f,className:"flex items-center gap-2 text-stone-500 hover:text-stone-700 dark:text-stone-400 dark:hover:text-stone-200",children:[i.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),i.jsxs("div",{className:"relative",children:[i.jsxs("button",{onClick:()=>b(C=>!C),className:"flex items-center gap-2 rounded-xl border border-stone-200 bg-white px-4 py-2 text-left shadow-soft dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100",children:[i.jsx("span",{className:"text-xl font-bold tracking-tight text-stone-900 dark:text-stone-100",children:O.name}),i.jsx("svg",{className:`h-5 w-5 text-stone-500 transition-transform dark:text-stone-400 ${y?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),y&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"fixed inset-0 z-10","aria-hidden":"true",onClick:()=>b(!1)}),i.jsx("div",{className:"absolute left-0 top-full z-20 mt-1 max-h-64 min-w-[200px] overflow-y-auto rounded-xl border border-stone-200 bg-white py-1 shadow-elevated dark:border-stone-600 dark:bg-stone-800 dark:shadow-elevated-dark",children:t.map(C=>i.jsx("button",{onClick:()=>{d(C.id),b(!1)},className:`w-full px-4 py-2 text-left text-sm hover:bg-stone-100 dark:hover:bg-stone-700 ${C.id===e?"bg-accent/10 font-medium text-accent dark:bg-violet-500/20 dark:text-accent-light":"text-stone-700 dark:text-stone-200"}`,children:C.name},C.id))})]})]}),i.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[i.jsx("button",{onClick:()=>p(O.id),className:"rounded-xl border border-accent/40 bg-accent/10 px-4 py-2 text-sm font-semibold text-accent transition-all hover:bg-accent/20 dark:border-violet-500/40 dark:bg-violet-500/10 dark:text-accent-light dark:hover:bg-violet-500/20",children:"View Jobs"}),i.jsx("button",{onClick:()=>u(O.id),className:"rounded-xl border border-accent/40 bg-accent/10 px-4 py-2 text-sm font-semibold text-accent transition-all hover:bg-accent/20 dark:border-violet-500/40 dark:bg-violet-500/10 dark:text-accent-light dark:hover:bg-violet-500/20",children:"Manage Opportunities"})]})]})}),i.jsxs("div",{ref:Me,className:"flex min-h-0 flex-1 overflow-hidden p-6 md:p-10",children:[i.jsxs("div",{className:"flex min-w-0 shrink-0 flex-col gap-8 overflow-auto pr-4",style:{width:`${ae}%`},children:[i.jsxs("section",{children:[i.jsx("h3",{className:"mb-4 text-sm font-semibold uppercase tracking-wider text-stone-500 dark:text-stone-400",children:"Meta-Journeys"}),i.jsx("div",{className:K.length>1?"grid grid-cols-2 gap-4":"space-y-4",children:K.map(C=>{const Q=r.filter(ke=>ke.projectId===C.id),oe=o.filter(ke=>Q.some(Le=>Le.id===ke.journeyId)),ge=oe.length>0?oe.reduce((ke,Le)=>{const an=(Le.jobIds??[]).map(Yt=>s.find(Gn=>Gn.id===Yt)).filter(Boolean);return ke+fo(Le,l.filter(Yt=>Yt.phaseId===Le.id),an)},0)/oe.length:null;return i.jsxs("div",{className:"rounded-2xl border border-stone-200/80 bg-white/90 p-5 shadow-soft dark:border-stone-600/80 dark:bg-stone-800/90",children:[i.jsxs("button",{type:"button",onClick:()=>O&&c(O.id,C.id,null),className:"w-full text-left transition-colors hover:opacity-90",children:[i.jsx("h4",{className:"font-semibold text-stone-900 dark:text-stone-100",children:C.name}),C.description&&i.jsx("p",{className:"mt-1 text-sm text-stone-500 dark:text-stone-400",children:C.description}),ge!==null&&i.jsx("div",{className:"mt-4 max-w-xs",children:i.jsx(Gv,{pct:ge})})]}),i.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:Q.map(ke=>i.jsx("button",{type:"button",onClick:()=>O&&c(O.id,C.id,ke.id),className:"rounded-full bg-accent/15 px-2.5 py-0.5 text-xs font-medium text-accent transition-colors hover:bg-accent/25 dark:bg-violet-500/15 dark:text-accent-light dark:hover:bg-violet-500/25",children:ke.name},ke.id))})]},C.id)})})]}),i.jsxs("section",{children:[i.jsx("h3",{className:"mb-4 text-sm font-semibold uppercase tracking-wider text-stone-500 dark:text-stone-400",children:"Opportunities"}),i.jsxs("div",{className:"mb-3 flex flex-wrap items-end gap-2",children:[i.jsx("button",{type:"button",onClick:()=>Z(!H),className:`shrink-0 rounded-md px-2 py-1.5 text-xs font-medium transition-colors ${H?"bg-amber-100 text-amber-800 dark:bg-amber-900/60 dark:text-amber-200":"bg-stone-100 text-stone-600 hover:bg-stone-200 dark:bg-stone-700 dark:text-stone-300 dark:hover:bg-stone-600"}`,title:H?"Showing priority only  click to show all":"Showing all  click for priority only",children:i.jsxs("span",{className:"inline-flex items-center gap-1",children:[i.jsx("svg",{className:"h-3.5 w-3.5",fill:H?"currentColor":"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z"})}),H?"Priority":"All"]})}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"filter-opp-project",className:"mb-1 block text-xs font-medium text-stone-500 dark:text-stone-400",children:"Meta-Journey"}),i.jsxs("select",{id:"filter-opp-project",value:P,onChange:C=>$(C.target.value),className:"min-w-0 flex-1 basis-24 rounded-md border border-stone-200 bg-white px-2 py-1.5 text-xs focus:border-accent focus:outline-none focus:ring-1 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100",children:[i.jsx("option",{value:"",children:"Select"}),K.map(C=>i.jsx("option",{value:C.id,children:C.name},C.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"filter-opp-journey",className:"mb-1 block text-xs font-medium text-stone-500 dark:text-stone-400",children:"Journey"}),i.jsxs("select",{id:"filter-opp-journey",value:z,onChange:C=>B(C.target.value),className:"min-w-0 flex-1 basis-24 rounded-md border border-stone-200 bg-white px-2 py-1.5 text-xs focus:border-accent focus:outline-none focus:ring-1 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100",children:[i.jsx("option",{value:"",children:"Select"}),ce.map(C=>i.jsx("option",{value:C.id,children:C.name},C.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"filter-opp-priority",className:"mb-1 block text-xs font-medium text-stone-500 dark:text-stone-400",children:"Priority"}),i.jsxs("select",{id:"filter-opp-priority",value:T,onChange:C=>F(C.target.value),className:"min-w-0 flex-1 basis-24 rounded-md border border-stone-200 bg-white px-2 py-1.5 text-xs focus:border-accent focus:outline-none focus:ring-1 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100",children:[i.jsx("option",{value:"",children:"Select"}),Yv.map(C=>i.jsx("option",{value:C,children:C},C))]})]})]}),i.jsx("div",{className:"space-y-2",children:de.length===0?i.jsx("p",{className:"text-sm text-stone-400 dark:text-stone-500",children:Ae.length===0?"No opportunities yet.":H?'No priority opportunities. Click "All" to see all.':"No opportunities match filters."}):de.map(C=>{const Q=r.find(ge=>ge.id===C.journeyId),oe=ge=>ge==="High"?"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300":ge==="Medium"?"bg-amber-100 text-amber-800 dark:bg-amber-900/40 dark:text-amber-300":"bg-stone-100 text-stone-600 dark:bg-stone-700 dark:text-stone-300";return i.jsxs("div",{className:"flex w-full items-center gap-2 rounded-xl border border-stone-200 bg-stone-100/80 transition-colors hover:border-accent/30 dark:border-stone-600 dark:bg-stone-700/80 dark:hover:border-violet-500/40",children:[i.jsx("button",{type:"button",onClick:ge=>{ge.stopPropagation(),W(C)},className:`shrink-0 rounded p-1 transition-colors ${C.isPriority?"text-amber-500 hover:text-amber-600 dark:text-amber-400":"text-stone-300 hover:text-amber-500 dark:text-stone-500"}`,title:C.isPriority?"Remove priority":"Mark as priority","aria-label":C.isPriority?"Remove priority":"Mark as priority",children:i.jsx("svg",{className:"h-4 w-4",fill:C.isPriority?"currentColor":"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z"})})}),i.jsxs("button",{type:"button",onClick:()=>x(C),className:"flex min-w-0 flex-1 items-center justify-between gap-3 px-2 py-3 text-left",children:[i.jsx("span",{className:"font-medium text-stone-900 dark:text-stone-100",children:C.name}),i.jsxs("div",{className:"flex shrink-0 items-center gap-2",children:[i.jsx("span",{className:`rounded-full px-2 py-0.5 text-xs font-medium ${oe(C.priority)}`,children:C.priority}),i.jsx("span",{className:"text-sm text-stone-500 dark:text-stone-400",children:(Q==null?void 0:Q.name)??""})]})]})]},C.id)})})]})]}),i.jsx("div",{role:"separator","aria-orientation":"vertical",onMouseDown:et,className:"flex w-2 shrink-0 cursor-col-resize items-stretch justify-center py-2 hover:bg-stone-100 dark:hover:bg-stone-700",title:"Drag to resize",children:i.jsx("div",{className:"w-0.5 rounded-full bg-stone-300 dark:bg-stone-600"})}),i.jsxs("aside",{className:"flex min-w-0 flex-1 flex-col overflow-hidden rounded-2xl border border-stone-200/80 bg-white/90 p-4 shadow-soft dark:border-stone-600/80 dark:bg-stone-800/90",children:[i.jsx("h3",{className:"mb-4 text-sm font-semibold uppercase tracking-wider text-stone-500 dark:text-stone-400",children:"Jobs"}),i.jsxs("div",{className:"mb-3 flex flex-wrap items-end gap-2",children:[i.jsx("button",{type:"button",onClick:()=>fe(!G),className:`shrink-0 rounded-md px-2 py-1.5 text-xs font-medium transition-colors ${G?"bg-amber-100 text-amber-800 dark:bg-amber-900/60 dark:text-amber-200":"bg-stone-100 text-stone-600 hover:bg-stone-200 dark:bg-stone-700 dark:text-stone-300 dark:hover:bg-stone-600"}`,title:G?"Showing priority only  click to show all":"Showing all  click for priority only",children:i.jsxs("span",{className:"inline-flex items-center gap-1",children:[i.jsx("svg",{className:"h-3.5 w-3.5",fill:G?"currentColor":"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z"})}),G?"Priority":"All"]})}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"filter-job-type",className:"mb-1 block text-xs font-medium text-stone-500 dark:text-stone-400",children:"Type"}),i.jsxs("select",{id:"filter-job-type",value:A,onChange:C=>J(C.target.value),className:"min-w-0 flex-1 basis-20 rounded-md border border-stone-200 bg-white px-2 py-1.5 text-xs focus:border-accent focus:outline-none focus:ring-1 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100",children:[i.jsx("option",{value:"",children:"Select"}),Qv.map(C=>i.jsx("option",{value:C,children:C},C))]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"filter-job-project",className:"mb-1 block text-xs font-medium text-stone-500 dark:text-stone-400",children:"Meta-Journey"}),i.jsxs("select",{id:"filter-job-project",value:w,onChange:C=>R(C.target.value),className:"min-w-0 flex-1 basis-20 rounded-md border border-stone-200 bg-white px-2 py-1.5 text-xs focus:border-accent focus:outline-none focus:ring-1 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100",children:[i.jsx("option",{value:"",children:"Select"}),K.map(C=>i.jsx("option",{value:C.id,children:C.name},C.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"filter-job-journey",className:"mb-1 block text-xs font-medium text-stone-500 dark:text-stone-400",children:"Journey"}),i.jsxs("select",{id:"filter-job-journey",value:U,onChange:C=>M(C.target.value),className:"min-w-0 flex-1 basis-20 rounded-md border border-stone-200 bg-white px-2 py-1.5 text-xs focus:border-accent focus:outline-none focus:ring-1 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100",children:[i.jsx("option",{value:"",children:"Select"}),ce.map(C=>i.jsx("option",{value:C.id,children:C.name},C.id))]})]})]}),i.jsx("div",{className:"min-h-0 flex-1 overflow-y-auto space-y-2",children:ee.length===0?i.jsx("p",{className:"text-sm text-stone-400 dark:text-stone-500",children:G?'No priority jobs. Click "All" to see all.':"No jobs match filters."}):ee.map(C=>i.jsxs("div",{className:"flex w-full items-start gap-2 rounded-xl border border-stone-200 bg-stone-100/80 transition-colors hover:border-accent/30 dark:border-stone-600 dark:bg-stone-700/80 dark:hover:border-violet-500/40",children:[i.jsx("button",{type:"button",onClick:Q=>{Q.stopPropagation(),N(C.jobId)},className:`shrink-0 rounded p-1 transition-colors ${C.isPriority?"text-amber-500 hover:text-amber-600 dark:text-amber-400":"text-stone-300 hover:text-amber-500 dark:text-stone-500"}`,title:C.isPriority?"Remove priority":"Mark as priority","aria-label":C.isPriority?"Remove priority":"Mark as priority",children:i.jsx("svg",{className:"h-4 w-4",fill:C.isPriority?"currentColor":"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z"})})}),i.jsxs("button",{type:"button",onClick:()=>g(C),className:"min-w-0 flex-1 px-1 py-2 text-left",children:[i.jsx("p",{className:"text-sm font-medium text-stone-900 dark:text-stone-100 line-clamp-2",children:C.name??C.text??""}),i.jsxs("div",{className:"mt-1.5 flex flex-wrap items-center gap-1.5 text-xs text-stone-500 dark:text-stone-400",children:[i.jsx("span",{children:C.journeyName}),i.jsx("span",{children:""}),i.jsx("span",{children:C.phaseTitle||""})]}),i.jsx("span",{className:`mt-1.5 inline-block rounded-full px-2 py-0.5 text-xs font-medium ${Xv(C.tag)}`,children:C.tag})]})]},C.key))})]})]}),k&&i.jsx(wc,{isOpen:!!k,onClose:()=>x(null),opportunity:k,clientName:(q=t.find(C=>C.id===k.clientId))==null?void 0:q.name,projectName:(X=n.find(C=>C.id===k.projectId))==null?void 0:X.name,journeyName:(pe=r.find(C=>C.id===k.journeyId))==null?void 0:pe.name,phaseTitle:(te=o.find(C=>C.id===k.phaseId))==null?void 0:te.title,linkedJobLabels:(k.linkedJobIds??[]).map(C=>{const Q=s.find(oe=>oe.id===C);return Q?{key:Q.id,label:Q.name}:null}).filter(Boolean),onEdit:()=>{j(k),x(null)}}),E&&i.jsx(_i,{isOpen:!!E,onClose:()=>j(null),opportunity:E,jobsInJourney:(()=>{const C=o.find(Q=>Q.id===E.phaseId);return C?(C.jobIds??[]).map(Q=>{const oe=s.find(ge=>ge.id===Q);return oe?{key:oe.id,label:`${oe.name} (${C.title||"Phase"})`}:null}).filter(Boolean):[]})(),onSave:C=>{h(C.id,{name:C.name,description:C.description,priority:C.priority,stage:C.stage,isPriority:C.isPriority,pointOfDifferentiation:C.pointOfDifferentiation,criticalAssumptions:C.criticalAssumptions,linkedJobIds:C.linkedJobIds}),j(null)}}),m&&i.jsx(Yp,{isOpen:!!m,onClose:()=>g(null),job:m,onEdit:m.jobId?()=>{I(m.jobId),g(null)}:void 0}),S&&(()=>{const C=s.find(Q=>Q.id===S);return C?i.jsx(Ei,{isOpen:!0,onClose:()=>I(null),job:C,jobIndex:0,onSave:(Q,oe)=>{a(C.id,oe),I(null)}}):null})()]})}function Zv({isOpen:e,onClose:t}){const[n,r]=v.useState(""),[o,s]=v.useState(""),[l,a]=v.useState(""),[c,d]=v.useState(""),p=L(y=>y.createClient),u=L(y=>y.setSelectedClientId),f=y=>{y.preventDefault();const b=n.trim();if(!b){d("Name is required");return}d("");const k=p(b,o.trim()||void 0,l.trim()||void 0);u(k.id),r(""),s(""),a(""),t()},h=()=>{r(""),s(""),a(""),d(""),t()};return i.jsx(Ot,{isOpen:e,onClose:h,title:"Create client",footer:i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{type:"button",onClick:h,className:"flex-1 rounded-xl border border-stone-300 px-4 py-2.5 font-medium text-stone-700 hover:bg-stone-50 dark:border-stone-600 dark:text-stone-200 dark:hover:bg-stone-700",children:"Cancel"}),i.jsx("button",{type:"submit",form:"create-client-form",disabled:!n.trim(),className:"flex-1 rounded-xl bg-accent px-4 py-2.5 font-semibold text-white shadow-soft transition-all duration-200 hover:bg-accent-hover hover:shadow-glow disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:shadow-none dark:hover:shadow-glow-dark",children:"Save"})]}),children:i.jsxs("form",{id:"create-client-form",onSubmit:f,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs(ie,{htmlFor:"client-name",children:["Name ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{id:"client-name",type:"text",value:n,onChange:y=>{r(y.target.value),d("")},className:"w-full rounded-xl border border-stone-300 px-4 py-2.5 focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100 dark:placeholder-stone-500",placeholder:"Client name",autoComplete:"off"}),c&&i.jsx("p",{className:"mt-1 text-sm text-red-500",children:c})]}),i.jsxs("div",{children:[i.jsx(ie,{htmlFor:"client-desc",children:"Description"}),i.jsx("textarea",{id:"client-desc",value:o,onChange:y=>s(y.target.value),rows:3,className:"w-full rounded-xl border border-stone-300 px-4 py-2.5 focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100 dark:placeholder-stone-500",placeholder:"Optional description"})]}),i.jsxs("div",{children:[i.jsx(ie,{htmlFor:"client-website",children:"Website"}),i.jsx("input",{id:"client-website",type:"url",value:l,onChange:y=>a(y.target.value),className:"w-full rounded-xl border border-stone-300 px-4 py-2.5 focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100 dark:placeholder-stone-500",placeholder:"https://example.com",autoComplete:"url"}),i.jsx("p",{className:"mt-1 text-xs text-stone-500 dark:text-stone-300",children:"We'll fetch the company logo from the website"})]})]})})}function ey({isOpen:e,onClose:t}){var k;const[n,r]=v.useState(""),[o,s]=v.useState(""),[l,a]=v.useState(""),c=L(x=>x.clients),d=L(x=>x.selectedClientId),p=L(x=>x.setSelectedClientId),u=L(x=>x.createProject),f=d??((k=c[0])==null?void 0:k.id),h=L(x=>x.setSelection),y=x=>{x.preventDefault();const m=n.trim();if(!m){a("Name is required");return}if(!f){a("Please select a client");return}a("");const g=u(f,m,o.trim()||void 0);h(f,g.id,null),r(""),s(""),t()},b=()=>{r(""),s(""),a(""),t()};return i.jsx(Ot,{isOpen:e,onClose:b,title:"Create Meta-Journey",footer:i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{type:"button",onClick:b,className:"flex-1 rounded-xl border border-stone-300 px-4 py-2.5 font-medium text-stone-700 hover:bg-stone-50 dark:border-stone-600 dark:text-stone-200 dark:hover:bg-stone-700",children:"Cancel"}),i.jsx("button",{type:"submit",form:"create-project-form",disabled:!n.trim()||!f,className:"flex-1 rounded-xl bg-accent px-4 py-2.5 font-semibold text-white shadow-soft transition-all duration-200 hover:bg-accent-hover hover:shadow-glow disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:shadow-none dark:hover:shadow-glow-dark",children:"Save"})]}),children:i.jsxs("form",{id:"create-project-form",onSubmit:y,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs(ie,{htmlFor:"project-name",children:["Name ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{id:"project-name",type:"text",value:n,onChange:x=>{r(x.target.value),a("")},className:"w-full rounded-xl border border-stone-300 px-4 py-2.5 focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100 dark:placeholder-stone-500",placeholder:"Meta-Journey name",autoComplete:"off",autoFocus:!0}),l&&i.jsx("p",{className:"mt-1 text-sm text-red-500",children:l})]}),c.length>1&&i.jsxs("div",{children:[i.jsx(ie,{htmlFor:"project-client",children:"Client"}),i.jsxs("select",{id:"project-client",value:f??"",onChange:x=>p(x.target.value||null),className:"w-full rounded-xl border border-stone-300 px-4 py-2.5 focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100 dark:placeholder-stone-500",children:[i.jsx("option",{value:"",children:"Select a client"}),c.map(x=>i.jsx("option",{value:x.id,children:x.name},x.id))]})]}),i.jsxs("div",{children:[i.jsx(ie,{htmlFor:"project-desc",children:"Description"}),i.jsx("textarea",{id:"project-desc",value:o,onChange:x=>s(x.target.value),rows:3,className:"w-full rounded-xl border border-stone-300 px-4 py-2.5 focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100 dark:placeholder-stone-500",placeholder:"Optional description"})]})]})})}function ty({isOpen:e,onClose:t}){var m;const[n,r]=v.useState(""),[o,s]=v.useState(""),[l,a]=v.useState(""),c=L(g=>g.projects),d=L(g=>g.selectedClientId),p=L(g=>g.selectedProjectId),u=L(g=>g.setSelectedProjectId),f=L(g=>g.createJourney),h=c.filter(g=>g.clientId===d),y=p??((m=h[0])==null?void 0:m.id),b=L(g=>g.setSelection),k=g=>{g.preventDefault();const S=n.trim();if(!S){a("Name is required");return}if(!y){a("Please select a Meta-Journey");return}a("");const I=f(y,S,o.trim()||void 0);d&&b(d,y,I.id),r(""),s(""),t()},x=()=>{r(""),s(""),a(""),t()};return i.jsx(Ot,{isOpen:e,onClose:x,title:"Create journey",footer:i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{type:"button",onClick:x,className:"flex-1 rounded-xl border border-stone-300 px-4 py-2.5 font-medium text-stone-700 hover:bg-stone-50 dark:border-stone-600 dark:text-stone-200 dark:hover:bg-stone-700",children:"Cancel"}),i.jsx("button",{type:"submit",form:"create-journey-form",disabled:!n.trim()||!y,className:"flex-1 rounded-xl bg-accent px-4 py-2.5 font-semibold text-white shadow-soft transition-all duration-200 hover:bg-accent-hover hover:shadow-glow disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:shadow-none dark:hover:shadow-glow-dark",children:"Save"})]}),children:i.jsxs("form",{id:"create-journey-form",onSubmit:k,className:"space-y-4",children:[h.length>1&&i.jsxs("div",{children:[i.jsx(ie,{htmlFor:"journey-project",children:"Project"}),i.jsxs("select",{id:"journey-project",value:y??"",onChange:g=>u(g.target.value||null),className:"w-full rounded-xl border border-stone-300 px-4 py-2.5 focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100 dark:placeholder-stone-500",children:[i.jsx("option",{value:"",children:"Select a Meta-Journey"}),h.map(g=>i.jsx("option",{value:g.id,children:g.name},g.id))]})]}),i.jsxs("div",{children:[i.jsxs(ie,{htmlFor:"journey-name",children:["Name ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{id:"journey-name",type:"text",value:n,onChange:g=>{r(g.target.value),a("")},className:"w-full rounded-xl border border-stone-300 px-4 py-2.5 focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100 dark:placeholder-stone-500",placeholder:"Journey name",autoComplete:"off"}),l&&i.jsx("p",{className:"mt-1 text-sm text-red-500",children:l})]}),i.jsxs("div",{children:[i.jsx(ie,{htmlFor:"journey-desc",children:"Description"}),i.jsx("textarea",{id:"journey-desc",value:o,onChange:g=>s(g.target.value),rows:3,className:"w-full rounded-xl border border-stone-300 px-4 py-2.5 focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/20 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-100 dark:placeholder-stone-500",placeholder:"Optional description"})]})]})})}function ny(){const e=L(t=>t.setSignedIn);return i.jsxs("div",{className:"relative flex min-h-screen w-full overflow-hidden bg-stone-950",children:[i.jsxs("div",{className:"absolute inset-0",children:[i.jsx("div",{className:"absolute -left-32 -top-32 h-96 w-96 rounded-full bg-violet-500/20 blur-3xl animate-float-slow"}),i.jsx("div",{className:"absolute right-0 top-1/3 h-80 w-80 rounded-full bg-violet-600/15 blur-3xl animate-float-slower"}),i.jsx("div",{className:"absolute bottom-1/4 left-1/3 h-72 w-72 rounded-full bg-stone-600/20 blur-3xl animate-float-slow"}),i.jsx("div",{className:"absolute -right-20 bottom-0 h-[400px] w-[400px] rounded-full bg-violet-500/10 blur-3xl animate-float-slower"}),i.jsx("div",{className:"absolute left-1/4 top-1/4 h-2 w-2 rounded-full bg-violet-400/60 animate-pulse-slow"}),i.jsx("div",{className:"absolute right-1/3 top-1/3 h-3 w-3 rounded-full bg-violet-300/40 animate-pulse-slow",style:{animationDelay:"1s"}}),i.jsx("div",{className:"absolute bottom-1/3 left-1/2 h-2 w-2 rounded-full bg-violet-400/50 animate-pulse-slow",style:{animationDelay:"2s"}}),i.jsxs("svg",{className:"absolute inset-0 h-full w-full opacity-[0.03]",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("defs",{children:i.jsx("pattern",{id:"grid",width:"60",height:"60",patternUnits:"userSpaceOnUse",children:i.jsx("path",{d:"M 60 0 L 0 0 0 60",fill:"none",stroke:"currentColor",strokeWidth:"0.5"})})}),i.jsx("rect",{width:"100%",height:"100%",fill:"url(#grid)"})]})]}),i.jsx("div",{className:"relative z-10 flex w-full flex-col items-center justify-center px-6 py-12",children:i.jsxs("div",{className:"w-full max-w-sm rounded-2xl border border-stone-700/50 bg-stone-900/60 p-8 shadow-2xl backdrop-blur-xl",children:[i.jsx("div",{className:"mb-10 flex justify-center",children:i.jsx("span",{className:"font-brand text-3xl font-bold tracking-tight text-white",children:"jrny"})}),i.jsxs("form",{onSubmit:t=>{t.preventDefault(),e(!0)},className:"space-y-5",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"mb-1.5 block text-sm font-medium text-stone-300",children:"Email"}),i.jsx("input",{id:"email",type:"email",placeholder:"you@example.com",autoComplete:"email",className:"w-full rounded-xl border border-stone-600 bg-stone-800/80 px-4 py-3 text-stone-100 placeholder-stone-500 focus:border-violet-500 focus:outline-none focus:ring-2 focus:ring-violet-500/30"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"password",className:"mb-1.5 block text-sm font-medium text-stone-300",children:"Password"}),i.jsx("input",{id:"password",type:"password",placeholder:"",autoComplete:"current-password",className:"w-full rounded-xl border border-stone-600 bg-stone-800/80 px-4 py-3 text-stone-100 placeholder-stone-500 focus:border-violet-500 focus:outline-none focus:ring-2 focus:ring-violet-500/30"})]}),i.jsx("button",{type:"submit",className:"w-full rounded-xl bg-violet-600 px-4 py-3 font-semibold text-white shadow-lg shadow-violet-500/25 transition-all hover:bg-violet-500 hover:shadow-violet-500/30 focus:outline-none focus:ring-2 focus:ring-violet-500 focus:ring-offset-2 focus:ring-offset-stone-900",children:"Sign In"})]})]})})]})}function ry(){const e=L(g=>g.loadState),t=L(g=>g.isSignedIn),n=L(g=>g.clients),r=L(g=>g.selectedClientId),o=L(g=>g.altDashboardClientId),s=L(g=>g.createClientModalOpen),l=L(g=>g.createProjectModalOpen),a=L(g=>g.createJourneyModalOpen),c=L(g=>g.setCreateClientModalOpen),d=L(g=>g.setCreateProjectModalOpen),p=L(g=>g.setCreateJourneyModalOpen),u=L(g=>g.darkMode),[f,h]=v.useState(!1);v.useEffect(()=>{e()},[e]),v.useEffect(()=>{document.documentElement.classList.toggle("dark",u)},[u]);const y=n.length===0,b=!r,k=r&&!o,x=L(g=>g.goHome);if(!t)return i.jsx(ny,{});const m=i.jsx("button",{onClick:x,className:"font-brand text-xl font-bold leading-none tracking-tight text-stone-900 transition-opacity hover:opacity-80 dark:text-stone-100",title:"Home",children:"jrny"});return i.jsxs("div",{className:"flex h-screen overflow-hidden bg-gradient-subtle dark:bg-gradient-subtle-dark",children:[i.jsxs("main",{className:"flex flex-1 flex-col overflow-hidden",children:[!k&&i.jsx(Sh,{brand:m,actions:i.jsx("div",{className:"flex items-center gap-2",children:i.jsx(ha,{})})}),y&&i.jsx("div",{className:"flex flex-1 flex-col p-10 md:p-14",children:i.jsx(bg,{title:"No clients yet",description:"Create your first client to get started with journey mapping.",action:i.jsx("button",{onClick:()=>c(!0),className:"rounded-2xl bg-accent px-8 py-4 font-medium text-white hover:bg-accent-hover",children:"Create client"})})}),!y&&b&&i.jsx(kg,{}),o&&i.jsx(qv,{}),k&&i.jsx(Kv,{})]}),i.jsx(hg,{}),i.jsx(Zv,{isOpen:s,onClose:()=>c(!1)}),i.jsx(ey,{isOpen:l,onClose:()=>d(!1)}),i.jsx(ty,{isOpen:a,onClose:()=>p(!1)}),i.jsx(yg,{isOpen:f,onClose:()=>h(!1)}),i.jsx("button",{onClick:()=>h(!0),className:"fixed bottom-6 right-6 z-30 flex h-14 w-14 items-center justify-center rounded-full bg-accent text-white shadow-elevated hover:bg-accent-hover focus:outline-none focus:ring-2 focus:ring-accent focus:ring-offset-2","aria-label":"Open chat",children:i.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})})]})}kl.createRoot(document.getElementById("root")).render(i.jsx(ye.StrictMode,{children:i.jsx(ry,{})}));
